version: v1

# Dependencies
deps:
  - buf.build/googleapis/googleapis

# Lint configuration
lint:
  use:
    - STANDARD
  except:
    # Allow custom field numbers for extensions
    - ENUM_VALUE_PREFIX
    - RPC_REQUEST_STANDARD_NAME
    - RPC_RESPONSE_STANDARD_NAME
    # Allow unversioned packages for options and common types
    - PACKAGE_VERSION_SUFFIX
    # Allow "Interface" suffix for backend interface services (Layer 1)
    # These are thin, composable interfaces, not traditional RPC services
    - SERVICE_SUFFIX
  enum_zero_value_suffix: _UNSPECIFIED

# Breaking change detection
breaking:
  use:
    - FILE
  except:
    # Allow adding fields (backward compatible) - using new rules
    - FIELD_SAME_CARDINALITY
    - FIELD_WIRE_COMPATIBLE_CARDINALITY
    - FIELD_WIRE_JSON_COMPATIBLE_CARDINALITY
    # Allow enum value name changes (for UNSPECIFIED zero value migration)
    - ENUM_VALUE_SAME_NAME
    # Allow file deletions (control_plane.proto was already removed)
    - FILE_NO_DELETE

# Code generation inputs
build:
  excludes:
    - proto/vendor
