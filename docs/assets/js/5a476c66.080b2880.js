"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[60355],{5800:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"netflix-write-ahead-log","title":"Netflix Write-Ahead Log (WAL)","description":"Source: Netflix Tech Blog","source":"@site/../docs-cms/netflix/write-ahead-log.md","sourceDirName":".","slug":"/netflix-write-ahead-log","permalink":"/prism-data-layer/netflix/netflix-write-ahead-log","draft":false,"unlisted":false,"editUrl":"https://github.com/jrepp/prism-data-layer/tree/main/docs-cms/../docs-cms/netflix/write-ahead-log.md","tags":[{"inline":true,"label":"netflix","permalink":"/prism-data-layer/netflix/tags/netflix"},{"inline":true,"label":"wal","permalink":"/prism-data-layer/netflix/tags/wal"},{"inline":true,"label":"resilience","permalink":"/prism-data-layer/netflix/tags/resilience"},{"inline":true,"label":"durability","permalink":"/prism-data-layer/netflix/tags/durability"}],"version":"current","sidebarPosition":5,"frontMatter":{"id":"netflix-write-ahead-log","title":"Netflix Write-Ahead Log (WAL)","sidebar_label":"Write-Ahead Log","sidebar_position":5,"tags":["netflix","wal","resilience","durability"]},"sidebar":"netflixSidebar","previous":{"title":"Use Cases","permalink":"/prism-data-layer/netflix/netflix-key-use-cases"},"next":{"title":"Schema Evolution","permalink":"/prism-data-layer/netflix/netflix-data-evolve-migration"}}');var n=a(74848),r=a(28453);const s={id:"netflix-write-ahead-log",title:"Netflix Write-Ahead Log (WAL)",sidebar_label:"Write-Ahead Log",sidebar_position:5,tags:["netflix","wal","resilience","durability"]},o=void 0,l={},d=[];function c(e){const t={a:"a",li:"li",ol:"ol",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.strong,{children:"Source"}),": ",(0,n.jsx)(t.a,{href:"https://netflixtechblog.com/building-a-resilient-data-platform-with-write-ahead-log-at-netflix-127b6712359a",children:"Netflix Tech Blog"})]}),"\n",(0,n.jsx)(t.p,{children:"Netflix's Write-Ahead Log (WAL) is a distributed, generic platform built on the Data Gateway framework, designed to ensure durable, ordered, and reliable delivery of data mutations. It acts as a resilient buffer between a client application and a target datastore, absorbing and replaying data changes to protect against downstream failures and system inconsistencies. Unlike a traditional database WAL, Netflix's version is an abstracted, pluggable service that decouples the application from the underlying queueing and storage technologies.\nBuilding a Resilient Data Platform with Write-Ahead Log at ...\nBuilding a Resilient Data Platform with Write-Ahead Log at ...\nBuilding a Resilient Data Platform with Write-Ahead Log at ...\nCore architecture\nNamespace-driven configuration\nAbstraction Layer: The WAL provides a simple WriteToLog API endpoint that abstracts all the underlying complexity.\nLogical Separation: A \"namespace\" is used to provide logical separation for different use cases and define where and how data is stored.\nPluggable Backends: Each namespace can be configured to use different queueing technologies, such as Apache Kafka, AWS SQS, or a combination of multiple. This allows the platform team to optimize for performance, durability, and cost without any application code changes.\nCentralized Configuration: The namespace serves as a central hub for configuring settings like retry backoff multipliers and the maximum number of retry attempts.\nSeparation of concerns\nThe WAL separates message producers and consumers. Producers receive client requests and place them in a queue, while consumers process messages from the queue and send them to target datastores. This separation enables independent scaling of producer and consumer groups for each shard based on resource usage.\nUnder the hood\nThe WAL handles ordered mutations, particularly for complex requests. This involves tagging individual operations with sequence numbers, using a completion marker, persisting the state to durable storage, and reconstructing/applying the mutations in order via the consumer.\nKey functionality and use cases"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"System entropy management\nThe WAL helps maintain consistency between different datastores by handling asynchronous mutations and retries from a single write by the application."}),"\n",(0,n.jsx)(t.li,{children:"Generic data replication\nIt provides a generic replication solution for datastores without built-in capabilities, forwarding mutations in-region or cross-region."}),"\n",(0,n.jsx)(t.li,{children:"Data corruption and incident recovery\nThe WAL acts as a replayable log of mutations for recovering from database corruption. This allows restoring from a backup and replaying WAL mutations, with the option to omit faulty ones."}),"\n",(0,n.jsx)(t.li,{children:"Asynchronous processing and delayed queues\nThe WAL can smooth traffic spikes, act as a delayed queue for requests like bulk deletes with added delay and jitter, and abstract away retry logic for real-time pipelines.\nResiliency built-in\nThe WAL incorporates several resiliency features:\nAutomatic scaling of producers and consumers.\nIntegration with adaptive load shedding to prevent overload.\nDedicated Dead Letter Queues (DLQs) for handling errors.\nNetflix's WAL is a platform tool that improves the reliability and resilience of its data ecosystem by centralizing the management of durability, consistency, and retries."}),"\n"]})]})}function u(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},28453:(e,t,a)=>{a.d(t,{R:()=>s,x:()=>o});var i=a(96540);const n={},r=i.createContext(n);function s(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:s(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);