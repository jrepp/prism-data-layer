"use strict";(globalThis.webpackChunkdocusaurus=globalThis.webpackChunkdocusaurus||[]).push([[41025],{28453:(n,e,s)=>{s.d(e,{R:()=>r,x:()=>l});var i=s(96540);const t={},a=i.createContext(t);function r(n){const e=i.useContext(a);return i.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:r(n.components),i.createElement(a.Provider,{value:e},n.children)}},71001:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"memo-023","title":"MEMO-023: Multi-Tenancy Models and Isolation Strategies","description":"Overview","source":"@site/../docs-cms/memos/memo-023-tenancy-models.md","sourceDirName":".","slug":"/memo-023","permalink":"/prism-data-layer/memos/memo-023","draft":false,"unlisted":false,"editUrl":"https://github.com/jrepp/prism-data-layer/tree/main/docs-cms/../docs-cms/memos/memo-023-tenancy-models.md","tags":[{"inline":true,"label":"tenancy","permalink":"/prism-data-layer/memos/tags/tenancy"},{"inline":true,"label":"isolation","permalink":"/prism-data-layer/memos/tags/isolation"},{"inline":true,"label":"architecture","permalink":"/prism-data-layer/memos/tags/architecture"},{"inline":true,"label":"deployment","permalink":"/prism-data-layer/memos/tags/deployment"},{"inline":true,"label":"security","permalink":"/prism-data-layer/memos/tags/security"}],"version":"current","frontMatter":{"title":"MEMO-023: Multi-Tenancy Models and Isolation Strategies","author":"Jacob Repp","created":"2025-10-13T00:00:00.000Z","updated":"2025-10-13T00:00:00.000Z","tags":["tenancy","isolation","architecture","deployment","security"],"id":"memo-023","project_id":"prism-data-layer","doc_uuid":"023e8f72-4b9c-4d1a-a716-446655440023"},"sidebar":"memosSidebar","previous":{"title":"Prismctl OIDC Integration Testing Requirements \u2022 MEMO-022","permalink":"/prism-data-layer/memos/memo-022"}}');var t=s(74848),a=s(28453);const r={title:"MEMO-023: Multi-Tenancy Models and Isolation Strategies",author:"Jacob Repp",created:new Date("2025-10-13T00:00:00.000Z"),updated:new Date("2025-10-13T00:00:00.000Z"),tags:["tenancy","isolation","architecture","deployment","security"],id:"memo-023",project_id:"prism-data-layer",doc_uuid:"023e8f72-4b9c-4d1a-a716-446655440023"},l="Multi-Tenancy Models and Isolation Strategies",o={},c=[{value:"Overview",id:"overview",level:2},{value:"Tenancy Models",id:"tenancy-models",level:2},{value:"1. Single Tenancy (Self-Managed)",id:"1-single-tenancy-self-managed",level:3},{value:"2. Multi-Tenant (Shared Proxy Pool)",id:"2-multi-tenant-shared-proxy-pool",level:3},{value:"3. Hybrid Tenancy (Tiered Service)",id:"3-hybrid-tenancy-tiered-service",level:3},{value:"Isolation Levels",id:"isolation-levels",level:2},{value:"1. None (No Isolation)",id:"1-none-no-isolation",level:3},{value:"2. Namespace Isolation",id:"2-namespace-isolation",level:3},{value:"3. Session Isolation",id:"3-session-isolation",level:3},{value:"Comparison Matrix",id:"comparison-matrix",level:2},{value:"Decision Framework",id:"decision-framework",level:2},{value:"Choose <strong>Single Tenancy</strong> if:",id:"choose-single-tenancy-if",level:3},{value:"Choose <strong>Multi-Tenant</strong> if:",id:"choose-multi-tenant-if",level:3},{value:"Choose <strong>Hybrid</strong> if:",id:"choose-hybrid-if",level:3},{value:"Choose <strong>Isolation: None</strong> if:",id:"choose-isolation-none-if",level:3},{value:"Choose <strong>Isolation: Namespace</strong> if:",id:"choose-isolation-namespace-if",level:3},{value:"Choose <strong>Isolation: Session</strong> if:",id:"choose-isolation-session-if",level:3},{value:"Configuration Examples",id:"configuration-examples",level:2},{value:"Example 1: SaaS Startup (Multi-Tenant + Namespace Isolation)",id:"example-1-saas-startup-multi-tenant--namespace-isolation",level:3},{value:"Example 2: Enterprise Healthcare (Single Tenant + Session Isolation)",id:"example-2-enterprise-healthcare-single-tenant--session-isolation",level:3},{value:"Example 3: Hybrid Platform (Mix of Enterprise and Standard)",id:"example-3-hybrid-platform-mix-of-enterprise-and-standard",level:3},{value:"Implementation Roadmap",id:"implementation-roadmap",level:2},{value:"Phase 1: Multi-Tenant with Namespace Isolation (POC)",id:"phase-1-multi-tenant-with-namespace-isolation-poc",level:3},{value:"Phase 2: Session Isolation and Audit",id:"phase-2-session-isolation-and-audit",level:3},{value:"Phase 3: Single-Tenant Deployment Automation",id:"phase-3-single-tenant-deployment-automation",level:3},{value:"Phase 4: prism-bridge Advanced Features",id:"phase-4-prism-bridge-advanced-features",level:3},{value:"Phase 5: Compliance and Security Hardening",id:"phase-5-compliance-and-security-hardening",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Authentication and Authorization",id:"authentication-and-authorization",level:3},{value:"Data Isolation",id:"data-isolation",level:3},{value:"Audit and Compliance",id:"audit-and-compliance",level:3},{value:"Operational Considerations",id:"operational-considerations",level:2},{value:"Monitoring",id:"monitoring",level:3},{value:"Alerting",id:"alerting",level:3},{value:"Capacity Planning",id:"capacity-planning",level:3},{value:"Conclusion",id:"conclusion",level:2},{value:"References",id:"references",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"multi-tenancy-models-and-isolation-strategies",children:"Multi-Tenancy Models and Isolation Strategies"})}),"\n",(0,t.jsx)(e.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(e.p,{children:"Prism is designed to support multiple tenancy models with configurable component isolation at the proxy level. This flexibility allows organizations to choose the right balance between resource efficiency, performance isolation, security boundaries, and operational complexity based on their specific requirements."}),"\n",(0,t.jsx)(e.p,{children:"This memo explores three primary tenancy models and three isolation levels, providing guidance on when to use each approach and how to configure Prism accordingly."}),"\n",(0,t.jsx)(e.h2,{id:"tenancy-models",children:"Tenancy Models"}),"\n",(0,t.jsx)(e.h3,{id:"1-single-tenancy-self-managed",children:"1. Single Tenancy (Self-Managed)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Architecture"}),": One proxy deployment per tenant, fully isolated infrastructure."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Tenant A (Large Enterprise Application)            \u2502\n\u2502                                                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502 Prism Proxy Cluster (N-way deployment)   \u2502     \u2502\n\u2502  \u2502                                           \u2502     \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502     \u2502\n\u2502  \u2502  \u2502Proxy-1 \u2502  \u2502Proxy-2 \u2502  \u2502Proxy-N \u2502     \u2502     \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2502           \u2502           \u2502           \u2502                \u2502\n\u2502           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502\n\u2502                       \u2502                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502\n\u2502  \u2502 Dedicated Backend Infrastructure         \u2502     \u2502\n\u2502  \u2502  \u2022 Redis cluster                         \u2502     \u2502\n\u2502  \u2502  \u2022 NATS cluster                          \u2502     \u2502\n\u2502  \u2502  \u2022 PostgreSQL instance                   \u2502     \u2502\n\u2502  \u2502  \u2022 Kafka cluster                         \u2502     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Tenant B (Separate Infrastructure)                 \u2502\n\u2502  [Similar isolated deployment]                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Large enterprise applications"})," with high throughput requirements (>10K RPS)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Regulatory compliance"})," requirements mandating physical infrastructure separation (HIPAA, PCI-DSS, FedRAMP)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Noisy neighbor elimination"})," for mission-critical applications"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Independent upgrade cycles"})," - tenant controls when to upgrade Prism versions"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Custom performance tuning"})," - dedicated resources can be sized precisely for workload"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Characteristics"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Complete isolation"}),": No shared infrastructure between tenants"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Dedicated resources"}),": CPU, memory, network, storage all tenant-specific"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Independent lifecycle"}),": Each tenant deployment can be upgraded, scaled, or maintained independently"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Maximum performance"}),": No resource contention with other tenants"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Higher cost"}),": Full infrastructure stack per tenant"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configuration Example"})," (",(0,t.jsx)(e.code,{children:"single-tenant-config.yaml"}),"):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'deployment:\n  model: single_tenant\n  tenant_id: enterprise-customer-a\n\nproxy:\n  replicas: 5  # N-way deployment\n  resources:\n    cpu: "4"\n    memory: "8Gi"\n\n  # Each tenant gets dedicated proxy cluster\n  cluster:\n    mode: dedicated\n    load_balancer: haproxy  # or nginx, envoy\n\nbackends:\n  # All backends are tenant-specific\n  redis:\n    endpoint: "redis.tenant-a.svc.cluster.local:6379"\n    isolation: physical\n\n  nats:\n    endpoint: "nats.tenant-a.svc.cluster.local:4222"\n    isolation: physical\n\n  postgres:\n    endpoint: "postgres.tenant-a.svc.cluster.local:5432"\n    database: "tenant_a_db"\n    isolation: physical\n\nobservability:\n  # Dedicated observability stack\n  metrics_endpoint: "prometheus.tenant-a.svc:9090"\n  traces_endpoint: "tempo.tenant-a.svc:4317"\n  logs_endpoint: "loki.tenant-a.svc:3100"\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Deployment Patterns"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Kubernetes Namespace per Tenant"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"kubectl create namespace tenant-a\nhelm install prism-proxy prism/proxy \\\n  --namespace tenant-a \\\n  --values tenant-a-values.yaml\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Bare Metal / VM Deployment"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'# Each tenant gets dedicated servers\nansible-playbook deploy-prism.yml \\\n  --extra-vars "tenant_id=tenant-a servers=proxy-a-[1:5]"\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Cloud Provider (AWS)"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-terraform",children:'module "prism_tenant_a" {\n  source = "./modules/prism-single-tenant"\n  tenant_id = "tenant-a"\n  vpc_id = aws_vpc.tenant_a.id\n  proxy_count = 5\n  instance_type = "c6i.2xlarge"\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Operational Considerations"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cost"}),": Highest per-tenant cost due to dedicated infrastructure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Maintenance"}),": Requires separate maintenance windows per tenant"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Monitoring"}),": Dedicated observability stack per tenant increases operational overhead"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Networking"}),": Requires careful network segmentation and firewall rules"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Disaster Recovery"}),": Each tenant needs independent backup and recovery procedures"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-multi-tenant-shared-proxy-pool",children:"2. Multi-Tenant (Shared Proxy Pool)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Architecture"}),": Control plane manages pool of proxies using ",(0,t.jsx)(e.code,{children:"prism-bridge"}),", serving multiple tenants."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Prism Control Plane (prism-bridge)                          \u2502\n\u2502                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502 Namespace Registry                                \u2502      \u2502\n\u2502  \u2502  \u2022 tenant-a \u2192 proxy-pool-1                       \u2502      \u2502\n\u2502  \u2502  \u2022 tenant-b \u2192 proxy-pool-1                       \u2502      \u2502\n\u2502  \u2502  \u2022 tenant-c \u2192 proxy-pool-2 (premium tier)        \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2502                                                              \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510      \u2502\n\u2502  \u2502 Load Balancer Integration                        \u2502      \u2502\n\u2502  \u2502  \u2022 HAProxy config generation                     \u2502      \u2502\n\u2502  \u2502  \u2022 DNS-based routing                             \u2502      \u2502\n\u2502  \u2502  \u2022 Service mesh integration (Istio/Linkerd)      \u2502      \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                          \u2502\n          \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n          \u2502               \u2502               \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Proxy Pool 1  \u2502  \u2502 Proxy Pool 2\u2502  \u2502 Proxy Pool N  \u2502\n\u2502 (Standard)    \u2502  \u2502 (Premium)   \u2502  \u2502 (High-Perf)   \u2502\n\u2502               \u2502  \u2502             \u2502  \u2502               \u2502\n\u2502 \u250c\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2510\u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2510      \u2502  \u2502 \u250c\u2500\u2500\u2500\u2500\u2510        \u2502\n\u2502 \u2502Px-1\u2502 \u2502Px-2\u2502\u2502  \u2502 \u2502Px-3\u2502      \u2502  \u2502 \u2502Px-N\u2502        \u2502\n\u2502 \u2514\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2518\u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2518      \u2502  \u2502 \u2514\u2500\u2500\u2500\u2500\u2518        \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502                 \u2502                 \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Shared Backend Infrastructure (with namespacing)     \u2502\n\u2502  \u2022 Redis (multi-db or keyspace prefixes)             \u2502\n\u2502  \u2022 NATS (subject hierarchies: tenant-a.*, tenant-b.*)\u2502\n\u2502  \u2022 PostgreSQL (row-level security, schemas)          \u2502\n\u2502  \u2022 Kafka (topic prefixes: tenant-a.*, tenant-b.*)    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"SaaS platforms"})," serving hundreds or thousands of customers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Internal platform teams"})," providing data access as a service"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cost optimization"})," when complete isolation is not required"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Rapid tenant onboarding"})," - add new tenants without provisioning infrastructure"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Development/staging environments"})," where isolation requirements are lower"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Characteristics"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Shared proxy infrastructure"}),": Multiple tenants route through same proxy pool"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Logical isolation"}),": Namespacing and access control separate tenant data"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Resource efficiency"}),": Higher utilization through multiplexing"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Centralized management"}),": Single control plane manages all tenants"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Noisy neighbor risk"}),": One tenant's traffic can impact others"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configuration Example"})," (",(0,t.jsx)(e.code,{children:"multi-tenant-config.yaml"}),"):"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'deployment:\n  model: multi_tenant\n  control_plane: prism-bridge\n\nprism_bridge:\n  # Control plane for managing proxy pools\n  listen_addr: "0.0.0.0:8980"\n\n  # Namespace-to-pool mapping\n  namespace_routing:\n    - namespace: "tenant-a-*"\n      pool: "standard"\n      weight: 1\n\n    - namespace: "tenant-b-*"\n      pool: "standard"\n      weight: 1\n\n    - namespace: "premium-*"\n      pool: "premium"\n      weight: 1\n\n  # Load balancer integration\n  load_balancer:\n    type: haproxy\n    config_path: "/etc/haproxy/haproxy.cfg"\n    reload_command: "systemctl reload haproxy"\n\n  # Service discovery integration\n  service_discovery:\n    type: kubernetes\n    label_selector: "app=prism-proxy"\n\nproxy_pools:\n  standard:\n    replicas: 10\n    resources:\n      cpu: "2"\n      memory: "4Gi"\n    isolation_level: namespace  # See isolation section below\n\n  premium:\n    replicas: 5\n    resources:\n      cpu: "4"\n      memory: "8Gi"\n    isolation_level: session\n\nbackends:\n  # Shared backends with logical isolation\n  redis:\n    endpoint: "redis-cluster.svc.cluster.local:6379"\n    isolation:\n      type: keyspace_prefix\n      format: "tenant:{tenant_id}:{key}"\n\n  nats:\n    endpoint: "nats.svc.cluster.local:4222"\n    isolation:\n      type: subject_hierarchy\n      format: "tenant.{tenant_id}.{subject}"\n\n  postgres:\n    endpoint: "postgres.svc.cluster.local:5432"\n    isolation:\n      type: row_level_security\n      enable_rls: true\n      tenant_column: "tenant_id"\n\n  kafka:\n    endpoint: "kafka.svc.cluster.local:9092"\n    isolation:\n      type: topic_prefix\n      format: "{tenant_id}.{topic}"\n\nobservability:\n  # Shared observability with tenant labels\n  metrics_endpoint: "prometheus.svc:9090"\n  traces_endpoint: "tempo.svc:4317"\n  logs_endpoint: "loki.svc:3100"\n  tenant_label: "prism_tenant_id"\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"prism-bridge Architecture"}),":"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.code,{children:"prism-bridge"})," is the control plane component for multi-tenant deployments:"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Namespace Registry"}),": Maps tenant namespaces to proxy pools"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Load Balancer Integration"}),": Generates HAProxy/nginx configs, updates DNS records"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Health Monitoring"}),": Tracks proxy health and removes unhealthy instances"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Dynamic Routing"}),": Routes tenant requests to appropriate proxy pool"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Orchestrator Integration"}),": Works with Kubernetes, Nomad, or other orchestrators"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Example prism-bridge API"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:'# Register new tenant\ncurl -X POST http://prism-bridge:8980/api/v1/tenants \\\n  -H "Content-Type: application/json" \\\n  -d \'{\n    "tenant_id": "tenant-c",\n    "namespace_pattern": "tenant-c-*",\n    "pool": "standard",\n    "isolation_level": "namespace"\n  }\'\n\n# Get tenant routing info\ncurl http://prism-bridge:8980/api/v1/tenants/tenant-c\n\n# List available proxy pools\ncurl http://prism-bridge:8980/api/v1/pools\n\n# Update load balancer configuration\ncurl -X POST http://prism-bridge:8980/api/v1/loadbalancer/reload\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Orchestrator Integration"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Kubernetes (Controller Pattern)"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"apiVersion: prism.io/v1alpha1\nkind: PrismTenant\nmetadata:\n  name: tenant-c\nspec:\n  pool: standard\n  isolation_level: namespace\n  namespaces:\n    - tenant-c-production\n    - tenant-c-staging\n"})}),"\n",(0,t.jsxs)(e.p,{children:["prism-bridge watches for ",(0,t.jsx)(e.code,{children:"PrismTenant"})," CRDs and updates routing accordingly."]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Nomad (Service Discovery)"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-hcl",children:'job "prism-bridge" {\n  group "control-plane" {\n    task "bridge" {\n      driver = "docker"\n      config {\n        image = "prism/bridge:latest"\n      }\n      service {\n        name = "prism-bridge"\n        port = "api"\n        tags = ["control-plane"]\n      }\n    }\n  }\n}\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Bare Metal (Address Lists)"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# prism-bridge maintains address list file\nprism-bridge get-addresses --pool standard > /etc/haproxy/backends-standard.lst\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Operational Considerations"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Cost"}),": Significantly lower per-tenant cost (10-100x reduction)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Noisy Neighbors"}),": Requires careful resource limits and quality of service policies"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Security"}),": Strong authentication and authorization critical (mTLS, namespace-based ACLs)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Monitoring"}),": Must track per-tenant metrics to identify noisy neighbors"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Scalability"}),": Can scale to thousands of tenants on same infrastructure"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-hybrid-tenancy-tiered-service",children:"3. Hybrid Tenancy (Tiered Service)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Architecture"}),": Combination of single-tenant for premium customers and multi-tenant for standard customers."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Prism Control Plane (prism-bridge)                   \u2502\n\u2502                                                       \u2502\n\u2502  Tenant Routing Rules:                               \u2502\n\u2502    \u2022 enterprise-tier-* \u2192 dedicated proxy pools       \u2502\n\u2502    \u2022 standard-tier-*   \u2192 shared proxy pools          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502                  \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250c\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502 Enterprise     \u2502   \u2502 Standard       \u2502\n        \u2502 Dedicated      \u2502   \u2502 Shared Pool    \u2502\n        \u2502 Proxy Pool     \u2502   \u2502                \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Use Cases"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Tiered SaaS pricing"}),": Enterprise customers get dedicated resources"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Migration path"}),": Start multi-tenant, upgrade to single-tenant as customers grow"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Compliance boundaries"}),": Some customers require dedicated infrastructure, others don't"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Performance SLAs"}),": Different SLAs for different customer tiers"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configuration Example"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'deployment:\n  model: hybrid\n\ntenant_routing:\n  rules:\n    - match:\n        tier: enterprise\n        annual_revenue: ">100000"\n      action:\n        deployment: single_tenant\n        pool: dedicated\n\n    - match:\n        tier: premium\n      action:\n        deployment: multi_tenant\n        pool: premium\n        isolation_level: session\n\n    - match:\n        tier: standard\n      action:\n        deployment: multi_tenant\n        pool: standard\n        isolation_level: namespace\n'})}),"\n",(0,t.jsx)(e.h2,{id:"isolation-levels",children:"Isolation Levels"}),"\n",(0,t.jsxs)(e.p,{children:["Isolation levels control how tenant workloads are separated ",(0,t.jsx)(e.strong,{children:"within"})," a shared proxy deployment. These can be configured independently of the tenancy model."]}),"\n",(0,t.jsx)(e.h3,{id:"1-none-no-isolation",children:"1. None (No Isolation)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Description"}),": No enforced bulkhead between tenant data. All tenants share the same connection pools and backend resources."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Prism Proxy                          \u2502\n\u2502                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 Shared Connection Pool     \u2502    \u2502\n\u2502  \u2502  \u2022 100 Redis connections   \u2502    \u2502\n\u2502  \u2502  \u2022 50 NATS connections     \u2502    \u2502\n\u2502  \u2502  \u2022 20 PostgreSQL conns     \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                      \u2502\n\u2502  All tenants use same connections   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"When to Use"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Development environments"})," where isolation is not a concern"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Single logical application"}),' with multiple "namespaces" that are actually just organizational units']}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Maximum performance"})," - connection pooling and multiplexing reduce latency"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Trusted tenants"})," - all tenants are internal teams within same organization"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configuration"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"proxy:\n  isolation_level: none\n\n  connection_pools:\n    redis:\n      max_connections: 100\n      shared: true\n\n    nats:\n      max_connections: 50\n      shared: true\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Security Implications"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"No tenant isolation"}),": One tenant can exhaust connections for others"]}),"\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"Cross-tenant visibility"}),": Application bugs could expose data across tenants"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Use only in trusted environments"})]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Performance Characteristics"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Lowest latency"}),": No per-request connection setup"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Highest throughput"}),": Maximum connection reuse"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Lowest resource usage"}),": Minimal overhead"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"2-namespace-isolation",children:"2. Namespace Isolation"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Description"}),": Each namespace has its own pool of pattern providers (backend connections). Namespaces are the primary isolation boundary."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Prism Proxy                                          \u2502\n\u2502                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 Namespace: tenant-a-production             \u2502    \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502    \u2502\n\u2502  \u2502  \u2502 Pattern Provider Pool            \u2502     \u2502    \u2502\n\u2502  \u2502  \u2502  \u2022 20 Redis connections          \u2502     \u2502    \u2502\n\u2502  \u2502  \u2502  \u2022 10 NATS connections           \u2502     \u2502    \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2502                                                      \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u2502\n\u2502  \u2502 Namespace: tenant-b-production             \u2502    \u2502\n\u2502  \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u2502    \u2502\n\u2502  \u2502  \u2502 Pattern Provider Pool            \u2502     \u2502    \u2502\n\u2502  \u2502  \u2502  \u2022 20 Redis connections          \u2502     \u2502    \u2502\n\u2502  \u2502  \u2502  \u2022 10 NATS connections           \u2502     \u2502    \u2502\n\u2502  \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2502    \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"When to Use"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Standard multi-tenant SaaS"})," where tenants share infrastructure but need resource guarantees"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Internal platform teams"})," serving multiple product teams"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Noisy neighbor mitigation"})," - one tenant's traffic spike doesn't affect others"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Compliance requirements"})," needing logical separation (but not physical)"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configuration"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'proxy:\n  isolation_level: namespace\n\n  connection_pools:\n    per_namespace: true\n\n    redis:\n      connections_per_namespace: 20\n      max_total_connections: 500  # Hard limit across all namespaces\n\n    nats:\n      connections_per_namespace: 10\n      max_total_connections: 250\n\n  resource_limits:\n    per_namespace:\n      cpu: "1"           # 1 CPU core per namespace\n      memory: "2Gi"      # 2GB RAM per namespace\n      max_rps: 1000      # Max requests per second\n'})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Implementation Details"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Connection Pool Isolation"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:'type NamespaceConnectionPool struct {\n    namespace   string\n    redisConns  *pool.Pool  // Dedicated Redis connection pool\n    natsConns   *pool.Pool  // Dedicated NATS connection pool\n    kafkaConns  *pool.Pool  // Dedicated Kafka connection pool\n}\n\n// Proxy maintains map: namespace -> pool\npools := map[string]*NamespaceConnectionPool{\n    "tenant-a-prod": NewNamespaceConnectionPool("tenant-a-prod", config),\n    "tenant-b-prod": NewNamespaceConnectionPool("tenant-b-prod", config),\n}\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Dynamic Pool Creation"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"First request from new namespace creates dedicated pool"}),"\n",(0,t.jsx)(e.li,{children:"Pools are lazily initialized (not created until first use)"}),"\n",(0,t.jsx)(e.li,{children:"Idle pools can be garbage collected after timeout"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Resource Accounting"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",children:"# Query per-namespace resource usage\nprismctl metrics namespace tenant-a-prod\n\n# Output:\n# Connections: Redis=18/20, NATS=7/10, Kafka=3/5\n# CPU: 0.7/1.0 cores\n# Memory: 1.2/2.0 GiB\n# RPS: 450/1000\n"})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Security Implications"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Resource isolation"}),": One tenant cannot exhaust another's connections"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Failure isolation"}),": Connection pool exhaustion in one namespace doesn't affect others"]}),"\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"Still shared process"}),": All namespaces run in same proxy process (memory limits apply to whole proxy)"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Authentication required"}),": Namespace must be authenticated (mTLS, JWT, API key)"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Performance Characteristics"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Good latency"}),": Connections are reused within namespace"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Good throughput"}),": Each namespace has dedicated resources"]}),"\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"Higher memory usage"}),": N namespaces \xd7 M connections per namespace"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"3-session-isolation",children:"3. Session Isolation"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Description"}),": Shared pool of pattern providers (connections), but each session (client connection) gets dedicated connections that are ",(0,t.jsx)(e.strong,{children:"not reused"})," for other sessions. Connections are set up and torn down for each unique session."]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Prism Proxy                                          \u2502\n\u2502                                                      \u2502\n\u2502  Session 1 (client-a)                               \u2502\n\u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502    \u2502 Dedicated Connections            \u2502            \u2502\n\u2502    \u2502  Redis-conn-1, NATS-conn-1       \u2502            \u2502\n\u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2502          \u2193 Torn down when session ends              \u2502\n\u2502                                                      \u2502\n\u2502  Session 2 (client-b)                               \u2502\n\u2502    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510            \u2502\n\u2502    \u2502 Dedicated Connections            \u2502            \u2502\n\u2502    \u2502  Redis-conn-2, NATS-conn-2       \u2502            \u2502\n\u2502    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518            \u2502\n\u2502                                                      \u2502\n\u2502  \u26a0\ufe0f Connections NOT reused between sessions         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"When to Use"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Compliance requirements"})," mandating connection-level isolation (PCI-DSS, HIPAA)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Security-sensitive applications"})," where connection reuse is prohibited"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Audit requirements"})," needing per-session connection lifecycle tracking"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Premium tier customers"})," who pay for guaranteed dedicated connections"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Short-lived sessions"})," where setup cost is acceptable"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Configuration"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"proxy:\n  isolation_level: session\n\n  session_management:\n    connection_reuse: false  # Key: disable connection reuse\n    max_sessions: 1000       # Limit concurrent sessions\n    session_timeout: 300s    # Idle session timeout\n\n  connection_pools:\n    shared: true             # Pool exists but connections are not reused\n\n    redis:\n      max_connections: 500   # Total pool size\n      per_session_limit: 5   # Max connections per session\n\n    nats:\n      max_connections: 250\n      per_session_limit: 3\n\n  audit:\n    log_connection_lifecycle: true\n    log_session_lifecycle: true\n"})}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Implementation Details"}),":"]}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Session Identification"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-go",children:"type Session struct {\n    ID          string    // UUID\n    ClientID    string    // Authenticated client identity\n    Namespace   string    // Tenant namespace\n    CreatedAt   time.Time\n    LastActivity time.Time\n    Connections  []*Connection  // Dedicated connections\n}\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Connection Lifecycle"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-text",children:"Client connects \u2192 Session created \u2192 Connections established\n                                  \u2193\nClient sends request \u2192 Use session's dedicated connections\n                                  \u2193\nClient disconnects \u2192 Session destroyed \u2192 Connections closed\n"})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Connection Setup Cost"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Redis"}),": ~1-2ms per connection setup (TCP + AUTH)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"NATS"}),": ~2-5ms per connection setup (TCP + TLS + AUTH)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"PostgreSQL"}),": ~5-10ms per connection setup (TCP + TLS + AUTH + query cache warm-up)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Kafka"}),": ~10-50ms per connection setup (TCP + SASL + metadata fetch)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Audit Trail"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "event": "session_created",\n  "session_id": "550e8400-e29b-41d4-a716-446655440000",\n  "client_id": "user@example.com",\n  "namespace": "tenant-a-prod",\n  "timestamp": "2025-10-13T22:45:00Z"\n}\n{\n  "event": "connection_established",\n  "session_id": "550e8400-e29b-41d4-a716-446655440000",\n  "backend": "redis",\n  "connection_id": "redis-conn-12345",\n  "timestamp": "2025-10-13T22:45:00.123Z"\n}\n{\n  "event": "session_destroyed",\n  "session_id": "550e8400-e29b-41d4-a716-446655440000",\n  "duration_ms": 45000,\n  "requests_handled": 120,\n  "timestamp": "2025-10-13T22:45:45Z"\n}\n'})}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Security Implications"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Maximum isolation"}),": No connection state shared between sessions"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Audit compliance"}),": Full connection lifecycle tracking"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Credential isolation"}),": Each session can use different backend credentials"]}),"\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"DoS risk"}),": Malicious client can exhaust connection pool by creating many sessions"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Performance Characteristics"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"Higher latency"}),": Connection setup cost on every session (5-50ms depending on backend)"]}),"\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"Lower throughput"}),": Cannot reuse connections, must establish fresh connections"]}),"\n",(0,t.jsxs)(e.li,{children:["\u26a0\ufe0f ",(0,t.jsx)(e.strong,{children:"Higher resource usage"}),": More total connections needed (no reuse)"]}),"\n",(0,t.jsxs)(e.li,{children:["\u2705 ",(0,t.jsx)(e.strong,{children:"Predictable latency"}),": No connection pool contention"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"comparison-matrix",children:"Comparison Matrix"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Aspect"}),(0,t.jsx)(e.th,{children:"Single Tenancy"}),(0,t.jsx)(e.th,{children:"Multi-Tenant"}),(0,t.jsx)(e.th,{children:"Isolation: None"}),(0,t.jsx)(e.th,{children:"Isolation: Namespace"}),(0,t.jsx)(e.th,{children:"Isolation: Session"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Resource Efficiency"})}),(0,t.jsx)(e.td,{children:"Low (dedicated infra)"}),(0,t.jsx)(e.td,{children:"High (shared)"}),(0,t.jsx)(e.td,{children:"Highest"}),(0,t.jsx)(e.td,{children:"Medium"}),(0,t.jsx)(e.td,{children:"Lower"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Noisy Neighbor Risk"})}),(0,t.jsx)(e.td,{children:"None"}),(0,t.jsx)(e.td,{children:"Medium-High"}),(0,t.jsx)(e.td,{children:"High"}),(0,t.jsx)(e.td,{children:"Low"}),(0,t.jsx)(e.td,{children:"Very Low"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Cost per Tenant"})}),(0,t.jsx)(e.td,{children:"$1000-10000/month"}),(0,t.jsx)(e.td,{children:"$1-100/month"}),(0,t.jsx)(e.td,{children:"Lowest"}),(0,t.jsx)(e.td,{children:"Medium"}),(0,t.jsx)(e.td,{children:"Higher"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Compliance"})}),(0,t.jsx)(e.td,{children:"Easiest (physical isolation)"}),(0,t.jsx)(e.td,{children:"Harder (logical isolation)"}),(0,t.jsx)(e.td,{children:"Not suitable"}),(0,t.jsx)(e.td,{children:"GDPR, SOC2"}),(0,t.jsx)(e.td,{children:"HIPAA, PCI-DSS"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Scalability"})}),(0,t.jsx)(e.td,{children:"10-100 tenants"}),(0,t.jsx)(e.td,{children:"1000-100000 tenants"}),(0,t.jsx)(e.td,{children:"Unlimited (within proxy capacity)"}),(0,t.jsx)(e.td,{children:"100-1000 namespaces"}),(0,t.jsx)(e.td,{children:"100-1000 concurrent sessions"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Performance"})}),(0,t.jsx)(e.td,{children:"Highest (no contention)"}),(0,t.jsx)(e.td,{children:"Good (with limits)"}),(0,t.jsx)(e.td,{children:"Highest (connection reuse)"}),(0,t.jsx)(e.td,{children:"Good"}),(0,t.jsx)(e.td,{children:"Lower (setup cost)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Setup Latency"})}),(0,t.jsx)(e.td,{children:"N/A (pre-provisioned)"}),(0,t.jsx)(e.td,{children:"Instant (shared pool)"}),(0,t.jsx)(e.td,{children:"~1ms"}),(0,t.jsx)(e.td,{children:"~1ms"}),(0,t.jsx)(e.td,{children:"5-50ms"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Operational Complexity"})}),(0,t.jsx)(e.td,{children:"High (many deployments)"}),(0,t.jsx)(e.td,{children:"Medium (single control plane)"}),(0,t.jsx)(e.td,{children:"Lowest"}),(0,t.jsx)(e.td,{children:"Medium (pool management)"}),(0,t.jsx)(e.td,{children:"Higher (session tracking)"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:(0,t.jsx)(e.strong,{children:"Blast Radius"})}),(0,t.jsx)(e.td,{children:"One tenant only"}),(0,t.jsx)(e.td,{children:"All tenants in pool"}),(0,t.jsx)(e.td,{children:"All tenants"}),(0,t.jsx)(e.td,{children:"One namespace"}),(0,t.jsx)(e.td,{children:"One session"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"decision-framework",children:"Decision Framework"}),"\n",(0,t.jsxs)(e.h3,{id:"choose-single-tenancy-if",children:["Choose ",(0,t.jsx)(e.strong,{children:"Single Tenancy"})," if:"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Regulatory compliance requires physical isolation (HIPAA, FedRAMP, PCI-DSS Level 1)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Customer pays >$10K/month and demands dedicated resources"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Throughput requirements exceed 10K RPS per tenant"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Independent upgrade cycles are required"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Maximum performance is critical (trading cost for speed)"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"choose-multi-tenant-if",children:["Choose ",(0,t.jsx)(e.strong,{children:"Multi-Tenant"})," if:"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Serving 100+ customers on SaaS platform"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Cost optimization is priority (shared infrastructure is 10-100x cheaper)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Rapid tenant onboarding is needed (minutes, not days)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Centralized management is preferred"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Noisy neighbor risk is acceptable with proper limits"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"choose-hybrid-if",children:["Choose ",(0,t.jsx)(e.strong,{children:"Hybrid"})," if:"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," You have both enterprise and standard tier customers"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Some customers need dedicated resources, others don't"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," You want migration path from multi-tenant to single-tenant"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Different SLAs for different customer tiers"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"choose-isolation-none-if",children:["Choose ",(0,t.jsx)(e.strong,{children:"Isolation: None"})," if:"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Development/staging environment only"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0}),' All "tenants" are internal teams (trusted)']}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Absolute maximum performance is required"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," No compliance requirements"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"choose-isolation-namespace-if",children:["Choose ",(0,t.jsx)(e.strong,{children:"Isolation: Namespace"})," if:"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Production multi-tenant SaaS"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Noisy neighbor mitigation is required"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Compliance requires logical separation (GDPR, SOC2)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Resource guarantees needed per tenant"]}),"\n"]}),"\n",(0,t.jsxs)(e.h3,{id:"choose-isolation-session-if",children:["Choose ",(0,t.jsx)(e.strong,{children:"Isolation: Session"})," if:"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Compliance mandates connection-level isolation (PCI-DSS, HIPAA)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Audit requirements need per-session connection tracking"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Premium customers pay for guaranteed dedicated connections"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Sessions are short-lived (<5 minutes)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Connection setup cost (5-50ms) is acceptable"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"configuration-examples",children:"Configuration Examples"}),"\n",(0,t.jsx)(e.h3,{id:"example-1-saas-startup-multi-tenant--namespace-isolation",children:"Example 1: SaaS Startup (Multi-Tenant + Namespace Isolation)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'deployment:\n  model: multi_tenant\n  control_plane: prism-bridge\n\nproxy:\n  replicas: 5\n  isolation_level: namespace\n\n  connection_pools:\n    per_namespace: true\n    redis:\n      connections_per_namespace: 10\n      max_total_connections: 500\n\n  resource_limits:\n    per_namespace:\n      cpu: "0.5"\n      memory: "1Gi"\n      max_rps: 500\n\nbackends:\n  redis:\n    endpoint: "redis-cluster.svc:6379"\n    isolation:\n      type: keyspace_prefix\n      format: "tenant:{tenant_id}:{key}"\n\nobservability:\n  tenant_label: "prism_tenant_id"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"example-2-enterprise-healthcare-single-tenant--session-isolation",children:"Example 2: Enterprise Healthcare (Single Tenant + Session Isolation)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'deployment:\n  model: single_tenant\n  tenant_id: healthcare-customer-a\n\nproxy:\n  replicas: 10\n  isolation_level: session\n\n  session_management:\n    connection_reuse: false\n    max_sessions: 5000\n    session_timeout: 300s\n\n  audit:\n    log_connection_lifecycle: true\n    log_session_lifecycle: true\n    audit_backend: s3://audit-logs/healthcare-a/\n\nbackends:\n  postgres:\n    endpoint: "postgres.healthcare-a.internal:5432"\n    ssl_mode: require\n    client_cert_auth: true\n\ncompliance:\n  frameworks: ["HIPAA", "SOC2"]\n  pii_encryption: true\n  audit_retention_days: 2555  # 7 years\n'})}),"\n",(0,t.jsx)(e.h3,{id:"example-3-hybrid-platform-mix-of-enterprise-and-standard",children:"Example 3: Hybrid Platform (Mix of Enterprise and Standard)"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'deployment:\n  model: hybrid\n\ntenant_routing:\n  rules:\n    - match:\n        tier: enterprise\n        contracts: ["healthcare-a", "finance-b"]\n      action:\n        deployment: single_tenant\n        isolation_level: session\n\n    - match:\n        tier: premium\n        annual_revenue: ">10000"\n      action:\n        deployment: multi_tenant\n        pool: premium\n        isolation_level: namespace\n        connection_pools:\n          redis:\n            connections_per_namespace: 20\n\n    - match:\n        tier: standard\n      action:\n        deployment: multi_tenant\n        pool: standard\n        isolation_level: namespace\n        connection_pools:\n          redis:\n            connections_per_namespace: 5\n'})}),"\n",(0,t.jsx)(e.h2,{id:"implementation-roadmap",children:"Implementation Roadmap"}),"\n",(0,t.jsx)(e.h3,{id:"phase-1-multi-tenant-with-namespace-isolation-poc",children:"Phase 1: Multi-Tenant with Namespace Isolation (POC)"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Timeline"}),": 4-6 weeks"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement namespace-aware connection pooling"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add per-namespace resource accounting"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement prism-bridge basic routing"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add namespace-based authentication (mTLS, JWT)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement Redis keyspace prefix isolation"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement NATS subject hierarchy isolation"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add per-namespace metrics and logging"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"phase-2-session-isolation-and-audit",children:"Phase 2: Session Isolation and Audit"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Timeline"}),": 3-4 weeks"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement session lifecycle management"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add connection-level audit logging"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement connection setup/teardown per session"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add session timeout and cleanup"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement audit trail export (S3, CloudWatch Logs)"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"phase-3-single-tenant-deployment-automation",children:"Phase 3: Single-Tenant Deployment Automation"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Timeline"}),": 4-6 weeks"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Create Terraform modules for single-tenant deployment"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add Kubernetes Helm charts with namespace-per-tenant pattern"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement tenant-specific observability stacks"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add automated backup/restore per tenant"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Create cost tracking per tenant"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"phase-4-prism-bridge-advanced-features",children:"Phase 4: prism-bridge Advanced Features"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Timeline"}),": 6-8 weeks"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement load balancer integration (HAProxy, nginx, Envoy)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add service mesh integration (Istio, Linkerd)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement dynamic pool scaling based on load"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add tenant migration tools (move tenant between pools)"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement advanced routing (geo, latency-based, weighted)"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"phase-5-compliance-and-security-hardening",children:"Phase 5: Compliance and Security Hardening"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Timeline"}),": 4-6 weeks"]}),"\n",(0,t.jsxs)(e.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," HIPAA compliance validation and documentation"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," PCI-DSS compliance validation"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," SOC2 audit preparation"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement field-level encryption for PII"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Add credential rotation automation"]}),"\n",(0,t.jsxs)(e.li,{className:"task-list-item",children:[(0,t.jsx)(e.input,{type:"checkbox",disabled:!0})," Implement anomaly detection for tenant behavior"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,t.jsx)(e.h3,{id:"authentication-and-authorization",children:"Authentication and Authorization"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Namespace Authentication"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Every request must include authenticated namespace identity"}),"\n",(0,t.jsx)(e.li,{children:"mTLS (client certificates) or JWT tokens"}),"\n",(0,t.jsx)(e.li,{children:"API keys for less sensitive environments"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Backend Authorization"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Proxy enforces namespace-to-backend access control"}),"\n",(0,t.jsx)(e.li,{children:"Row-level security (PostgreSQL)"}),"\n",(0,t.jsx)(e.li,{children:"Keyspace prefixes (Redis)"}),"\n",(0,t.jsx)(e.li,{children:"Subject hierarchies (NATS)"}),"\n",(0,t.jsx)(e.li,{children:"Topic ACLs (Kafka)"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"data-isolation",children:"Data Isolation"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"At-Rest Encryption"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"All backend data encrypted (backend responsibility)"}),"\n",(0,t.jsx)(e.li,{children:"Separate encryption keys per tenant (single-tenant)"}),"\n",(0,t.jsx)(e.li,{children:"Key rotation automation"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"In-Transit Encryption"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"TLS for all client \u2192 proxy connections"}),"\n",(0,t.jsx)(e.li,{children:"TLS for all proxy \u2192 backend connections"}),"\n",(0,t.jsx)(e.li,{children:"Certificate validation and pinning"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Cross-Tenant Protection"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Mandatory namespace prefix validation"}),"\n",(0,t.jsx)(e.li,{children:"SQL injection protection (parameterized queries)"}),"\n",(0,t.jsx)(e.li,{children:"Subject/topic ACL enforcement"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h3,{id:"audit-and-compliance",children:"Audit and Compliance"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Audit Logging"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-json",children:'{\n  "timestamp": "2025-10-13T22:45:00Z",\n  "tenant_id": "healthcare-a",\n  "namespace": "healthcare-a-prod",\n  "session_id": "550e8400-e29b-41d4-a716-446655440000",\n  "user_id": "doctor@hospital.com",\n  "action": "query",\n  "resource": "patient_records",\n  "result": "success",\n  "rows_accessed": 5,\n  "pii_accessed": true\n}\n'})}),"\n"]}),"\n",(0,t.jsxs)(e.li,{children:["\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Compliance Reports"}),":"]}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"HIPAA audit trail (7-year retention)"}),"\n",(0,t.jsx)(e.li,{children:"GDPR data access logs (right to know)"}),"\n",(0,t.jsx)(e.li,{children:"SOC2 access control reports"}),"\n",(0,t.jsx)(e.li,{children:"PCI-DSS data flow diagrams"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"operational-considerations",children:"Operational Considerations"}),"\n",(0,t.jsx)(e.h3,{id:"monitoring",children:"Monitoring"}),"\n",(0,t.jsx)(e.p,{children:"Per-tenant metrics to track:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-promql",children:'# Request rate per tenant\nrate(prism_requests_total{tenant_id="tenant-a"}[5m])\n\n# Error rate per tenant\nrate(prism_errors_total{tenant_id="tenant-a"}[5m]) / rate(prism_requests_total{tenant_id="tenant-a"}[5m])\n\n# Latency percentiles per tenant\nhistogram_quantile(0.99, prism_request_duration_seconds{tenant_id="tenant-a"})\n\n# Connection pool usage per tenant\nprism_connection_pool_active{tenant_id="tenant-a", backend="redis"}\nprism_connection_pool_max{tenant_id="tenant-a", backend="redis"}\n\n# Resource usage per namespace\nprism_namespace_cpu_usage{namespace="tenant-a-prod"}\nprism_namespace_memory_usage{namespace="tenant-a-prod"}\n'})}),"\n",(0,t.jsx)(e.h3,{id:"alerting",children:"Alerting"}),"\n",(0,t.jsx)(e.p,{children:"Critical alerts:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'alerts:\n  - name: TenantConnectionPoolExhausted\n    condition: prism_connection_pool_active / prism_connection_pool_max > 0.9\n    severity: warning\n    message: "Tenant {{$labels.tenant_id}} using >90% of connection pool"\n\n  - name: TenantHighErrorRate\n    condition: rate(prism_errors_total[5m]) / rate(prism_requests_total[5m]) > 0.05\n    severity: critical\n    message: "Tenant {{$labels.tenant_id}} error rate >5%"\n\n  - name: TenantHighLatency\n    condition: histogram_quantile(0.99, prism_request_duration_seconds) > 1.0\n    severity: warning\n    message: "Tenant {{$labels.tenant_id}} p99 latency >1s"\n'})}),"\n",(0,t.jsx)(e.h3,{id:"capacity-planning",children:"Capacity Planning"}),"\n",(0,t.jsx)(e.p,{children:"Resource scaling guidelines:"}),"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",(0,t.jsxs)(e.table,{children:[(0,t.jsx)(e.thead,{children:(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.th,{children:"Tenant Count"}),(0,t.jsx)(e.th,{children:"Proxy Replicas"}),(0,t.jsx)(e.th,{children:"Total Connections"}),(0,t.jsx)(e.th,{children:"Memory per Proxy"}),(0,t.jsx)(e.th,{children:"CPU per Proxy"})]})}),(0,t.jsxs)(e.tbody,{children:[(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"10"}),(0,t.jsx)(e.td,{children:"2"}),(0,t.jsx)(e.td,{children:"200"}),(0,t.jsx)(e.td,{children:"4GB"}),(0,t.jsx)(e.td,{children:"2 cores"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"50"}),(0,t.jsx)(e.td,{children:"5"}),(0,t.jsx)(e.td,{children:"500"}),(0,t.jsx)(e.td,{children:"4GB"}),(0,t.jsx)(e.td,{children:"2 cores"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"100"}),(0,t.jsx)(e.td,{children:"10"}),(0,t.jsx)(e.td,{children:"1000"}),(0,t.jsx)(e.td,{children:"4GB"}),(0,t.jsx)(e.td,{children:"2 cores"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"500"}),(0,t.jsx)(e.td,{children:"20"}),(0,t.jsx)(e.td,{children:"2000"}),(0,t.jsx)(e.td,{children:"8GB"}),(0,t.jsx)(e.td,{children:"4 cores"})]}),(0,t.jsxs)(e.tr,{children:[(0,t.jsx)(e.td,{children:"1000"}),(0,t.jsx)(e.td,{children:"40"}),(0,t.jsx)(e.td,{children:"4000"}),(0,t.jsx)(e.td,{children:"8GB"}),(0,t.jsx)(e.td,{children:"4 cores"})]})]})]}),"\n",(0,t.jsx)(e.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,t.jsx)(e.p,{children:"Prism's flexible tenancy and isolation model allows organizations to choose the right balance between cost, performance, security, and operational complexity. Key takeaways:"}),"\n",(0,t.jsxs)(e.ol,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Single-tenant"})," for enterprise customers with regulatory requirements or >10K RPS"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Multi-tenant"})," for SaaS platforms serving hundreds/thousands of customers"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Namespace isolation"})," for production multi-tenant deployments (standard choice)"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Session isolation"})," only when compliance mandates connection-level isolation"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"No isolation"})," only for development/trusted environments"]}),"\n"]}),"\n",(0,t.jsxs)(e.p,{children:["The recommended starting point for most SaaS platforms is ",(0,t.jsx)(e.strong,{children:"multi-tenant with namespace isolation"}),", as it provides good balance of cost efficiency, noisy neighbor protection, and operational simplicity. Upgrade to single-tenant or session isolation only when specific requirements dictate."]}),"\n",(0,t.jsx)(e.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"ADR-042: Multi-Tenancy Architecture"}),"\n",(0,t.jsx)(e.li,{children:"ADR-043: Namespace-Based Access Control"}),"\n",(0,t.jsx)(e.li,{children:"RFC-025: prism-bridge Control Plane Design"}),"\n",(0,t.jsx)(e.li,{children:"RFC-026: Session Lifecycle Management"}),"\n",(0,t.jsx)(e.li,{children:"RFC-030: Schema Evolution and Pub/Sub Validation (Consumer Metadata)"}),"\n",(0,t.jsx)(e.li,{children:"MEMO-009: Topaz Local Authorizer Configuration (Authorization)"}),"\n",(0,t.jsx)(e.li,{children:"MEMO-016: Observability Lifecycle Implementation (Per-Tenant Metrics)"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}}}]);