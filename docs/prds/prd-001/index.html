<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-prds docs-version-current docs-doc-page docs-doc-id-prd-001" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">PRD-001: Prism Data Access Gateway | Prism</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jrepp.github.io/prism-data-layer/prds/prd-001"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-prds-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-prds-current"><meta data-rh="true" property="og:title" content="PRD-001: Prism Data Access Gateway | Prism"><meta data-rh="true" name="description" content="Executive Summary"><meta data-rh="true" property="og:description" content="Executive Summary"><link data-rh="true" rel="icon" href="/prism-data-layer/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jrepp.github.io/prism-data-layer/prds/prd-001"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/prds/prd-001" hreflang="en"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/prds/prd-001" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"PRD-001: Prism Data Access Gateway","item":"https://jrepp.github.io/prism-data-layer/prds/prd-001"}]}</script><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes">
<meta name="theme-color" content="#6366f1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="stylesheet" href="/prism-data-layer/assets/css/styles.73adf43b.css">
<script src="/prism-data-layer/assets/js/runtime~main.041dbe04.js" defer="defer"></script>
<script src="/prism-data-layer/assets/js/main.bd87c8c5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/prism-data-layer/"><div class="navbar__logo"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">Prism</b></a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/intro">Overview</a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/changelog">Change Log</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/prism-data-layer/adr">ADRs (Architecture Decision Records)</a></li><li><a class="dropdown__link" href="/prism-data-layer/rfc">RFCs (Request for Comments)</a></li><li><a class="dropdown__link" href="/prism-data-layer/memos">Memos (Technical Analysis)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/prism-data-layer/prds">PRDs (Product Requirements)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="buildInfo_asc2"><span class="version_ADrX" title="Build: 942459b">942459b</span><span class="separator_VfCt">•</span><span class="buildTime_n1Nn" title="Last updated: Oct 16, 7:58 AM PDT">Oct 16, 7:58 AM PDT</span></div><div class="navbar__item"><a href="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml" target="_blank" rel="noopener noreferrer" title="GitHub Pages" style="display: flex; align-items: center; padding: 0 0.5rem;"><img src="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml/badge.svg" alt="Build" style="margin: 0;"></a></div><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/prds/"><span title="Overview" class="linkLabel_WmDU">Overview</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/prism-data-layer/prds/prd-001"><span title="PRD-001: Prism Data Access Gateway" class="linkLabel_WmDU">PRD-001: Prism Data Access Gateway</span></a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/prism-data-layer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">PRD-001: Prism Data Access Gateway</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="docMetadata_NQcq"><div class="tagsRow_ipDH"><span class="tag_VbXK">prd</span><span class="tag_VbXK">product</span><span class="tag_VbXK">vision</span><span class="tag_VbXK">requirements</span><span class="tag_VbXK">netflix</span></div><div class="metadataRow_PvZM"><span class="metadataItem_RMFE"><strong>Author:</strong> <!-- -->Platform Team</span><span class="metadataItem_RMFE"><strong>Created:</strong> <!-- -->Oct 11, 2025</span><span class="metadataItem_RMFE"><strong>Updated:</strong> <!-- -->Oct 11, 2025</span></div></div><div class="theme-doc-markdown markdown"><header><h1>PRD-001: Prism Data Access Gateway</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive Summary<a href="#executive-summary" class="hash-link" aria-label="Direct link to Executive Summary" title="Direct link to Executive Summary" translate="no">​</a></h2>
<p><strong>Prism</strong> is a high-performance data access gateway that provides unified APIs for heterogeneous backend datastores, enabling application developers to focus on business logic while the platform handles data access complexity, migrations, and operational concerns.</p>
<p><strong>Inspired by Netflix&#x27;s Data Gateway</strong>, Prism adopts proven patterns from Netflix&#x27;s 8M+ QPS, 3,500+ use-case platform while improving performance (10-100x via Rust), developer experience (client-originated configuration), and operational simplicity (local-first testing, flexible deployment).</p>
<p><strong>Target Launch</strong>: Q2 2026 (Phase 1: POCs completed Q1 2026)</p>
<p><strong>Success Metric</strong>: 80% of internal microservices use Prism for data access within 12 months of GA</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="product-vision">Product Vision<a href="#product-vision" class="hash-link" aria-label="Direct link to Product Vision" title="Direct link to Product Vision" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-problem-data-access-complexity-at-scale">The Problem: Data Access Complexity at Scale<a href="#the-problem-data-access-complexity-at-scale" class="hash-link" aria-label="Direct link to The Problem: Data Access Complexity at Scale" title="Direct link to The Problem: Data Access Complexity at Scale" translate="no">​</a></h3>
<p>Modern microservices architectures face growing data access challenges:</p>
<ol>
<li><strong>API Fragmentation</strong>: Each datastore (Redis, Postgres, Kafka, DynamoDB) has unique APIs, client libraries, and operational requirements</li>
<li><strong>Migration Complexity</strong>: Changing backends requires rewriting application code, extensive testing, and risky deployments</li>
<li><strong>Distributed Systems Knowledge Gap</strong>: Most application developers shouldn&#x27;t need expertise in consistency models, partitioning, replication, and distributed transactions</li>
<li><strong>Operational Burden</strong>: Each backend requires separate monitoring, capacity planning, security configuration, and disaster recovery</li>
<li><strong>Pattern Reimplementation</strong>: Common patterns (outbox, claim check, sagas) are reimplemented inconsistently across teams</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="the-solution-unified-data-access-layer">The Solution: Unified Data Access Layer<a href="#the-solution-unified-data-access-layer" class="hash-link" aria-label="Direct link to The Solution: Unified Data Access Layer" title="Direct link to The Solution: Unified Data Access Layer" translate="no">​</a></h3>
<p>Prism provides <strong>abstraction without compromise</strong>:</p>
<ul>
<li><strong>Unified APIs</strong>: Single set of gRPC/HTTP APIs for KeyValue, PubSub, Queue, TimeSeries, Graph, and Document access patterns</li>
<li><strong>Backend Agnostic</strong>: Application code unchanged when switching from Redis to DynamoDB, or Kafka to NATS</li>
<li><strong>Semantic Guarantees</strong>: Patterns like Multicast Registry coordinate multiple backends atomically</li>
<li><strong>High Performance</strong>: Rust-based proxy achieves sub-millisecond p99 latency even at 100K+ RPS</li>
<li><strong>Zero-Downtime Migrations</strong>: Shadow traffic and dual-write patterns enable gradual backend changes</li>
<li><strong>Operational Simplicity</strong>: Centralized monitoring, security, and capacity management</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="strategic-goals">Strategic Goals<a href="#strategic-goals" class="hash-link" aria-label="Direct link to Strategic Goals" title="Direct link to Strategic Goals" translate="no">​</a></h3>
<ol>
<li><strong>Accelerate Development</strong>: Reduce time-to-production for new services by 50% (eliminate backend integration work)</li>
<li><strong>Enable Migrations</strong>: Support 3+ major backend migrations per year with zero application code changes</li>
<li><strong>Reduce Operational Cost</strong>: Consolidate backend expertise, reduce redundant tooling, optimize resource utilization</li>
<li><strong>Improve Reliability</strong>: Provide battle-tested patterns, circuit breaking, load shedding, and failover built-in</li>
<li><strong>Foster Innovation</strong>: Allow teams to experiment with new backends without rewriting applications</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="market-context">Market Context<a href="#market-context" class="hash-link" aria-label="Direct link to Market Context" title="Direct link to Market Context" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="netflix-data-gateway-learnings">Netflix Data Gateway Learnings<a href="#netflix-data-gateway-learnings" class="hash-link" aria-label="Direct link to Netflix Data Gateway Learnings" title="Direct link to Netflix Data Gateway Learnings" translate="no">​</a></h3>
<p>Netflix&#x27;s Data Gateway serves as our primary inspiration:</p>
<p><strong>Scale Achievements</strong>:</p>
<ul>
<li>8M+ queries per second (key-value abstraction)</li>
<li>10M+ writes per second (time-series data)</li>
<li>3,500+ use cases across the organization</li>
<li>Petabyte-scale storage with low-latency retrieval</li>
</ul>
<p><strong>Key Lessons Adopted</strong> (<a href="/prism-data-layer/netflix/">Netflix Index</a>):</p>





























<table><thead><tr><th>Netflix Lesson</th><th>Prism Implementation</th></tr></thead><tbody><tr><td><strong>Abstraction Simplifies Scale</strong></td><td>Layer 1: Primitives (KeyValue, PubSub, Queue, TimeSeries, Graph, Document)</td></tr><tr><td><strong>Prioritize Reliability</strong></td><td>Circuit breaking, load shedding, failover built-in (ADR-029)</td></tr><tr><td><strong>Data Management Critical</strong></td><td>TTL, lifecycle policies, tiering strategies first-class (RFC-014)</td></tr><tr><td><strong>Sharding for Isolation</strong></td><td>Namespace-based isolation, per-tenant deployments (ADR-034)</td></tr><tr><td><strong>Zero-Downtime Migrations</strong></td><td>Shadow traffic, dual-write patterns, phased cutover (ADR-031)</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prisms-improvements-over-netflix">Prism&#x27;s Improvements Over Netflix<a href="#prisms-improvements-over-netflix" class="hash-link" aria-label="Direct link to Prism&#x27;s Improvements Over Netflix" title="Direct link to Prism&#x27;s Improvements Over Netflix" translate="no">​</a></h3>









































<table><thead><tr><th>Aspect</th><th>Netflix Approach</th><th>Prism Enhancement</th><th>Benefit</th></tr></thead><tbody><tr><td><strong>Proxy Layer</strong></td><td>JVM-based gateway</td><td><strong>Rust-based</strong> (Tokio + Tonic)</td><td>10-100x performance, lower resource usage</td></tr><tr><td><strong>Configuration</strong></td><td>Runtime deployment configs</td><td><strong>Client-originated</strong> (apps declare needs)</td><td>Self-service, reduced ops toil</td></tr><tr><td><strong>Testing</strong></td><td>Production-validated</td><td><strong>Local-first</strong> (sqlite, testcontainers)</td><td>Fast feedback, deterministic tests</td></tr><tr><td><strong>Deployment</strong></td><td>Kubernetes-native</td><td><strong>Flexible</strong> (bare metal, VMs, containers)</td><td>Simpler operations, lower cost</td></tr><tr><td><strong>Documentation</strong></td><td>Internal wiki</td><td><strong>Documentation-first</strong> (ADRs, RFCs, micro-CMS)</td><td>Faster onboarding, knowledge preservation</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="user-personas">User Personas<a href="#user-personas" class="hash-link" aria-label="Direct link to User Personas" title="Direct link to User Personas" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="primary-application-developer-backend-engineer">Primary: Application Developer (Backend Engineer)<a href="#primary-application-developer-backend-engineer" class="hash-link" aria-label="Direct link to Primary: Application Developer (Backend Engineer)" title="Direct link to Primary: Application Developer (Backend Engineer)" translate="no">​</a></h3>
<p><strong>Profile</strong>: Mid-level engineer building microservices, 2-5 years experience, proficient in one language (Go, Python, Rust, Java)</p>
<p><strong>Goals</strong>:</p>
<ul>
<li>Build features quickly without learning distributed systems internals</li>
<li>Use familiar patterns (REST APIs, pub/sub messaging) without backend-specific knowledge</li>
<li>Deploy code confidently without breaking production</li>
<li>Understand system behavior when things go wrong</li>
</ul>
<p><strong>Pain Points</strong>:</p>
<ul>
<li>Overwhelmed by backend options (Redis, Postgres, Kafka, DynamoDB, Cassandra...)</li>
<li>Spending weeks integrating with each new datastore</li>
<li>Fear of making wrong architectural decisions early</li>
<li>Debugging distributed systems issues without proper training</li>
</ul>
<p><strong>Prism Value</strong>:</p>
<ul>
<li>✅ Single API for all data access (learn once, use everywhere)</li>
<li>✅ Start with MemStore (in-memory), migrate to Redis/Postgres later without code changes</li>
<li>✅ Pattern library provides proven solutions (Multicast Registry, Saga, Event Sourcing)</li>
<li>✅ Rich error messages and observability built-in</li>
</ul>
<p><strong>Success Metric</strong>: Time from &quot;new service&quot; to &quot;production&quot; &lt; 1 week</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="secondary-platform-engineer-infrastructure-team">Secondary: Platform Engineer (Infrastructure Team)<a href="#secondary-platform-engineer-infrastructure-team" class="hash-link" aria-label="Direct link to Secondary: Platform Engineer (Infrastructure Team)" title="Direct link to Secondary: Platform Engineer (Infrastructure Team)" translate="no">​</a></h3>
<p><strong>Profile</strong>: Senior engineer responsible for platform services, 5-10 years experience, deep distributed systems knowledge</p>
<p><strong>Goals</strong>:</p>
<ul>
<li>Provide self-service capabilities to application teams</li>
<li>Maintain platform stability (high availability, low latency)</li>
<li>Manage cost and capacity efficiently</li>
<li>Enable safe migrations and experiments</li>
</ul>
<p><strong>Pain Points</strong>:</p>
<ul>
<li>Supporting N different datastores with N different operational models</li>
<li>Manual work for every new namespace or backend instance</li>
<li>Risk of cascading failures from misbehaving applications</li>
<li>Difficult to enforce best practices (circuit breaking, retries, timeouts)</li>
</ul>
<p><strong>Prism Value</strong>:</p>
<ul>
<li>✅ Centralized observability and operational controls</li>
<li>✅ Policy enforcement (rate limiting, access control, data governance)</li>
<li>✅ Self-service namespace creation via declarative config</li>
<li>✅ Backend substitutability (migrate Redis → DynamoDB transparently)</li>
</ul>
<p><strong>Success Metric</strong>: Operational incidents reduced by 50%, MTTR &lt; 15 minutes</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tertiary-data-engineer--analyst">Tertiary: Data Engineer / Analyst<a href="#tertiary-data-engineer--analyst" class="hash-link" aria-label="Direct link to Tertiary: Data Engineer / Analyst" title="Direct link to Tertiary: Data Engineer / Analyst" translate="no">​</a></h3>
<p><strong>Profile</strong>: Specialist working with analytics, ML pipelines, or data warehousing</p>
<p><strong>Goals</strong>:</p>
<ul>
<li>Access production data for analytics safely</li>
<li>Build ETL pipelines without impacting production services</li>
<li>Integrate with existing analytics tools (Spark, Airflow, Snowflake)</li>
</ul>
<p><strong>Pain Points</strong>:</p>
<ul>
<li>Direct database access risks impacting production</li>
<li>Inconsistent data formats across microservices</li>
<li>Difficult to maintain data lineage and quality</li>
</ul>
<p><strong>Prism Value</strong>:</p>
<ul>
<li>✅ Read-only replicas and Change Data Capture (CDC) support</li>
<li>✅ TimeSeries abstraction for metrics and event logs</li>
<li>✅ Graph abstraction for relationship queries</li>
<li>✅ Audit trails and data provenance built-in</li>
</ul>
<p><strong>Success Metric</strong>: Analytics queries don&#x27;t impact production latency</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-features">Core Features<a href="#core-features" class="hash-link" aria-label="Direct link to Core Features" title="Direct link to Core Features" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-1-layered-api-architecture">Feature 1: Layered API Architecture<a href="#feature-1-layered-api-architecture" class="hash-link" aria-label="Direct link to Feature 1: Layered API Architecture" title="Direct link to Feature 1: Layered API Architecture" translate="no">​</a></h3>
<p><strong>Layer 1: Primitives (Always Available)</strong></p>
<p>Six foundational abstractions that compose to solve 80% of use cases:</p>















































<table><thead><tr><th>Primitive</th><th>Purpose</th><th>Backend Examples</th><th>RFC Reference</th></tr></thead><tbody><tr><td><strong>KeyValue</strong></td><td>Simple storage</td><td>Redis, DynamoDB, etcd, Postgres, MemStore</td><td><a href="/prism-data-layer/rfc/rfc-014">RFC-014</a></td></tr><tr><td><strong>PubSub</strong></td><td>Fire-and-forget messaging</td><td>NATS, Redis, Kafka (as topic)</td><td><a href="/prism-data-layer/rfc/rfc-014">RFC-014</a></td></tr><tr><td><strong>Queue</strong></td><td>Work distribution</td><td>SQS, Postgres, RabbitMQ</td><td><a href="/prism-data-layer/rfc/rfc-014">RFC-014</a></td></tr><tr><td><strong>Stream</strong></td><td>Ordered event log</td><td>Kafka, NATS JetStream, Redis Streams</td><td><a href="/prism-data-layer/rfc/rfc-014">RFC-014</a></td></tr><tr><td><strong>TimeSeries</strong></td><td>Temporal data</td><td>ClickHouse, TimescaleDB, Prometheus</td><td><a href="/prism-data-layer/rfc/rfc-014">RFC-014</a></td></tr><tr><td><strong>Graph</strong></td><td>Relationships</td><td>Neptune, Neo4j, Postgres (recursive CTEs)</td><td><a href="/prism-data-layer/rfc/rfc-014">RFC-014</a></td></tr></tbody></table>
<p><strong>Example Usage</strong> (Primitives):</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> prism </span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">client </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> Client</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">endpoint</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;localhost:8080&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># KeyValue: Simple storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keyvalue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;user:123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> user_data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ttl</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">3600</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">user </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keyvalue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;user:123&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># PubSub: Broadcast events</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pubsub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;user-events&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> event_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> event </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pubsub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;user-events&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    process</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Queue: Background jobs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">enqueue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;email-jobs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> email_task</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">task </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">queue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">dequeue</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;email-jobs&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> visibility_timeout</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">30</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Layer 2: Patterns (Use-Case-Specific, Opt-In)</strong></p>
<p>Purpose-built patterns that coordinate multiple backends for common use cases:</p>









































<table><thead><tr><th>Pattern</th><th>Solves</th><th>Composes</th><th>RFC Reference</th></tr></thead><tbody><tr><td><strong>Multicast Registry</strong></td><td>Device management, presence, service discovery</td><td>KeyValue + PubSub + Queue</td><td><a href="/prism-data-layer/rfc/rfc-017">RFC-017</a></td></tr><tr><td><strong>Saga</strong></td><td>Distributed transactions</td><td>KeyValue + Queue + Compensation</td><td>Planned Q2 2026</td></tr><tr><td><strong>Event Sourcing</strong></td><td>Audit trails, event replay</td><td>Stream + KeyValue + Snapshots</td><td>Planned Q2 2026</td></tr><tr><td><strong>Cache Aside</strong></td><td>Read-through caching</td><td>KeyValue (cache) + KeyValue (db)</td><td>Planned Q3 2026</td></tr><tr><td><strong>Outbox</strong></td><td>Transactional messaging</td><td>KeyValue (tx) + Queue + WAL</td><td>Planned Q3 2026</td></tr></tbody></table>
<p><strong>Example Usage</strong> (Patterns):</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Multicast Registry: IoT device management</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">registry </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">multicast_registry</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;iot-devices&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Register device with metadata</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identity</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;device-sensor-001&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;temperature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;building-a&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;floor&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Enumerate matching devices</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">filter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;building-a&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Multicast command to filtered subset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">multicast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">filter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;temperature&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;floor&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;command&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;read&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sample_rate&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">print</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;Delivered to </span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">success_count</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">/</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">result</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">.</span><span class="token string-interpolation interpolation">total_count</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c"> devices&quot;</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Why Layered?</strong> (<a href="/prism-data-layer/memos/memo-005">MEMO-005</a>)</p>
<ul>
<li><strong>Layer 1</strong> for power users who need full control and novel compositions</li>
<li><strong>Layer 2</strong> for most developers who want ergonomic, self-documenting APIs</li>
<li><strong>Choice</strong> based on team expertise and use case requirements</li>
</ul>
<p><strong>User Persona Mapping</strong>:</p>
<ul>
<li>Application Developers: Primarily Layer 2 (80% of use cases)</li>
<li>Platform Engineers: Both layers (Layer 1 for infrastructure, Layer 2 for application teams)</li>
<li>Advanced Users: Layer 1 for custom patterns</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-2-backend-plugin-architecture">Feature 2: Backend Plugin Architecture<a href="#feature-2-backend-plugin-architecture" class="hash-link" aria-label="Direct link to Feature 2: Backend Plugin Architecture" title="Direct link to Feature 2: Backend Plugin Architecture" translate="no">​</a></h3>
<p><strong>Goal</strong>: Support 10+ backends without bloating core proxy</p>
<p><strong>Architecture</strong> (<a href="/prism-data-layer/rfc/rfc-008">RFC-008</a>):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                 Prism Proxy (Rust Core)              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌────────────────────────────────────────────────┐  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  Layer 1 API: KeyValue, PubSub, Queue, etc.   │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └────────────────────────────────────────────────┘  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                        │                             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                        ↓ gRPC                        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌────────────────────────────────────────────────┐  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  Namespace Router (config-driven)              │  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └────────────────────────────────────────────────┘  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ┌────────────┼────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ↓            ↓            ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ┌─────────┐  ┌─────────┐  ┌─────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │ Redis   │  │ Postgres│  │ Kafka   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │ Plugin  │  │ Plugin  │  │ Plugin  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │ (Go)    │  │ (Go)    │  │ (Go)    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └─────────┘  └─────────┘  └─────────┘</span><br></span></code></pre></div></div>
<p><strong>Backend Interface Decomposition</strong> (<a href="/prism-data-layer/memos/memo-006">MEMO-006</a>):</p>
<p>Instead of monolithic &quot;Redis backend&quot;, each backend advertises thin interfaces:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Redis implements 24 interfaces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">implements</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> keyvalue_basic        </span><span class="token comment" style="color:#999988;font-style:italic"># Set, Get, Delete, Exists</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> keyvalue_scan         </span><span class="token comment" style="color:#999988;font-style:italic"># Scan, ScanKeys, Count</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> keyvalue_ttl          </span><span class="token comment" style="color:#999988;font-style:italic"># Expire, GetTTL, Persist</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> keyvalue_transactional </span><span class="token comment" style="color:#999988;font-style:italic"># MULTI/EXEC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> keyvalue_batch        </span><span class="token comment" style="color:#999988;font-style:italic"># MGET, MSET</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pubsub_basic          </span><span class="token comment" style="color:#999988;font-style:italic"># Publish, Subscribe</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> pubsub_wildcards      </span><span class="token comment" style="color:#999988;font-style:italic"># Pattern matching</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stream_basic          </span><span class="token comment" style="color:#999988;font-style:italic"># XADD, XREAD</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stream_consumer_groups </span><span class="token comment" style="color:#999988;font-style:italic"># XGROUP, XREADGROUP</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> stream_replay         </span><span class="token comment" style="color:#999988;font-style:italic"># XREAD from offset</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># ...and 14 more (Lists, Sets, SortedSets)</span><br></span></code></pre></div></div>
<p><strong>Pattern Slot Matching</strong>:</p>
<p>Patterns declare required interfaces for each slot, proxy validates at config time:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> multicast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">slots</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">required</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">keyvalue_basic</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> keyvalue_scan</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">keyvalue_ttl</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">recommended</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">redis</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> postgres</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> dynamodb</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> etcd</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">messaging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">required</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">pubsub_basic</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">optional</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">pubsub_persistent</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">recommended</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">nats</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> kafka</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> redis</span><span class="token punctuation" style="color:#393A34">]</span><br></span></code></pre></div></div>
<p><strong>Backend Priority</strong> (<a href="/prism-data-layer/memos/memo-004">MEMO-004</a>):</p>
<p>Phase 1 (Internal Priorities):
0. <strong>MemStore</strong> (In-memory Go map) - Score: 100/100 - Zero dependencies, instant startup</p>
<ol>
<li><strong>Kafka</strong> - Score: 78/100 - Internal event streaming</li>
<li><strong>NATS</strong> - Score: 90/100 - Internal pub/sub messaging</li>
<li><strong>PostgreSQL</strong> - Score: 93/100 - Internal relational data</li>
<li><strong>Neptune</strong> - Score: 50/100 - Internal graph data</li>
</ol>
<p>Phase 2 (External/Supporting):
5. <strong>Redis</strong> - Score: 95/100 - General caching
6. <strong>SQLite</strong> - Score: 92/100 - Embedded testing
7. <strong>S3/MinIO</strong> - Score: 85/100 - Large payload handling
8. <strong>ClickHouse</strong> - Score: 70/100 - Analytics</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-3-client-originated-configuration">Feature 3: Client-Originated Configuration<a href="#feature-3-client-originated-configuration" class="hash-link" aria-label="Direct link to Feature 3: Client-Originated Configuration" title="Direct link to Feature 3: Client-Originated Configuration" translate="no">​</a></h3>
<p><strong>Problem</strong>: Traditional approaches require ops teams to provision infrastructure before developers can code.</p>
<p><strong>Prism Approach</strong>: Application declares requirements, platform provisions automatically.</p>
<p><strong>Configuration Format</strong>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Application: prism.yaml (committed to app repo)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">sessions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> keyvalue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">latency</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> p99 &lt; 10ms</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">throughput</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 50K rps</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">ttl</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">persistence</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> optional  </span><span class="token comment" style="color:#999988;font-style:italic"># Can survive restarts</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis       </span><span class="token comment" style="color:#999988;font-style:italic"># Explicit choice</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># OR</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">auto</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Platform selects best match</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> notification</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> queue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">visibility_timeout</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 30s</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">dead_letter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean important" style="color:#36acaa">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">throughput</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10K enqueues/sec</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres    </span><span class="token comment" style="color:#999988;font-style:italic"># Using Postgres as queue (SKIP LOCKED pattern)</span><br></span></code></pre></div></div>
<p><strong>Platform Workflow</strong>:</p>
<ol>
<li><strong>Deploy</strong>: Application pushes config to Prism control plane</li>
<li><strong>Validate</strong>: Proxy validates requirements are satisfiable</li>
<li><strong>Provision</strong>: Backends auto-provisioned (or mapped to existing)</li>
<li><strong>Observe</strong>: Namespace metrics tracked, capacity adjusted automatically</li>
</ol>
<p><strong>Benefits</strong>:</p>
<ul>
<li>✅ Self-service (no ops ticket required)</li>
<li>✅ Version controlled (infrastructure as code in app repo)</li>
<li>✅ Testable (use MemStore in dev, Redis in production)</li>
<li>✅ Evolvable (add <code>needs</code> fields without breaking changes)</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-4-local-first-testing-strategy">Feature 4: Local-First Testing Strategy<a href="#feature-4-local-first-testing-strategy" class="hash-link" aria-label="Direct link to Feature 4: Local-First Testing Strategy" title="Direct link to Feature 4: Local-First Testing Strategy" translate="no">​</a></h3>
<p><strong>Goal</strong>: Developers run full Prism stack on laptop with zero cloud dependencies.</p>
<p><strong>Architecture</strong> (<a href="/prism-data-layer/adr/adr-004">ADR-004</a>):</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Development workflow</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> dev-up    </span><span class="token comment" style="color:#999988;font-style:italic"># Start Prism proxy + MemStore (in-process, instant)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> </span><span class="token builtin class-name">test</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Run tests against local MemStore</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> dev-down  </span><span class="token comment" style="color:#999988;font-style:italic"># Stop everything</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Integration testing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> integration-up    </span><span class="token comment" style="color:#999988;font-style:italic"># Start testcontainers (Redis, Postgres, NATS, Kafka)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> integration-test  </span><span class="token comment" style="color:#999988;font-style:italic"># Run full test suite against real backends</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">make</span><span class="token plain"> integration-down  </span><span class="token comment" style="color:#999988;font-style:italic"># Cleanup</span><br></span></code></pre></div></div>
<p><strong>Test Pyramid</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">       ┌────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       │  E2E Tests     │  Kubernetes, full stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       │  (10 tests)    │  Runtime: 5 minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       └────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ┌──────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │ Integration Tests│  Testcontainers (Redis, Postgres)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      │  (100 tests)     │  Runtime: 2 minutes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      └──────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   ┌──────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   │   Unit Tests          │  MemStore (in-memory, no containers)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   │   (1000 tests)        │  Runtime: 10 seconds</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   └──────────────────────┘</span><br></span></code></pre></div></div>
<p><strong>Backend Substitutability</strong>:</p>
<p>Same test suite runs against multiple backends:</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Interface-based acceptance tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">backendDrivers </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain">BackendSetup</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;MemStore&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Setup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> setupMemStore</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SupportsTTL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Redis&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Setup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> setupRedis</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SupportsTTL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Postgres&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> Setup</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> setupPostgres</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> SupportsTTL</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> backend </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">range</span><span class="token plain"> backendDrivers </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    t</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Run</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">backend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Name</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">testing</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">T</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        driver</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> cleanup </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> backend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">cleanup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// Same test code for all backends</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">testKeyValueBasicOperations</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> driver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> backend</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">SupportsTTL </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">testKeyValueTTL</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">t</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> driver</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Developer Experience</strong>:</p>
<ul>
<li>✅ Unit tests run in &lt;10 seconds (MemStore is instant)</li>
<li>✅ Integration tests run in &lt;2 minutes (testcontainers)</li>
<li>✅ CI/CD fails fast (no waiting for cloud resources)</li>
<li>✅ Deterministic (no flaky tests from network/cloud issues)</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-5-zero-downtime-migrations">Feature 5: Zero-Downtime Migrations<a href="#feature-5-zero-downtime-migrations" class="hash-link" aria-label="Direct link to Feature 5: Zero-Downtime Migrations" title="Direct link to Feature 5: Zero-Downtime Migrations" translate="no">​</a></h3>
<p><strong>Goal</strong>: Change backends without application code changes or service interruptions.</p>
<p><strong>Migration Patterns</strong> (<a href="/prism-data-layer/adr/adr-031">ADR-031</a>):</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-1-dual-write-postgres--dynamodb-example">Pattern 1: Dual-Write (Postgres → DynamoDB example)<a href="#pattern-1-dual-write-postgres--dynamodb-example" class="hash-link" aria-label="Direct link to Pattern 1: Dual-Write (Postgres → DynamoDB example)" title="Direct link to Pattern 1: Dual-Write (Postgres → DynamoDB example)" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Phase 1: Dual-write to both backends</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">migration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dual</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">primary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres      </span><span class="token comment" style="color:#999988;font-style:italic"># Reads from here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">shadow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dynamodb       </span><span class="token comment" style="color:#999988;font-style:italic"># Writes to both, reads for comparison</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Phase 2: Switch primary (traffic cutover)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">migration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dual</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">write</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">primary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dynamodb      </span><span class="token comment" style="color:#999988;font-style:italic"># Reads from here</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">shadow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> postgres       </span><span class="token comment" style="color:#999988;font-style:italic"># Still writing to both</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Phase 3: Complete migration (remove shadow)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> user</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">profiles</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dynamodb</span><br></span></code></pre></div></div>
<p><strong>Observability During Migration</strong>:</p>
<ul>
<li>Consistency diff percentage (shadow reads vs primary reads)</li>
<li>Latency comparison (primary vs shadow)</li>
<li>Error rates per backend</li>
<li>Data completeness metrics</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-2-shadow-traffic-kafka--nats-example">Pattern 2: Shadow Traffic (Kafka → NATS example)<a href="#pattern-2-shadow-traffic-kafka--nats-example" class="hash-link" aria-label="Direct link to Pattern 2: Shadow Traffic (Kafka → NATS example)" title="Direct link to Pattern 2: Shadow Traffic (Kafka → NATS example)" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Phase 1: Shadow traffic to new backend</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">migration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> shadow</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">primary</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> kafka       </span><span class="token comment" style="color:#999988;font-style:italic"># All production traffic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">shadow</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nats         </span><span class="token comment" style="color:#999988;font-style:italic"># Copy of traffic (metrics only)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Observe: Validate NATS can handle load, latency acceptable</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Phase 2: Percentage cutover</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">migration</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">strategy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> percentage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">backends</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">nats</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 10%      </span><span class="token comment" style="color:#999988;font-style:italic"># 10% of traffic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">kafka</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 90%</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Phase 3: Full cutover</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">namespace</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> events</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nats</span><br></span></code></pre></div></div>
<p><strong>Safety Guarantees</strong>:</p>
<ul>
<li>✅ Automatic rollback on error rate spike</li>
<li>✅ Circuit breaker prevents cascading failures</li>
<li>✅ Data consistency validation before full cutover</li>
<li>✅ Application code unchanged throughout migration</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-6-documentation-first-development">Feature 6: Documentation-First Development<a href="#feature-6-documentation-first-development" class="hash-link" aria-label="Direct link to Feature 6: Documentation-First Development" title="Direct link to Feature 6: Documentation-First Development" translate="no">​</a></h3>
<p><strong>Goal</strong>: Design before implementation, preserve decisions permanently.</p>
<p><strong>Workflow</strong> (<a href="/prism-data-layer/memos/memo-003">MEMO-003</a>):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 1. Design Phase: Write RFC/ADR with diagrams        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Mermaid sequence diagrams for flows             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Code examples that compile                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Trade-offs explicitly documented                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    Duration: 1-2 days                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 2. Review Phase: Team feedback on design            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Async review via GitHub PR                      │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Live preview with Docusaurus (instant feedback) │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Iterate on design (not code)                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    Duration: 2-3 days                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 3. Implementation Phase: Code follows design        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - RFC is the spec (not implementation detail)     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Tests match documented examples                 │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Zero design rework                              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    Duration: 5-7 days                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└────────────────────────  ──────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│ 4. Validation Phase: Verify code matches docs       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Link PRs to RFCs                                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Update docs if implementation diverged          │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│    - Maintain living documentation                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────────────────────┘</span><br></span></code></pre></div></div>
<p><strong>Documentation Types</strong>:</p>

























<table><thead><tr><th>Type</th><th>Purpose</th><th>Example</th></tr></thead><tbody><tr><td><strong>ADR</strong> (Architecture Decision Record)</td><td>Why we made significant architectural choices</td><td><a href="/prism-data-layer/adr/adr-001">ADR-001: Rust for Proxy</a></td></tr><tr><td><strong>RFC</strong> (Request for Comments)</td><td>Complete technical specification for features</td><td><a href="/prism-data-layer/rfc/rfc-010">RFC-010: Admin Protocol</a></td></tr><tr><td><strong>MEMO</strong></td><td>Analysis, reviews, process improvements</td><td><a href="/prism-data-layer/memos/memo-004">MEMO-004: Backend Implementation Guide</a></td></tr></tbody></table>
<p><strong>Micro-CMS Advantage</strong>:</p>
<p>Prism uses Docusaurus + GitHub Pages as a &quot;micro-CMS&quot;:</p>
<ul>
<li>✅ Rendered Mermaid diagrams (understand flows instantly)</li>
<li>✅ Syntax-highlighted code examples (copy-paste ready)</li>
<li>✅ Full-text search (find answers in seconds)</li>
<li>✅ Cross-referenced knowledge graph (ADRs ↔ RFCs ↔ MEMOs)</li>
<li>✅ Live preview (see changes in &lt;1 second)</li>
<li>✅ Professional appearance (builds trust with stakeholders)</li>
</ul>
<p><strong>Impact</strong>:</p>
<ul>
<li>Design flaws caught before implementation (cost: 1 hour to fix RFC vs 1 week to refactor code)</li>
<li>New team members productive in &lt;1 week (read docs, not code)</li>
<li>Decisions preserved permanently (no tribal knowledge loss)</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-requirements">Technical Requirements<a href="#technical-requirements" class="hash-link" aria-label="Direct link to Technical Requirements" title="Direct link to Technical Requirements" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-requirements">Performance Requirements<a href="#performance-requirements" class="hash-link" aria-label="Direct link to Performance Requirements" title="Direct link to Performance Requirements" translate="no">​</a></h3>













































<table><thead><tr><th>Metric</th><th>Target</th><th>Measurement Method</th></tr></thead><tbody><tr><td><strong>Latency (p50)</strong></td><td>&lt;1ms</td><td>End-to-end client → proxy → backend → client</td></tr><tr><td><strong>Latency (p99)</strong></td><td>&lt;10ms</td><td>Excludes backend latency (measure proxy overhead)</td></tr><tr><td><strong>Latency (p99.9)</strong></td><td>&lt;50ms</td><td>With load shedding and circuit breaking active</td></tr><tr><td><strong>Throughput</strong></td><td>100K+ RPS</td><td>Single proxy instance on 4-core VM</td></tr><tr><td><strong>Concurrency</strong></td><td>10K+ connections</td><td>Simultaneous client connections per proxy</td></tr><tr><td><strong>Memory</strong></td><td>&lt;500MB baseline</td><td>Proxy memory usage at idle</td></tr><tr><td><strong>CPU</strong></td><td>&lt;30% at 50K RPS</td><td>Proxy CPU usage under load</td></tr></tbody></table>
<p><strong>Rationale</strong>: Netflix&#x27;s Java-based gateway achieves 8M QPS across cluster. Prism targets 100K RPS per instance (10-100x more efficient) via Rust&#x27;s zero-cost abstractions and Tokio async runtime.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reliability-requirements">Reliability Requirements<a href="#reliability-requirements" class="hash-link" aria-label="Direct link to Reliability Requirements" title="Direct link to Reliability Requirements" translate="no">​</a></h3>








































<table><thead><tr><th>Requirement</th><th>Target</th><th>Implementation</th></tr></thead><tbody><tr><td><strong>Availability</strong></td><td>99.99% (52 min downtime/year)</td><td>Multi-region deployment, health checks, auto-restart</td></tr><tr><td><strong>Circuit Breaking</strong></td><td>Trip after 5 consecutive failures</td><td>Per-backend circuit breaker, 30s recovery window</td></tr><tr><td><strong>Load Shedding</strong></td><td>Shed requests at 90% capacity</td><td>Priority-based queuing, graceful degradation</td></tr><tr><td><strong>Failover</strong></td><td>&lt;5s to switch to replica</td><td>Automatic health-check-based failover</td></tr><tr><td><strong>Data Durability</strong></td><td>Zero message loss (Queue pattern)</td><td>At-least-once delivery, persistent queue backends</td></tr><tr><td><strong>Consistency</strong></td><td>Configurable (eventual → strong)</td><td>Per-namespace consistency level declaration</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-requirements">Security Requirements<a href="#security-requirements" class="hash-link" aria-label="Direct link to Security Requirements" title="Direct link to Security Requirements" translate="no">​</a></h3>








































<table><thead><tr><th>Requirement</th><th>Implementation</th><th>Reference</th></tr></thead><tbody><tr><td><strong>Authentication</strong></td><td>OIDC (OAuth2) for admin API, mTLS for data plane</td><td><a href="/prism-data-layer/rfc/rfc-010">RFC-010</a>, <a href="/prism-data-layer/adr/adr-046">ADR-046</a></td></tr><tr><td><strong>Authorization</strong></td><td>Namespace-based RBAC, OPA integration</td><td><a href="/prism-data-layer/rfc/rfc-011">RFC-011</a></td></tr><tr><td><strong>Encryption</strong></td><td>TLS 1.3 for all communication</td><td><a href="/prism-data-layer/adr/adr-047">ADR-047</a></td></tr><tr><td><strong>Audit Logging</strong></td><td>All data access logged with user context</td><td><a href="/prism-data-layer/rfc/rfc-010">RFC-010</a></td></tr><tr><td><strong>PII Handling</strong></td><td>Automatic encryption/masking via proto tags</td><td><a href="/prism-data-layer/adr/adr-003">ADR-003</a></td></tr><tr><td><strong>Secrets Management</strong></td><td>HashiCorp Vault integration</td><td>Planned Q2 2026</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="observability-requirements">Observability Requirements<a href="#observability-requirements" class="hash-link" aria-label="Direct link to Observability Requirements" title="Direct link to Observability Requirements" translate="no">​</a></h3>



































<table><thead><tr><th>Signal</th><th>Collection Method</th><th>Storage</th><th>Retention</th></tr></thead><tbody><tr><td><strong>Metrics</strong></td><td>OpenTelemetry (Prometheus format)</td><td>Local Signoz instance (dev), Prometheus (prod)</td><td>90 days</td></tr><tr><td><strong>Traces</strong></td><td>OpenTelemetry (OTLP)</td><td>Signoz (dev), Jaeger (prod)</td><td>30 days</td></tr><tr><td><strong>Logs</strong></td><td>Structured JSON (slog)</td><td>Signoz (dev), Loki (prod)</td><td>14 days</td></tr><tr><td><strong>Profiles</strong></td><td>pprof (Go plugins), perf (Rust proxy)</td><td>S3 (long-term)</td><td>7 days active</td></tr></tbody></table>
<p><strong>Key Metrics to Track</strong>:</p>
<ul>
<li>Request rate (RPS) per namespace</li>
<li>Latency histogram per namespace per backend</li>
<li>Error rate per namespace per backend</li>
<li>Backend health (up/down, latency, capacity)</li>
<li>Cache hit rate (if caching enabled)</li>
<li>Migration progress (dual-write consistency %)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scalability-requirements">Scalability Requirements<a href="#scalability-requirements" class="hash-link" aria-label="Direct link to Scalability Requirements" title="Direct link to Scalability Requirements" translate="no">​</a></h3>



































<table><thead><tr><th>Dimension</th><th>Target</th><th>Strategy</th></tr></thead><tbody><tr><td><strong>Namespaces</strong></td><td>1,000+ per proxy</td><td>Namespace isolation, lightweight routing</td></tr><tr><td><strong>Backends</strong></td><td>100+ unique backend instances</td><td>Plugin architecture, lazy loading</td></tr><tr><td><strong>Clients</strong></td><td>10,000+ concurrent clients</td><td>Connection pooling, multiplexing</td></tr><tr><td><strong>Message Size</strong></td><td>Up to 5GB (via Claim Check)</td><td>Automatic large payload handling</td></tr><tr><td><strong>Retention</strong></td><td>30+ days (streams, queues)</td><td>Backend-native retention policies</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="success-metrics">Success Metrics<a href="#success-metrics" class="hash-link" aria-label="Direct link to Success Metrics" title="Direct link to Success Metrics" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="product-adoption-primary-metric">Product Adoption (Primary Metric)<a href="#product-adoption-primary-metric" class="hash-link" aria-label="Direct link to Product Adoption (Primary Metric)" title="Direct link to Product Adoption (Primary Metric)" translate="no">​</a></h3>
<p><strong>Goal</strong>: 80% of internal microservices use Prism within 12 months of GA</p>
<p><strong>Measurement</strong>:</p>
<ul>
<li>Number of namespaces created</li>
<li>Number of unique applications using Prism</li>
<li>RPS through Prism vs direct backend access</li>
<li>% of new services that use Prism (target: 100%)</li>
</ul>
<p><strong>Milestone Targets</strong>:</p>
<ul>
<li>Month 3: 10 early adopters (friendly teams)</li>
<li>Month 6: 30% of internal services</li>
<li>Month 9: 60% of internal services</li>
<li>Month 12: 80% of internal services</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-productivity">Developer Productivity<a href="#developer-productivity" class="hash-link" aria-label="Direct link to Developer Productivity" title="Direct link to Developer Productivity" translate="no">​</a></h3>
<p><strong>Goal</strong>: 50% reduction in time-to-production for new services</p>





























<table><thead><tr><th>Metric</th><th>Before Prism</th><th>With Prism</th><th>Measurement</th></tr></thead><tbody><tr><td><strong>Time to Production</strong></td><td>4-6 weeks</td><td>1-2 weeks</td><td>Repo created → first production request</td></tr><tr><td><strong>Platform Tickets</strong></td><td>Baseline</td><td>50% reduction</td><td>Monthly support ticket volume</td></tr><tr><td><strong>Developer Satisfaction</strong></td><td>N/A</td><td>&gt;80% &quot;would recommend&quot;</td><td>Quarterly survey</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="operational-efficiency">Operational Efficiency<a href="#operational-efficiency" class="hash-link" aria-label="Direct link to Operational Efficiency" title="Direct link to Operational Efficiency" translate="no">​</a></h3>
<p><strong>Goal</strong>: Reduce data access incidents by 50%, MTTR &lt;15 minutes</p>





























<table><thead><tr><th>Metric</th><th>Baseline</th><th>Target (6 months)</th><th>Measurement</th></tr></thead><tbody><tr><td><strong>Incidents</strong></td><td>20/month</td><td>10/month</td><td>Data access-related incidents</td></tr><tr><td><strong>MTTR</strong></td><td>Variable</td><td>&lt;15 minutes</td><td>Mean time to resolution</td></tr><tr><td><strong>On-Call Pages</strong></td><td>Baseline</td><td>50% reduction</td><td>Backend-related pages</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="migration-velocity">Migration Velocity<a href="#migration-velocity" class="hash-link" aria-label="Direct link to Migration Velocity" title="Direct link to Migration Velocity" translate="no">​</a></h3>
<p><strong>Goal</strong>: Enable 3+ backend migrations/year with zero application code changes</p>





























<table><thead><tr><th>Phase</th><th>Timeline</th><th>Target</th><th>Measurement</th></tr></thead><tbody><tr><td><strong>Phase 1</strong></td><td>2026</td><td>1 migration</td><td>Redis → DynamoDB</td></tr><tr><td><strong>Phase 2</strong></td><td>2027+</td><td>3+ migrations/year</td><td>Successful cutover count</td></tr><tr><td><strong>Code Changes</strong></td><td>All phases</td><td>Zero</td><td>Lines of application code changed</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance">Performance<a href="#performance" class="hash-link" aria-label="Direct link to Performance" title="Direct link to Performance" translate="no">​</a></h3>
<p><strong>Goal</strong>: p99 latency &lt;10ms, 100K+ RPS per instance</p>
<p><strong>Measurement</strong>:</p>
<ul>
<li>Latency histogram (p50, p95, p99, p99.9)</li>
<li>Throughput (RPS) per instance</li>
<li>Resource utilization (CPU, memory)</li>
</ul>
<p><strong>Target</strong>:</p>
<ul>
<li>p99 latency: &lt;10ms (excluding backend latency)</li>
<li>Throughput: 100K RPS (4-core VM)</li>
<li>CPU: &lt;30% at 50K RPS</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="release-phases">Release Phases<a href="#release-phases" class="hash-link" aria-label="Direct link to Release Phases" title="Direct link to Release Phases" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-0-poc-validation-q4-2025---q1-2026--in-progress">Phase 0: POC Validation (Q4 2025 - Q1 2026) ✅ In Progress<a href="#phase-0-poc-validation-q4-2025---q1-2026--in-progress" class="hash-link" aria-label="Direct link to Phase 0: POC Validation (Q4 2025 - Q1 2026) ✅ In Progress" title="Direct link to Phase 0: POC Validation (Q4 2025 - Q1 2026) ✅ In Progress" translate="no">​</a></h3>
<p><strong>Goal</strong>: Prove core architecture with minimal scope</p>
<p><strong>Deliverables</strong>:</p>
<ul>
<li>POC 1: KeyValue pattern with MemStore (2 weeks) → <a href="/prism-data-layer/rfc/rfc-018">RFC-018</a></li>
<li>POC 2: KeyValue pattern with Redis (2 weeks)</li>
<li>POC 3: PubSub pattern with NATS (2 weeks)</li>
<li>POC 4: Multicast Registry pattern (3 weeks)</li>
<li>POC 5: Authentication (Admin Protocol with OIDC) (2 weeks)</li>
</ul>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>All POCs demonstrate end-to-end flow (client → proxy → backend)</li>
<li>Performance targets met (p99 &lt;10ms, 100K RPS)</li>
<li>Tests pass against multiple backends (MemStore, Redis, NATS)</li>
</ul>
<p><strong>Status</strong>: POCs 1-3 completed, POC 4-5 in progress</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-1-alpha-release-q2-2026">Phase 1: Alpha Release (Q2 2026)<a href="#phase-1-alpha-release-q2-2026" class="hash-link" aria-label="Direct link to Phase 1: Alpha Release (Q2 2026)" title="Direct link to Phase 1: Alpha Release (Q2 2026)" translate="no">​</a></h3>
<p><strong>Goal</strong>: Internal dogfooding with friendly teams</p>
<p><strong>Scope</strong>:</p>
<ul>
<li>✅ Layer 1 Primitives: KeyValue, PubSub, Queue</li>
<li>✅ Backends: MemStore, Redis, Postgres, NATS, Kafka</li>
<li>✅ Admin API: Namespace CRUD, health checks, metrics</li>
<li>✅ Client SDKs: Python, Go, Rust</li>
<li>❌ Layer 2 Patterns: Not included (only primitives)</li>
<li>❌ Migrations: Not supported yet</li>
</ul>
<p><strong>Target Users</strong>: 5-10 internal early adopter teams</p>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>10 namespaces in production</li>
<li>10K+ RPS sustained</li>
<li>Zero critical bugs for 2 consecutive weeks</li>
<li>Developer feedback: &quot;would recommend&quot; &gt;80%</li>
</ul>
<p><strong>Risk Mitigation</strong>:</p>
<ul>
<li>Feature flags for gradual rollout</li>
<li>Shadow traffic only (no primary traffic yet)</li>
<li>24/7 on-call support for early adopters</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-2-beta-release-q3-2026">Phase 2: Beta Release (Q3 2026)<a href="#phase-2-beta-release-q3-2026" class="hash-link" aria-label="Direct link to Phase 2: Beta Release (Q3 2026)" title="Direct link to Phase 2: Beta Release (Q3 2026)" translate="no">​</a></h3>
<p><strong>Goal</strong>: Production-ready for core use cases</p>
<p><strong>Scope</strong>:</p>
<ul>
<li>✅ All Phase 1 features</li>
<li>✅ Layer 2 Patterns: Multicast Registry, Cache Aside</li>
<li>✅ Migrations: Dual-write pattern</li>
<li>✅ Observability: Full OpenTelemetry integration</li>
<li>✅ Security: OIDC authentication, RBAC authorization</li>
<li>❌ Advanced patterns (Saga, Event Sourcing): Not yet</li>
</ul>
<p><strong>Target Users</strong>: 30% of internal services (~50 services)</p>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>100+ namespaces in production</li>
<li>500K+ RPS sustained</li>
<li>99.9% availability (month-over-month)</li>
<li>1 successful migration (Redis → DynamoDB)</li>
</ul>
<p><strong>Marketing</strong>:</p>
<ul>
<li>Internal tech talks (bi-weekly)</li>
<li>Comprehensive documentation site</li>
<li>Getting started guides and templates</li>
<li>Office hours (weekly)</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-3-ga-release-q4-2026">Phase 3: GA Release (Q4 2026)<a href="#phase-3-ga-release-q4-2026" class="hash-link" aria-label="Direct link to Phase 3: GA Release (Q4 2026)" title="Direct link to Phase 3: GA Release (Q4 2026)" translate="no">​</a></h3>
<p><strong>Goal</strong>: General availability for all internal teams</p>
<p><strong>Scope</strong>:</p>
<ul>
<li>✅ All Phase 2 features</li>
<li>✅ Layer 2 Patterns: Saga, Event Sourcing, Work Queue</li>
<li>✅ Backends: All planned backends (8 total)</li>
<li>✅ Advanced migrations: Shadow traffic, percentage cutover</li>
<li>✅ Self-service: Namespace creation via GitOps</li>
</ul>
<p><strong>Target Users</strong>: 80% of internal services (~200 services)</p>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>500+ namespaces in production</li>
<li>5M+ RPS sustained</li>
<li>99.99% availability (quarterly)</li>
<li>3 successful migrations</li>
</ul>
<p><strong>Support</strong>:</p>
<ul>
<li>SLA-backed support (8x5 initially, 24x7 by Q1 2027)</li>
<li>Dedicated Slack channel</li>
<li>Runbook for common issues</li>
<li>Incident response plan</li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-4-ecosystem-growth-2027">Phase 4: Ecosystem Growth (2027+)<a href="#phase-4-ecosystem-growth-2027" class="hash-link" aria-label="Direct link to Phase 4: Ecosystem Growth (2027+)" title="Direct link to Phase 4: Ecosystem Growth (2027+)" translate="no">​</a></h3>
<p><strong>Goal</strong>: Become the default data access layer</p>
<p><strong>Scope</strong>:</p>
<ul>
<li>✅ External backends: AWS (DynamoDB, S3, SQS), GCP (Datastore, Pub/Sub)</li>
<li>✅ Community patterns: 3rd-party contributed patterns</li>
<li>✅ Client SDKs: Java, TypeScript, C#</li>
<li>✅ Integrations: Kubernetes Operator, Terraform Provider, Helm Charts</li>
</ul>
<p><strong>Target Users</strong>: 100% of internal services + select external partners</p>
<p><strong>Success Criteria</strong>:</p>
<ul>
<li>1,000+ namespaces</li>
<li>10M+ RPS sustained</li>
<li>99.99% availability (SLA-backed)</li>
<li>5+ community-contributed backend plugins</li>
<li>10+ community-contributed patterns</li>
</ul>
<p><strong>Ecosystem</strong>:</p>
<ul>
<li>Open-source core proxy</li>
<li>Plugin marketplace</li>
<li>Pattern certification program</li>
<li>Annual user conference</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="risks-and-mitigations">Risks and Mitigations<a href="#risks-and-mitigations" class="hash-link" aria-label="Direct link to Risks and Mitigations" title="Direct link to Risks and Mitigations" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-1-adoption-resistance-high">Risk 1: Adoption Resistance (High)<a href="#risk-1-adoption-resistance-high" class="hash-link" aria-label="Direct link to Risk 1: Adoption Resistance (High)" title="Direct link to Risk 1: Adoption Resistance (High)" translate="no">​</a></h3>
<p><strong>Risk</strong>: Teams prefer using backends directly (fear of abstraction overhead)</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>✅ <strong>Prove performance</strong>: Publish benchmarks showing &lt;1ms overhead</li>
<li>✅ <strong>Early wins</strong>: Work with friendly teams, showcase success stories</li>
<li>✅ <strong>Incremental adoption</strong>: Allow hybrid (some namespaces via Prism, some direct)</li>
<li>✅ <strong>Developer experience</strong>: Make Prism easier than direct integration (generators, templates)</li>
</ul>
<p><strong>Ownership</strong>: Product Manager + Developer Relations</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-2-performance-bottleneck-medium">Risk 2: Performance Bottleneck (Medium)<a href="#risk-2-performance-bottleneck-medium" class="hash-link" aria-label="Direct link to Risk 2: Performance Bottleneck (Medium)" title="Direct link to Risk 2: Performance Bottleneck (Medium)" translate="no">​</a></h3>
<p><strong>Risk</strong>: Proxy becomes bottleneck at scale (CPU, memory, network)</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>✅ <strong>Rust performance</strong>: Leverage zero-cost abstractions, async runtime</li>
<li>✅ <strong>Benchmarking</strong>: Continuous performance regression testing</li>
<li>✅ <strong>Horizontal scaling</strong>: Stateless proxy, easy to scale out</li>
<li>✅ <strong>Bypass mode</strong>: Critical paths can bypass proxy if needed</li>
</ul>
<p><strong>Ownership</strong>: Performance Engineer + SRE</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-3-backend-specific-features-medium">Risk 3: Backend-Specific Features (Medium)<a href="#risk-3-backend-specific-features-medium" class="hash-link" aria-label="Direct link to Risk 3: Backend-Specific Features (Medium)" title="Direct link to Risk 3: Backend-Specific Features (Medium)" translate="no">​</a></h3>
<p><strong>Risk</strong>: Teams need backend-specific features not abstracted by Prism</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>✅ <strong>Layer 1 escape hatch</strong>: Low-level primitives allow direct control</li>
<li>✅ <strong>Backend-specific extensions</strong>: Optional proto extensions per backend</li>
<li>✅ <strong>Passthrough mode</strong>: Raw query mode for specialized cases</li>
<li>✅ <strong>Feedback loop</strong>: Prioritize frequently requested features</li>
</ul>
<p><strong>Ownership</strong>: Platform Engineer + Product Manager</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-4-migration-complexity-high">Risk 4: Migration Complexity (High)<a href="#risk-4-migration-complexity-high" class="hash-link" aria-label="Direct link to Risk 4: Migration Complexity (High)" title="Direct link to Risk 4: Migration Complexity (High)" translate="no">​</a></h3>
<p><strong>Risk</strong>: Dual-write and shadow traffic patterns introduce data consistency issues</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>✅ <strong>Consistency validation</strong>: Automated diff detection and alerting</li>
<li>✅ <strong>Rollback plan</strong>: Instant rollback on error rate spike</li>
<li>✅ <strong>Gradual rollout</strong>: Percentage cutover (1% → 10% → 50% → 100%)</li>
<li>✅ <strong>Dry-run mode</strong>: Test migration without impacting production</li>
</ul>
<p><strong>Ownership</strong>: SRE + Database Engineer</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-5-operational-complexity-medium">Risk 5: Operational Complexity (Medium)<a href="#risk-5-operational-complexity-medium" class="hash-link" aria-label="Direct link to Risk 5: Operational Complexity (Medium)" title="Direct link to Risk 5: Operational Complexity (Medium)" translate="no">​</a></h3>
<p><strong>Risk</strong>: Prism adds another component to debug, increasing operational burden</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>✅ <strong>Centralized observability</strong>: All signals (metrics, traces, logs) in one place</li>
<li>✅ <strong>Health checks</strong>: Automated detection and remediation</li>
<li>✅ <strong>Runbooks</strong>: Comprehensive troubleshooting guides</li>
<li>✅ <strong>Self-healing</strong>: Automatic restarts, circuit breaking, load shedding</li>
</ul>
<p><strong>Ownership</strong>: SRE + DevOps</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-questions">Open Questions<a href="#open-questions" class="hash-link" aria-label="Direct link to Open Questions" title="Direct link to Open Questions" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="question-1-should-layer-2-patterns-be-open-sourced">Question 1: Should Layer 2 Patterns Be Open-Sourced?<a href="#question-1-should-layer-2-patterns-be-open-sourced" class="hash-link" aria-label="Direct link to Question 1: Should Layer 2 Patterns Be Open-Sourced?" title="Direct link to Question 1: Should Layer 2 Patterns Be Open-Sourced?" translate="no">​</a></h3>
<p><strong>Context</strong>: Layer 1 (primitives) are generic and reusable. Layer 2 (patterns) may encode internal business logic.</p>
<p><strong>Options</strong>:</p>
<ul>
<li><strong>Option A</strong>: Open-source all patterns (maximum community value)</li>
<li><strong>Option B</strong>: Open-source generic patterns only (Multicast Registry, Saga), keep business-specific private</li>
<li><strong>Option C</strong>: All patterns internal initially, evaluate open-source later</li>
</ul>
<p><strong>Recommendation</strong>: Option B (selective open-source) - generic patterns have broad applicability, business-specific stay internal</p>
<p><strong>Decision Needed By</strong>: Q2 2026 (before Beta release)</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="question-2-what-is-the-pricing-model-if-external">Question 2: What is the Pricing Model (If External)?<a href="#question-2-what-is-the-pricing-model-if-external" class="hash-link" aria-label="Direct link to Question 2: What is the Pricing Model (If External)?" title="Direct link to Question 2: What is the Pricing Model (If External)?" translate="no">​</a></h3>
<p><strong>Context</strong>: If Prism is offered as managed service to external customers, what pricing model makes sense?</p>
<p><strong>Options</strong>:</p>
<ul>
<li><strong>Option A</strong>: RPS-based (per million requests)</li>
<li><strong>Option B</strong>: Namespace-based (per active namespace)</li>
<li><strong>Option C</strong>: Resource-based (CPU/memory allocation)</li>
<li><strong>Option D</strong>: Free tier + enterprise support</li>
</ul>
<p><strong>Recommendation</strong>: Start with internal-only (no pricing), evaluate external offering in 2027</p>
<p><strong>Decision Needed By</strong>: Q4 2026 (if external offering considered)</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="question-3-how-do-we-handle-schema-evolution">Question 3: How Do We Handle Schema Evolution?<a href="#question-3-how-do-we-handle-schema-evolution" class="hash-link" aria-label="Direct link to Question 3: How Do We Handle Schema Evolution?" title="Direct link to Question 3: How Do We Handle Schema Evolution?" translate="no">​</a></h3>
<p><strong>Context</strong>: Protobuf schemas will evolve (new fields, deprecated methods). How do we maintain compatibility?</p>
<p><strong>Options</strong>:</p>
<ul>
<li><strong>Option A</strong>: Strict versioning (v1, v2 incompatible)</li>
<li><strong>Option B</strong>: Backward-compatible only (always additive)</li>
<li><strong>Option C</strong>: API versioning per namespace (clients pin versions)</li>
</ul>
<p><strong>Recommendation</strong>: Option B + C hybrid (backward-compatible by default, namespaces can pin versions)</p>
<p><strong>Decision Needed By</strong>: Q1 2026 (before Alpha)</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix">Appendix<a href="#appendix" class="hash-link" aria-label="Direct link to Appendix" title="Direct link to Appendix" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="competitive-landscape">Competitive Landscape<a href="#competitive-landscape" class="hash-link" aria-label="Direct link to Competitive Landscape" title="Direct link to Competitive Landscape" translate="no">​</a></h3>















































<table><thead><tr><th>Product</th><th>Approach</th><th>Strengths</th><th>Weaknesses</th><th>Differentiation</th></tr></thead><tbody><tr><td><strong>Netflix Data Gateway</strong></td><td>JVM-based proxy</td><td>Battle-tested at scale</td><td>Proprietary, JVM overhead</td><td>Rust performance, local-first testing</td></tr><tr><td><strong>AWS AppSync</strong></td><td>Managed GraphQL</td><td>Serverless, fully managed</td><td>AWS-only, GraphQL-specific</td><td>Multi-cloud, gRPC/HTTP APIs</td></tr><tr><td><strong>Hasura</strong></td><td>GraphQL over Postgres</td><td>Instant GraphQL API</td><td>Postgres-only initially</td><td>Multi-backend, pattern library</td></tr><tr><td><strong>Kong / Envoy</strong></td><td>API Gateway</td><td>HTTP/gRPC proxy</td><td>No data abstraction</td><td>Data-aware patterns (not just routing)</td></tr><tr><td><strong>Direct SDK</strong></td><td>Client libraries</td><td>No additional hop</td><td>Tight coupling, hard to migrate</td><td>Loose coupling, easy migrations</td></tr></tbody></table>
<p><strong>Prism&#x27;s Unique Value</strong>:</p>
<ol>
<li><strong>Performance</strong>: Rust-based, 10-100x better than JVM alternatives</li>
<li><strong>Flexibility</strong>: Works with any backend (not locked to AWS/Postgres)</li>
<li><strong>Patterns</strong>: High-level abstractions (not just API gateway)</li>
<li><strong>Local-First</strong>: Full stack runs on laptop (not just cloud)</li>
</ol>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References" translate="no">​</a></h3>
<p><strong>Netflix Data Gateway</strong>:</p>
<ul>
<li><a href="/prism-data-layer/netflix/">Netflix Index</a> - Overview and key learnings</li>
<li><a href="/prism-data-layer/netflix/netflix-summary">Netflix Summary</a> - Lessons learned</li>
<li><a href="/prism-data-layer/netflix/netflix-abstractions">Netflix Abstractions</a> - Data models (KeyValue, TimeSeries, Counter, WAL)</li>
<li><a href="/prism-data-layer/netflix/netflix-key-use-cases">Netflix Key Use Cases</a> - Real-world applications</li>
</ul>
<p><strong>Prism Architecture</strong>:</p>
<ul>
<li><a href="/prism-data-layer/adr/adr-001">ADR-001: Rust for Proxy</a> - Why Rust over Go/Java</li>
<li><a href="/prism-data-layer/rfc/rfc-008">RFC-008: Proxy Plugin Architecture</a> - Backend plugin system</li>
<li><a href="/prism-data-layer/rfc/rfc-014">RFC-014: Layered Data Access Patterns</a> - Layer 1 primitives</li>
<li><a href="/prism-data-layer/rfc/rfc-017">RFC-017: Multicast Registry Pattern</a> - First Layer 2 pattern</li>
<li><a href="/prism-data-layer/rfc/rfc-018">RFC-018: POC Implementation Strategy</a> - Phased rollout plan</li>
</ul>
<p><strong>Design Philosophy</strong>:</p>
<ul>
<li><a href="/prism-data-layer/memos/memo-003">MEMO-003: Documentation-First Development</a> - Design before code</li>
<li><a href="/prism-data-layer/memos/memo-004">MEMO-004: Backend Plugin Implementation Guide</a> - Backend priorities</li>
<li><a href="/prism-data-layer/memos/memo-005">MEMO-005: Client Protocol Design Philosophy</a> - Layered API architecture</li>
<li><a href="/prism-data-layer/memos/memo-006">MEMO-006: Backend Interface Decomposition</a> - Schema registry</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="revision-history">Revision History<a href="#revision-history" class="hash-link" aria-label="Direct link to Revision History" title="Direct link to Revision History" translate="no">​</a></h2>
<ul>
<li><strong>2025-10-12</strong>: Initial PRD based on Netflix learnings and Prism architecture memos</li>
<li><strong>Future</strong>: Updates as product evolves</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="approvals">Approvals<a href="#approvals" class="hash-link" aria-label="Direct link to Approvals" title="Direct link to Approvals" translate="no">​</a></h2>
<p><strong>Product Owner</strong>: [Name] - Approved [Date]</p>
<p><strong>Engineering Lead</strong>: [Name] - Approved [Date]</p>
<p><strong>Architecture Review</strong>: [Name] - Approved [Date]</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/prds/tags/prd">prd</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/prds/tags/product">product</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/prds/tags/vision">vision</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/prds/tags/requirements">requirements</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/prds/tags/netflix">netflix</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jrepp/prism-data-layer/tree/main/docs-cms/../docs-cms/prds/prd-001-prism-data-access-gateway.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/prism-data-layer/prds/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#executive-summary" class="table-of-contents__link toc-highlight">Executive Summary</a></li><li><a href="#product-vision" class="table-of-contents__link toc-highlight">Product Vision</a><ul><li><a href="#the-problem-data-access-complexity-at-scale" class="table-of-contents__link toc-highlight">The Problem: Data Access Complexity at Scale</a></li><li><a href="#the-solution-unified-data-access-layer" class="table-of-contents__link toc-highlight">The Solution: Unified Data Access Layer</a></li><li><a href="#strategic-goals" class="table-of-contents__link toc-highlight">Strategic Goals</a></li></ul></li><li><a href="#market-context" class="table-of-contents__link toc-highlight">Market Context</a><ul><li><a href="#netflix-data-gateway-learnings" class="table-of-contents__link toc-highlight">Netflix Data Gateway Learnings</a></li><li><a href="#prisms-improvements-over-netflix" class="table-of-contents__link toc-highlight">Prism&#39;s Improvements Over Netflix</a></li></ul></li><li><a href="#user-personas" class="table-of-contents__link toc-highlight">User Personas</a><ul><li><a href="#primary-application-developer-backend-engineer" class="table-of-contents__link toc-highlight">Primary: Application Developer (Backend Engineer)</a></li><li><a href="#secondary-platform-engineer-infrastructure-team" class="table-of-contents__link toc-highlight">Secondary: Platform Engineer (Infrastructure Team)</a></li><li><a href="#tertiary-data-engineer--analyst" class="table-of-contents__link toc-highlight">Tertiary: Data Engineer / Analyst</a></li></ul></li><li><a href="#core-features" class="table-of-contents__link toc-highlight">Core Features</a><ul><li><a href="#feature-1-layered-api-architecture" class="table-of-contents__link toc-highlight">Feature 1: Layered API Architecture</a></li><li><a href="#feature-2-backend-plugin-architecture" class="table-of-contents__link toc-highlight">Feature 2: Backend Plugin Architecture</a></li><li><a href="#feature-3-client-originated-configuration" class="table-of-contents__link toc-highlight">Feature 3: Client-Originated Configuration</a></li><li><a href="#feature-4-local-first-testing-strategy" class="table-of-contents__link toc-highlight">Feature 4: Local-First Testing Strategy</a></li><li><a href="#feature-5-zero-downtime-migrations" class="table-of-contents__link toc-highlight">Feature 5: Zero-Downtime Migrations</a></li><li><a href="#feature-6-documentation-first-development" class="table-of-contents__link toc-highlight">Feature 6: Documentation-First Development</a></li></ul></li><li><a href="#technical-requirements" class="table-of-contents__link toc-highlight">Technical Requirements</a><ul><li><a href="#performance-requirements" class="table-of-contents__link toc-highlight">Performance Requirements</a></li><li><a href="#reliability-requirements" class="table-of-contents__link toc-highlight">Reliability Requirements</a></li><li><a href="#security-requirements" class="table-of-contents__link toc-highlight">Security Requirements</a></li><li><a href="#observability-requirements" class="table-of-contents__link toc-highlight">Observability Requirements</a></li><li><a href="#scalability-requirements" class="table-of-contents__link toc-highlight">Scalability Requirements</a></li></ul></li><li><a href="#success-metrics" class="table-of-contents__link toc-highlight">Success Metrics</a><ul><li><a href="#product-adoption-primary-metric" class="table-of-contents__link toc-highlight">Product Adoption (Primary Metric)</a></li><li><a href="#developer-productivity" class="table-of-contents__link toc-highlight">Developer Productivity</a></li><li><a href="#operational-efficiency" class="table-of-contents__link toc-highlight">Operational Efficiency</a></li><li><a href="#migration-velocity" class="table-of-contents__link toc-highlight">Migration Velocity</a></li><li><a href="#performance" class="table-of-contents__link toc-highlight">Performance</a></li></ul></li><li><a href="#release-phases" class="table-of-contents__link toc-highlight">Release Phases</a><ul><li><a href="#phase-0-poc-validation-q4-2025---q1-2026--in-progress" class="table-of-contents__link toc-highlight">Phase 0: POC Validation (Q4 2025 - Q1 2026) ✅ In Progress</a></li><li><a href="#phase-1-alpha-release-q2-2026" class="table-of-contents__link toc-highlight">Phase 1: Alpha Release (Q2 2026)</a></li><li><a href="#phase-2-beta-release-q3-2026" class="table-of-contents__link toc-highlight">Phase 2: Beta Release (Q3 2026)</a></li><li><a href="#phase-3-ga-release-q4-2026" class="table-of-contents__link toc-highlight">Phase 3: GA Release (Q4 2026)</a></li><li><a href="#phase-4-ecosystem-growth-2027" class="table-of-contents__link toc-highlight">Phase 4: Ecosystem Growth (2027+)</a></li></ul></li><li><a href="#risks-and-mitigations" class="table-of-contents__link toc-highlight">Risks and Mitigations</a><ul><li><a href="#risk-1-adoption-resistance-high" class="table-of-contents__link toc-highlight">Risk 1: Adoption Resistance (High)</a></li><li><a href="#risk-2-performance-bottleneck-medium" class="table-of-contents__link toc-highlight">Risk 2: Performance Bottleneck (Medium)</a></li><li><a href="#risk-3-backend-specific-features-medium" class="table-of-contents__link toc-highlight">Risk 3: Backend-Specific Features (Medium)</a></li><li><a href="#risk-4-migration-complexity-high" class="table-of-contents__link toc-highlight">Risk 4: Migration Complexity (High)</a></li><li><a href="#risk-5-operational-complexity-medium" class="table-of-contents__link toc-highlight">Risk 5: Operational Complexity (Medium)</a></li></ul></li><li><a href="#open-questions" class="table-of-contents__link toc-highlight">Open Questions</a><ul><li><a href="#question-1-should-layer-2-patterns-be-open-sourced" class="table-of-contents__link toc-highlight">Question 1: Should Layer 2 Patterns Be Open-Sourced?</a></li><li><a href="#question-2-what-is-the-pricing-model-if-external" class="table-of-contents__link toc-highlight">Question 2: What is the Pricing Model (If External)?</a></li><li><a href="#question-3-how-do-we-handle-schema-evolution" class="table-of-contents__link toc-highlight">Question 3: How Do We Handle Schema Evolution?</a></li></ul></li><li><a href="#appendix" class="table-of-contents__link toc-highlight">Appendix</a><ul><li><a href="#competitive-landscape" class="table-of-contents__link toc-highlight">Competitive Landscape</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a></li></ul></li><li><a href="#revision-history" class="table-of-contents__link toc-highlight">Revision History</a></li><li><a href="#approvals" class="table-of-contents__link toc-highlight">Approvals</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/intro">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/changelog">Change Log</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/adr">ADRs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/rfc">RFCs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/memos">Memos</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/prds">PRDs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Copyright © 2025 Prism. Built with Docusaurus.</div><div style="margin-top:0.5rem;font-size:0.875rem;opacity:0.8"><span>Version <!-- -->942459b6</span><span> • </span><span>Built <!-- -->Oct 16, 2025, 07:58 AM PDT</span><span> • </span><span>Commit <!-- -->942459b</span></div></div></div></div></footer></div>
</body>
</html>