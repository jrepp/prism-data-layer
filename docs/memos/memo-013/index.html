<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-memos docs-version-current docs-doc-page docs-doc-id-memo-013" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">POC 1 Infrastructure Analysis - SDK and Load Testing | Prism</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jrepp.github.io/prism-data-layer/memos/memo-013"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-memos-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-memos-current"><meta data-rh="true" property="og:title" content="POC 1 Infrastructure Analysis - SDK and Load Testing | Prism"><meta data-rh="true" name="description" content="Executive Summary"><meta data-rh="true" property="og:description" content="Executive Summary"><link data-rh="true" rel="icon" href="/prism-data-layer/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jrepp.github.io/prism-data-layer/memos/memo-013"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/memos/memo-013" hreflang="en"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/memos/memo-013" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"POC 1 Infrastructure Analysis - SDK and Load Testing • MEMO-013","item":"https://jrepp.github.io/prism-data-layer/memos/memo-013"}]}</script><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes">
<meta name="theme-color" content="#6366f1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="stylesheet" href="/prism-data-layer/assets/css/styles.73adf43b.css">
<script src="/prism-data-layer/assets/js/runtime~main.858dc4b9.js" defer="defer"></script>
<script src="/prism-data-layer/assets/js/main.77721349.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/prism-data-layer/"><div class="navbar__logo"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">Prism</b></a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/intro">Overview</a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/changelog">Change Log</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/prism-data-layer/adr">ADRs (Architecture Decision Records)</a></li><li><a class="dropdown__link" href="/prism-data-layer/rfc">RFCs (Request for Comments)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/prism-data-layer/memos">Memos (Technical Analysis)</a></li><li><a class="dropdown__link" href="/prism-data-layer/prds">PRDs (Product Requirements)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="buildInfo_asc2"><span class="version_ADrX" title="Build: 6f1f779">6f1f779</span><span class="separator_VfCt">•</span><span class="buildTime_n1Nn" title="Last updated: Oct 15, 2:30 PM PDT">Oct 15, 2:30 PM PDT</span></div><div class="navbar__item"><a href="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml" target="_blank" rel="noopener noreferrer" title="GitHub Pages" style="display: flex; align-items: center; padding: 0 0.5rem;"><img src="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml/badge.svg" alt="Build" style="margin: 0;"></a></div><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/"><span title="Technical Memos" class="linkLabel_WmDU">Technical Memos</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/prism-data-layer/memos/memo-001"><span title="MEMO-001 to 010" class="categoryLinkLabel_W154">MEMO-001 to 010</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/prism-data-layer/memos/memo-011"><span title="MEMO-011 to 020" class="categoryLinkLabel_W154">MEMO-011 to 020</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-011"><span title="Distributed Error Handling Best Practices • MEMO-011" class="linkLabel_WmDU">Distributed Error Handling Best Practices • MEMO-011</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-012"><span title="Developer Experience and Common Workflows • MEMO-012" class="linkLabel_WmDU">Developer Experience and Common Workflows • MEMO-012</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/prism-data-layer/memos/memo-013"><span title="POC 1 Infrastructure Analysis - SDK and Load Testing • MEMO-013" class="linkLabel_WmDU">POC 1 Infrastructure Analysis - SDK and Load Testing • MEMO-013</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-014"><span title="Pattern SDK Shared Complexity Analysis • MEMO-014" class="linkLabel_WmDU">Pattern SDK Shared Complexity Analysis • MEMO-014</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-015"><span title="Cross-Backend Acceptance Test Framework • MEMO-015" class="linkLabel_WmDU">Cross-Backend Acceptance Test Framework • MEMO-015</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-016"><span title="Observability and Lifecycle Implementation Summary • MEMO-016" class="linkLabel_WmDU">Observability and Lifecycle Implementation Summary • MEMO-016</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-017"><span title="Message Schema Configuration for Publish Slots • MEMO-017" class="linkLabel_WmDU">Message Schema Configuration for Publish Slots • MEMO-017</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-018"><span title="POC 4 Multicast Registry - Complete Summary • MEMO-018" class="linkLabel_WmDU">POC 4 Multicast Registry - Complete Summary • MEMO-018</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-019"><span title="Load Test Results - 100 req/sec Mixed Workload • MEMO-019" class="linkLabel_WmDU">Load Test Results - 100 req/sec Mixed Workload • MEMO-019</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-020"><span title="Parallel Testing Infrastructure and Build Hygiene Implementation • MEMO-020" class="linkLabel_WmDU">Parallel Testing Infrastructure and Build Hygiene Implementation • MEMO-020</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/prism-data-layer/memos/memo-021"><span title="MEMO-021 to 030" class="categoryLinkLabel_W154">MEMO-021 to 030</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/prism-data-layer/memos/memo-031"><span title="MEMO-031 to 040" class="categoryLinkLabel_W154">MEMO-031 to 040</span></a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/prism-data-layer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">MEMO-011 to 020</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">POC 1 Infrastructure Analysis - SDK and Load Testing • MEMO-013</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="docMetadata_NQcq"><div class="tagsRow_ipDH"><span class="tag_VbXK">poc1</span><span class="tag_VbXK">pattern-sdk</span><span class="tag_VbXK">load-testing</span><span class="tag_VbXK">infrastructure</span><span class="tag_VbXK">developer-experience</span></div><div class="metadataRow_PvZM"><span class="metadataItem_RMFE"><strong>Author:</strong> <!-- -->Platform Team</span><span class="metadataItem_RMFE"><strong>Created:</strong> <!-- -->Oct 10, 2025</span><span class="metadataItem_RMFE"><strong>Updated:</strong> <!-- -->Oct 10, 2025</span></div></div><div class="theme-doc-markdown markdown"><header><h1>MEMO-013: POC 1 Infrastructure Analysis - SDK and Load Testing</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="executive-summary">Executive Summary<a href="#executive-summary" class="hash-link" aria-label="Direct link to Executive Summary" title="Direct link to Executive Summary" translate="no">​</a></h2>
<p>Comprehensive analysis of POC 1 infrastructure reveals two critical improvement areas: <strong>Pattern SDK shared complexity</strong> and <strong>load testing strategy</strong>. This memo synthesizes findings from MEMO-014 (SDK analysis) and RFC-029 (load testing evaluation) to provide actionable recommendations for POC 1 implementation.</p>
<p><strong>Key Recommendations</strong>:</p>
<ol>
<li><strong>Extract shared complexity</strong> to Pattern SDK (38% code reduction)</li>
<li><strong>Adopt two-tier load testing</strong> (custom tool + ghz)</li>
<li><strong>Prioritize connection pooling, TTL management, and health checks</strong> for SDK</li>
<li><strong>Implement in 2-week sprint</strong> alongside POC 1 plugin development</li>
</ol>
<p><strong>Impact</strong>:</p>
<ul>
<li>🎯 <strong>Faster plugin development</strong>: 38% less code per plugin</li>
<li>🎯 <strong>Better testing</strong>: Pattern-level + integration coverage</li>
<li>🎯 <strong>Higher quality</strong>: 85%+ test coverage in SDK</li>
<li>🎯 <strong>Reduced maintenance</strong>: Standardized patterns</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="trigger">Trigger<a href="#trigger" class="hash-link" aria-label="Direct link to Trigger" title="Direct link to Trigger" translate="no">​</a></h3>
<p>RFC-021 defines three POC 1 plugins (MemStore, Redis, Kafka) with significant code duplication. Additionally, the current load testing tool (<code>prism-loadtest</code>) lacks integration-level testing through the Rust proxy.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="analysis-scope">Analysis Scope<a href="#analysis-scope" class="hash-link" aria-label="Direct link to Analysis Scope" title="Direct link to Analysis Scope" translate="no">​</a></h3>
<p><strong>MEMO-014</strong>: Pattern SDK Shared Complexity</p>
<ul>
<li>Analyzed all three plugin implementations</li>
<li>Identified 10 areas of duplication</li>
<li>Proposed SDK enhancements</li>
<li>Estimated code reduction: 38%</li>
</ul>
<p><strong>RFC-029</strong>: Load Testing Framework Evaluation</p>
<ul>
<li>Evaluated 5 frameworks (ghz, k6, fortio, vegeta, custom)</li>
<li>Compared against Prism requirements</li>
<li>Proposed two-tier testing strategy</li>
<li>Recommended ghz for integration testing</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="goals">Goals<a href="#goals" class="hash-link" aria-label="Direct link to Goals" title="Direct link to Goals" translate="no">​</a></h3>
<ol>
<li><strong>Reduce code duplication</strong> in plugin implementations</li>
<li><strong>Improve developer experience</strong> with reusable SDK packages</li>
<li><strong>Establish comprehensive testing strategy</strong> for POC 1+</li>
<li><strong>Maintain high code quality</strong> (80%+ coverage)</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="findings">Findings<a href="#findings" class="hash-link" aria-label="Direct link to Findings" title="Direct link to Findings" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="finding-1-significant-code-duplication-across-plugins">Finding 1: Significant Code Duplication Across Plugins<a href="#finding-1-significant-code-duplication-across-plugins" class="hash-link" aria-label="Direct link to Finding 1: Significant Code Duplication Across Plugins" title="Direct link to Finding 1: Significant Code Duplication Across Plugins" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="evidence">Evidence<a href="#evidence" class="hash-link" aria-label="Direct link to Evidence" title="Direct link to Evidence" translate="no">​</a></h4>















































<table><thead><tr><th>Shared Feature</th><th>MemStore</th><th>Redis</th><th>Kafka</th><th>SDK Support</th></tr></thead><tbody><tr><td>TTL Management</td><td>✅ Custom</td><td>✅ Redis EXPIRE</td><td>❌ N/A</td><td>❌ None</td></tr><tr><td>Connection Pooling</td><td>❌ N/A</td><td>✅ Custom</td><td>✅ Custom</td><td>❌ None</td></tr><tr><td>Health Checks</td><td>✅ Custom</td><td>✅ Custom</td><td>✅ Custom</td><td>❌ None</td></tr><tr><td>Retry Logic</td><td>❌ N/A</td><td>✅ Custom</td><td>✅ Custom</td><td>✅ Basic</td></tr><tr><td>Config Loading</td><td>✅ Custom</td><td>✅ Custom</td><td>✅ Custom</td><td>❌ None</td></tr></tbody></table>
<p><strong>10 of 10 features</strong> have duplication across plugins.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="impact">Impact<a href="#impact" class="hash-link" aria-label="Direct link to Impact" title="Direct link to Impact" translate="no">​</a></h4>
<p><strong>Current State</strong> (without SDK enhancements):</p>
<ul>
<li>MemStore: ~600 LOC</li>
<li>Redis: ~700 LOC</li>
<li>Kafka: ~800 LOC</li>
<li><strong>Total</strong>: 2,100 LOC</li>
</ul>
<p><strong>Future State</strong> (with SDK enhancements):</p>
<ul>
<li>MemStore: ~350 LOC (42% reduction)</li>
<li>Redis: ~450 LOC (36% reduction)</li>
<li>Kafka: ~500 LOC (38% reduction)</li>
<li><strong>Total</strong>: 1,300 LOC (38% reduction)</li>
</ul>
<p><strong>Savings</strong>: 800 lines of code across three plugins</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="root-cause">Root Cause<a href="#root-cause" class="hash-link" aria-label="Direct link to Root Cause" title="Direct link to Root Cause" translate="no">​</a></h4>
<p>Pattern SDK was designed as minimal skeleton (RFC-022):</p>
<ul>
<li>Auth stubs</li>
<li>Basic observability</li>
<li>Lifecycle hooks</li>
<li>Basic retry logic</li>
</ul>
<p><strong>Missing</strong>: Higher-level abstractions for common patterns (pooling, TTL, health)</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="finding-2-two-types-of-load-testing-needed">Finding 2: Two Types of Load Testing Needed<a href="#finding-2-two-types-of-load-testing-needed" class="hash-link" aria-label="Direct link to Finding 2: Two Types of Load Testing Needed" title="Direct link to Finding 2: Two Types of Load Testing Needed" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="evidence-1">Evidence<a href="#evidence-1" class="hash-link" aria-label="Direct link to Evidence" title="Direct link to Evidence" translate="no">​</a></h4>
<p>Current <code>prism-loadtest</code> tool:</p>
<ul>
<li>✅ Tests pattern logic directly</li>
<li>✅ Custom metrics (multicast delivery stats)</li>
<li>✅ Production-ready (validated by MEMO-010)</li>
<li>❌ Doesn&#x27;t test through Rust proxy</li>
<li>❌ No gRPC integration testing</li>
</ul>
<p><strong>Gap</strong>: Cannot validate end-to-end production path (client → proxy → plugin → backend)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="analysis">Analysis<a href="#analysis" class="hash-link" aria-label="Direct link to Analysis" title="Direct link to Analysis" translate="no">​</a></h4>
<p>Prism requires <strong>two distinct testing levels</strong>:</p>
<p><strong>Pattern-Level Testing</strong> (Unit Load Testing):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">prism-loadtest → Coordinator (direct) → Redis/NATS</span><br></span></code></pre></div></div>
<ul>
<li><strong>Purpose</strong>: Test pattern logic in isolation</li>
<li><strong>Speed</strong>: Fastest (no gRPC overhead)</li>
<li><strong>Metrics</strong>: Custom (multicast delivery)</li>
<li><strong>Use Case</strong>: Development, optimization</li>
</ul>
<p><strong>Integration-Level Testing</strong> (End-to-End):</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">ghz → Rust Proxy (gRPC) → Pattern (gRPC) → Redis/NATS</span><br></span></code></pre></div></div>
<ul>
<li><strong>Purpose</strong>: Test production path</li>
<li><strong>Speed</strong>: Realistic (includes gRPC)</li>
<li><strong>Metrics</strong>: Standard (gRPC)</li>
<li><strong>Use Case</strong>: QA, production validation</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="comparison">Comparison<a href="#comparison" class="hash-link" aria-label="Direct link to Comparison" title="Direct link to Comparison" translate="no">​</a></h4>









































<table><thead><tr><th>Aspect</th><th>Pattern-Level</th><th>Integration-Level</th><th>Both?</th></tr></thead><tbody><tr><td><strong>Speed</strong></td><td>Fastest (&lt;1ms)</td><td>Realistic (+3-5ms gRPC)</td><td>✅ Different use cases</td></tr><tr><td><strong>Metrics</strong></td><td>Custom ✅</td><td>Standard only</td><td>✅ Complementary</td></tr><tr><td><strong>Debugging</strong></td><td>Easiest</td><td>Harder</td><td>✅ Pattern-level for dev</td></tr><tr><td><strong>Production Accuracy</strong></td><td>No proxy</td><td>Full stack ✅</td><td>✅ Integration for QA</td></tr><tr><td><strong>Coverage</strong></td><td>Pattern logic</td><td>Proxy + Pattern</td><td>✅ Both needed</td></tr></tbody></table>
<p><strong>Conclusion</strong>: Both types are necessary and complementary.</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="finding-3-ghz-best-tool-for-integration-testing">Finding 3: ghz Best Tool for Integration Testing<a href="#finding-3-ghz-best-tool-for-integration-testing" class="hash-link" aria-label="Direct link to Finding 3: ghz Best Tool for Integration Testing" title="Direct link to Finding 3: ghz Best Tool for Integration Testing" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="framework-evaluation-results">Framework Evaluation Results<a href="#framework-evaluation-results" class="hash-link" aria-label="Direct link to Framework Evaluation Results" title="Direct link to Framework Evaluation Results" translate="no">​</a></h4>





















































<table><thead><tr><th>Framework</th><th>gRPC</th><th>Custom Metrics</th><th>Learning Curve</th><th>Maintenance</th><th>Total Score</th></tr></thead><tbody><tr><td><strong>ghz</strong></td><td>5/5</td><td>2/5</td><td>4/5</td><td>5/5</td><td><strong>24/30</strong> ✅</td></tr><tr><td>k6</td><td>3/5</td><td>4/5</td><td>2/5</td><td>5/5</td><td>20/30</td></tr><tr><td>fortio</td><td>5/5</td><td>2/5</td><td>4/5</td><td>4/5</td><td>22/30</td></tr><tr><td>vegeta</td><td>0/5</td><td>-</td><td>-</td><td>-</td><td>Disqualified (no gRPC)</td></tr><tr><td>Custom</td><td>0/5</td><td>5/5</td><td>5/5</td><td>2/5</td><td>22/30</td></tr></tbody></table>
<p><strong>ghz wins</strong> for integration testing (24/30):</p>
<ul>
<li>Native gRPC support</li>
<li>Minimal learning curve</li>
<li>Zero code maintenance</li>
<li>Standard output formats (JSON, CSV, HTML)</li>
</ul>
<p><strong>Custom tool wins</strong> for pattern-level testing (22/30):</p>
<ul>
<li>Direct integration</li>
<li>Custom metrics</li>
<li>Fastest iteration</li>
</ul>
<p><strong>Decision</strong>: Use both (two-tier strategy)</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="recommendations">Recommendations<a href="#recommendations" class="hash-link" aria-label="Direct link to Recommendations" title="Direct link to Recommendations" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommendation-1-extract-shared-complexity-to-sdk">Recommendation 1: Extract Shared Complexity to SDK<a href="#recommendation-1-extract-shared-complexity-to-sdk" class="hash-link" aria-label="Direct link to Recommendation 1: Extract Shared Complexity to SDK" title="Direct link to Recommendation 1: Extract Shared Complexity to SDK" translate="no">​</a></h3>
<p><strong>Priority</strong>: High (POC 1 blocker)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="phase-1-foundation-3-days">Phase 1: Foundation (3 days)<a href="#phase-1-foundation-3-days" class="hash-link" aria-label="Direct link to Phase 1: Foundation (3 days)" title="Direct link to Phase 1: Foundation (3 days)" translate="no">​</a></h4>
<p>Implement three critical SDK packages:</p>
<p><strong>1. Connection Pool Manager</strong> (<code>plugins/core/pool/</code>)</p>
<ul>
<li>Generic connection pooling with health checking</li>
<li>~300 LOC + ~200 LOC tests</li>
<li>Coverage target: 90%+</li>
<li><strong>Impact</strong>: Reduces Redis and Kafka by ~150 LOC each</li>
</ul>
<p><strong>2. TTL Manager</strong> (<code>plugins/core/ttl/</code>)</p>
<ul>
<li>Heap-based key expiration (O(log n) vs O(1) per-key timers)</li>
<li>~250 LOC + ~150 LOC tests</li>
<li>Coverage target: 95%+</li>
<li><strong>Impact</strong>: Reduces MemStore by ~80 LOC, 10x better scalability</li>
</ul>
<p><strong>3. Health Check Framework</strong> (<code>plugins/core/health/</code>)</p>
<ul>
<li>Standardized health checking with composite status</li>
<li>~200 LOC + ~100 LOC tests</li>
<li>Coverage target: 90%+</li>
<li><strong>Impact</strong>: Reduces all plugins by ~50 LOC each</li>
</ul>
<p><strong>Total Effort</strong>: 3 days (one Go expert)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="phase-2-convenience-2-days">Phase 2: Convenience (2 days)<a href="#phase-2-convenience-2-days" class="hash-link" aria-label="Direct link to Phase 2: Convenience (2 days)" title="Direct link to Phase 2: Convenience (2 days)" translate="no">​</a></h4>
<p>Implement supporting packages:</p>
<p><strong>4. gRPC Middleware</strong> (<code>plugins/core/server/middleware.go</code>)</p>
<ul>
<li>Logging interceptor</li>
<li>Error standardization interceptor</li>
<li>~150 LOC + ~80 LOC tests</li>
<li><strong>Impact</strong>: Reduces all plugins by ~30 LOC each</li>
</ul>
<p><strong>5. Config Loader</strong> (<code>plugins/core/config/</code>)</p>
<ul>
<li>Type-safe environment variable loading</li>
<li>~100 LOC + ~60 LOC tests</li>
<li><strong>Impact</strong>: Reduces all plugins by ~20 LOC each</li>
</ul>
<p><strong>6. Circuit Breaker</strong> (<code>plugins/core/storage/errors.go</code>)</p>
<ul>
<li>Error classification</li>
<li>Circuit breaker for fault tolerance</li>
<li>~200 LOC + ~100 LOC tests</li>
<li><strong>Impact</strong>: Improves reliability (no LOC reduction)</li>
</ul>
<p><strong>Total Effort</strong>: 2 days</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="phase-3-refactor-plugins-2-days">Phase 3: Refactor Plugins (2 days)<a href="#phase-3-refactor-plugins-2-days" class="hash-link" aria-label="Direct link to Phase 3: Refactor Plugins (2 days)" title="Direct link to Phase 3: Refactor Plugins (2 days)" translate="no">​</a></h4>
<p>Refactor existing plugins to use new SDK packages:</p>
<ul>
<li>MemStore: Use <code>ttl.Manager</code> instead of per-key timers</li>
<li>Redis: Use <code>pool.Pool</code> for connection management</li>
<li>Kafka: Use <code>pool.Pool</code> for connection management</li>
<li>All: Use <code>health.Checker</code>, <code>config.Loader</code>, middleware</li>
</ul>
<p><strong>Total Effort</strong>: 2 days</p>
<p><strong>Total Timeline</strong>: <strong>7 days</strong> (1.5 weeks)</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommendation-2-adopt-two-tier-load-testing-strategy">Recommendation 2: Adopt Two-Tier Load Testing Strategy<a href="#recommendation-2-adopt-two-tier-load-testing-strategy" class="hash-link" aria-label="Direct link to Recommendation 2: Adopt Two-Tier Load Testing Strategy" title="Direct link to Recommendation 2: Adopt Two-Tier Load Testing Strategy" translate="no">​</a></h3>
<p><strong>Priority</strong>: High (POC 1 quality gate)</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="keep-custom-tool-prism-loadtest">Keep Custom Tool (prism-loadtest)<a href="#keep-custom-tool-prism-loadtest" class="hash-link" aria-label="Direct link to Keep Custom Tool (prism-loadtest)" title="Direct link to Keep Custom Tool (prism-loadtest)" translate="no">​</a></h4>
<p><strong>Enhancements</strong>:</p>
<ol>
<li>Add ramp-up load profile</li>
<li>Add spike load profile</li>
<li>Add JSON output format</li>
<li>Document usage patterns</li>
</ol>
<p><strong>Effort</strong>: 2 days</p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>Pattern development and debugging</li>
<li>Algorithm optimization (TTL, fan-out)</li>
<li>Backend benchmarking (Redis vs SQLite)</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="add-ghz-for-integration-testing">Add ghz for Integration Testing<a href="#add-ghz-for-integration-testing" class="hash-link" aria-label="Direct link to Add ghz for Integration Testing" title="Direct link to Add ghz for Integration Testing" translate="no">​</a></h4>
<p><strong>Setup</strong>:</p>
<ol>
<li>Install ghz (<code>go install github.com/bojand/ghz/cmd/ghz@latest</code>)</li>
<li>Create test suite (<code>tests/load/ghz/</code>)</li>
<li>Add to CI/CD pipeline</li>
<li>Document baseline overhead (gRPC adds ~3-5ms)</li>
</ol>
<p><strong>Effort</strong>: 3 days</p>
<p><strong>Use Cases</strong>:</p>
<ul>
<li>End-to-end testing through proxy</li>
<li>Production validation</li>
<li>CI/CD regression testing</li>
</ul>
<p><strong>Total Timeline</strong>: <strong>5 days</strong> (1 week)</p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="recommendation-3-implementation-order">Recommendation 3: Implementation Order<a href="#recommendation-3-implementation-order" class="hash-link" aria-label="Direct link to Recommendation 3: Implementation Order" title="Direct link to Recommendation 3: Implementation Order" translate="no">​</a></h3>
<p><strong>Week 1: SDK Foundation + Tool Enhancements</strong></p>
<ul>
<li>Days 1-3: Implement SDK packages (pool, TTL, health)</li>
<li>Days 4-5: Enhance prism-loadtest (profiles, JSON output)</li>
</ul>
<p><strong>Week 2: Integration + Validation</strong></p>
<ul>
<li>Days 1-2: Refactor plugins to use SDK</li>
<li>Days 3-5: Add ghz integration testing + CI/CD</li>
</ul>
<p><strong>Parallel Work Opportunities</strong>:</p>
<ul>
<li>SDK development (Go expert)</li>
<li>Load testing setup (DevOps/QA)</li>
<li>Can run concurrently</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benefits">Benefits<a href="#benefits" class="hash-link" aria-label="Direct link to Benefits" title="Direct link to Benefits" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience">Developer Experience<a href="#developer-experience" class="hash-link" aria-label="Direct link to Developer Experience" title="Direct link to Developer Experience" translate="no">​</a></h3>
<p><strong>Before</strong> (current state):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Redis plugin: ~700 LOC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 150 LOC connection pooling</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 50 LOC health checks</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 40 LOC config loading</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 460 LOC actual Redis logic</span><br></span></code></pre></div></div>
<p><strong>After</strong> (with SDK):</p>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Redis plugin: ~450 LOC</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 10 LOC pool setup (use sdk.Pool)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 5 LOC health setup (use sdk.Health)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 5 LOC config setup (use sdk.Config)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// - 430 LOC actual Redis logic (cleaned up)</span><br></span></code></pre></div></div>
<p><strong>Result</strong>: <strong>36% less boilerplate</strong>, focus on business logic</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-quality">Code Quality<a href="#code-quality" class="hash-link" aria-label="Direct link to Code Quality" title="Direct link to Code Quality" translate="no">​</a></h3>
<p><strong>SDK Packages</strong>:</p>
<ul>
<li>85-95% test coverage (enforced in CI)</li>
<li>Comprehensive unit tests</li>
<li>Race detector clean</li>
<li>Benchmarked performance</li>
</ul>
<p><strong>Plugins</strong>:</p>
<ul>
<li>Inherit SDK quality</li>
<li>Focus on integration tests</li>
<li>Reduced surface area for bugs</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="maintenance">Maintenance<a href="#maintenance" class="hash-link" aria-label="Direct link to Maintenance" title="Direct link to Maintenance" translate="no">​</a></h3>
<p><strong>Before</strong>: 3 custom implementations × 3 features = 9 code paths to maintain</p>
<p><strong>After</strong>: 1 SDK implementation × 3 features = 3 code paths to maintain</p>
<p><strong>Reduction</strong>: 67% fewer code paths</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="testing">Testing<a href="#testing" class="hash-link" aria-label="Direct link to Testing" title="Direct link to Testing" translate="no">​</a></h3>
<p><strong>Pattern-Level</strong> (prism-loadtest):</p>
<ul>
<li>Fastest iteration (&lt;1ms latency)</li>
<li>Custom metrics (multicast delivery rate)</li>
<li>Isolated debugging</li>
</ul>
<p><strong>Integration-Level</strong> (ghz):</p>
<ul>
<li>Production accuracy (includes gRPC)</li>
<li>Standard reporting (JSON, CSV, HTML)</li>
<li>CI/CD integration</li>
</ul>
<p><strong>Result</strong>: Comprehensive coverage at two levels</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="risks-and-mitigations">Risks and Mitigations<a href="#risks-and-mitigations" class="hash-link" aria-label="Direct link to Risks and Mitigations" title="Direct link to Risks and Mitigations" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-1-sdk-complexity">Risk 1: SDK Complexity<a href="#risk-1-sdk-complexity" class="hash-link" aria-label="Direct link to Risk 1: SDK Complexity" title="Direct link to Risk 1: SDK Complexity" translate="no">​</a></h3>
<p><strong>Risk</strong>: SDK becomes too complex and hard to understand.</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Keep packages focused (single responsibility)</li>
<li>Comprehensive documentation with examples</li>
<li>Code reviews for all SDK changes</li>
<li>Target: 85%+ test coverage</li>
</ul>
<p><strong>Probability</strong>: Low (packages are well-scoped)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-2-schedule-impact">Risk 2: Schedule Impact<a href="#risk-2-schedule-impact" class="hash-link" aria-label="Direct link to Risk 2: Schedule Impact" title="Direct link to Risk 2: Schedule Impact" translate="no">​</a></h3>
<p><strong>Risk</strong>: SDK work delays POC 1 plugin implementation.</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Parallel work streams (SDK + load testing)</li>
<li>Incremental adoption (plugins can start without SDK)</li>
<li>Total: 2 weeks (fits within POC 1 timeline)</li>
</ul>
<p><strong>Probability</strong>: Low (work is additive, not blocking)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-3-tool-proliferation">Risk 3: Tool Proliferation<a href="#risk-3-tool-proliferation" class="hash-link" aria-label="Direct link to Risk 3: Tool Proliferation" title="Direct link to Risk 3: Tool Proliferation" translate="no">​</a></h3>
<p><strong>Risk</strong>: Team confused about which load testing tool to use.</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Clear decision matrix (pattern-level vs integration)</li>
<li>Documentation in RFC-029</li>
<li>Training/examples for both tools</li>
</ul>
<p><strong>Probability</strong>: Low (two tools with clear separation)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="risk-4-performance-regression">Risk 4: Performance Regression<a href="#risk-4-performance-regression" class="hash-link" aria-label="Direct link to Risk 4: Performance Regression" title="Direct link to Risk 4: Performance Regression" translate="no">​</a></h3>
<p><strong>Risk</strong>: Generic SDK code slower than custom implementations.</p>
<p><strong>Mitigation</strong>:</p>
<ul>
<li>Benchmark all SDK packages</li>
<li>Compare against custom implementations</li>
<li>Target: No regression (&lt;5% acceptable)</li>
<li>Example: TTL manager 10x faster (heap vs per-key timers)</li>
</ul>
<p><strong>Probability</strong>: Very Low (SDK uses better algorithms)</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="success-metrics">Success Metrics<a href="#success-metrics" class="hash-link" aria-label="Direct link to Success Metrics" title="Direct link to Success Metrics" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-quality-metrics">Code Quality Metrics<a href="#code-quality-metrics" class="hash-link" aria-label="Direct link to Code Quality Metrics" title="Direct link to Code Quality Metrics" translate="no">​</a></h3>






























<table><thead><tr><th>Metric</th><th>Target</th><th>Measurement</th></tr></thead><tbody><tr><td>SDK Test Coverage</td><td>85%+</td><td><code>make coverage-sdk</code></td></tr><tr><td>Plugin Code Reduction</td><td>35%+</td><td>LOC comparison</td></tr><tr><td>Bug Reduction</td><td>40%+</td><td>Bugs in connection/TTL logic</td></tr><tr><td>Build Time</td><td>&lt;30s</td><td>CI/CD pipeline</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="performance-metrics">Performance Metrics<a href="#performance-metrics" class="hash-link" aria-label="Direct link to Performance Metrics" title="Direct link to Performance Metrics" translate="no">​</a></h3>






























<table><thead><tr><th>Metric</th><th>Target</th><th>Measurement</th></tr></thead><tbody><tr><td>Pattern-Level P95</td><td>&lt;5ms</td><td>prism-loadtest results</td></tr><tr><td>Integration P95</td><td>&lt;10ms</td><td>ghz results</td></tr><tr><td>gRPC Overhead</td><td>3-5ms</td><td>Diff between tools</td></tr><tr><td>TTL Performance</td><td>10x improvement</td><td>Benchmark: 10K keys</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="developer-experience-metrics">Developer Experience Metrics<a href="#developer-experience-metrics" class="hash-link" aria-label="Direct link to Developer Experience Metrics" title="Direct link to Developer Experience Metrics" translate="no">​</a></h3>

























<table><thead><tr><th>Metric</th><th>Target</th><th>Measurement</th></tr></thead><tbody><tr><td>New Plugin Time</td><td>-30%</td><td>Time to add plugin</td></tr><tr><td>SDK Adoption</td><td>100%</td><td>All plugins use SDK</td></tr><tr><td>Tool Clarity</td><td>100%</td><td>Team knows which tool to use</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-plan">Implementation Plan<a href="#implementation-plan" class="hash-link" aria-label="Direct link to Implementation Plan" title="Direct link to Implementation Plan" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="week-1-foundation">Week 1: Foundation<a href="#week-1-foundation" class="hash-link" aria-label="Direct link to Week 1: Foundation" title="Direct link to Week 1: Foundation" translate="no">​</a></h3>
<p><strong>Days 1-3: SDK Packages</strong> (Go Expert)</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> Implement <code>pool.Pool</code> with tests (90%+ coverage)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Implement <code>ttl.Manager</code> with tests (95%+ coverage)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Implement <code>health.Checker</code> with tests (90%+ coverage)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Run <code>make coverage-sdk</code> to verify</li>
</ul>
<p><strong>Days 4-5: Load Testing</strong> (DevOps/QA)</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> Enhance prism-loadtest with profiles</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Add JSON output format</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Document usage patterns</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="week-2-integration">Week 2: Integration<a href="#week-2-integration" class="hash-link" aria-label="Direct link to Week 2: Integration" title="Direct link to Week 2: Integration" translate="no">​</a></h3>
<p><strong>Days 1-2: Plugin Refactoring</strong> (Go Expert)</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> Refactor MemStore to use <code>ttl.Manager</code></li>
<li class="task-list-item"><input type="checkbox" disabled=""> Refactor Redis to use <code>pool.Pool</code> and <code>health.Checker</code></li>
<li class="task-list-item"><input type="checkbox" disabled=""> Refactor Kafka to use <code>pool.Pool</code> and <code>health.Checker</code></li>
<li class="task-list-item"><input type="checkbox" disabled=""> Verify all tests pass</li>
</ul>
<p><strong>Days 3-5: ghz Integration</strong> (DevOps/QA)</p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> Install ghz</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Create ghz test suite for each pattern</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Add to CI/CD pipeline</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Document baseline performance</li>
</ul>
<p><strong>Day 5: Validation</strong></p>
<ul class="contains-task-list containsTaskList_mC6p">
<li class="task-list-item"><input type="checkbox" disabled=""> Run full test suite (pattern-level + integration)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Compare results (expected: gRPC adds 3-5ms)</li>
<li class="task-list-item"><input type="checkbox" disabled=""> Generate final report</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="decision-matrix">Decision Matrix<a href="#decision-matrix" class="hash-link" aria-label="Direct link to Decision Matrix" title="Direct link to Decision Matrix" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-pattern-level-testing-prism-loadtest">When to Use Pattern-Level Testing (prism-loadtest)<a href="#when-to-use-pattern-level-testing-prism-loadtest" class="hash-link" aria-label="Direct link to When to Use Pattern-Level Testing (prism-loadtest)" title="Direct link to When to Use Pattern-Level Testing (prism-loadtest)" translate="no">​</a></h3>





























<table><thead><tr><th>Scenario</th><th>Rationale</th></tr></thead><tbody><tr><td><strong>Pattern Development</strong></td><td>Fast iteration, no proxy needed</td></tr><tr><td><strong>Algorithm Optimization</strong></td><td>Isolated testing (TTL, fan-out)</td></tr><tr><td><strong>Backend Benchmarking</strong></td><td>Compare Redis vs SQLite</td></tr><tr><td><strong>Debugging</strong></td><td>Easiest to debug pattern logic</td></tr><tr><td><strong>Custom Metrics</strong></td><td>Multicast delivery rate</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="when-to-use-integration-testing-ghz">When to Use Integration Testing (ghz)<a href="#when-to-use-integration-testing-ghz" class="hash-link" aria-label="Direct link to When to Use Integration Testing (ghz)" title="Direct link to When to Use Integration Testing (ghz)" translate="no">​</a></h3>





























<table><thead><tr><th>Scenario</th><th>Rationale</th></tr></thead><tbody><tr><td><strong>End-to-End Validation</strong></td><td>Tests full production path</td></tr><tr><td><strong>Proxy Performance</strong></td><td>Includes gRPC overhead</td></tr><tr><td><strong>CI/CD Regression</strong></td><td>Standard tool for automation</td></tr><tr><td><strong>Production Load Simulation</strong></td><td>Realistic conditions</td></tr><tr><td><strong>QA Acceptance</strong></td><td>Standard reporting format</td></tr></tbody></table>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="cost-benefit-analysis">Cost-Benefit Analysis<a href="#cost-benefit-analysis" class="hash-link" aria-label="Direct link to Cost-Benefit Analysis" title="Direct link to Cost-Benefit Analysis" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="investment">Investment<a href="#investment" class="hash-link" aria-label="Direct link to Investment" title="Direct link to Investment" translate="no">​</a></h3>









































<table><thead><tr><th>Component</th><th>Effort</th><th>LOC</th><th>Test Coverage</th></tr></thead><tbody><tr><td>SDK Packages (3)</td><td>3 days</td><td>~750</td><td>90%+</td></tr><tr><td>SDK Packages (3 more)</td><td>2 days</td><td>~450</td><td>85%+</td></tr><tr><td>Plugin Refactoring</td><td>2 days</td><td>-800 (net)</td><td>80%+</td></tr><tr><td>Load Testing</td><td>5 days</td><td>~100</td><td>N/A</td></tr><tr><td><strong>Total</strong></td><td><strong>12 days</strong></td><td><strong>~400 net</strong></td><td><strong>85%+</strong></td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="return">Return<a href="#return" class="hash-link" aria-label="Direct link to Return" title="Direct link to Return" translate="no">​</a></h3>








































<table><thead><tr><th>Benefit</th><th>Value</th><th>Measurement</th></tr></thead><tbody><tr><td><strong>Code Reduction</strong></td><td>800 LOC</td><td>38% less plugin code</td></tr><tr><td><strong>Quality Improvement</strong></td><td>85%+ coverage</td><td>SDK packages</td></tr><tr><td><strong>Developer Productivity</strong></td><td>30% faster</td><td>New plugin development</td></tr><tr><td><strong>Maintenance Reduction</strong></td><td>67% fewer paths</td><td>SDK centralization</td></tr><tr><td><strong>Testing Coverage</strong></td><td>2 levels</td><td>Pattern + Integration</td></tr><tr><td><strong>Bug Reduction</strong></td><td>40% fewer bugs</td><td>Shared, tested code</td></tr></tbody></table>
<p><strong>ROI</strong>: 12 days investment → 30% faster development + 38% less code + 67% less maintenance</p>
<p><strong>Payback Period</strong>: ~1 month (after 3-4 new plugins)</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="alternatives-considered">Alternatives Considered<a href="#alternatives-considered" class="hash-link" aria-label="Direct link to Alternatives Considered" title="Direct link to Alternatives Considered" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-1-no-sdk-enhancements-status-quo">Alternative 1: No SDK Enhancements (Status Quo)<a href="#alternative-1-no-sdk-enhancements-status-quo" class="hash-link" aria-label="Direct link to Alternative 1: No SDK Enhancements (Status Quo)" title="Direct link to Alternative 1: No SDK Enhancements (Status Quo)" translate="no">​</a></h3>
<p><strong>Pros</strong>:</p>
<ul>
<li>No additional work</li>
<li>Plugins work as-is</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>❌ 800 LOC duplication</li>
<li>❌ Inconsistent implementations</li>
<li>❌ Higher maintenance burden</li>
<li>❌ More bugs</li>
</ul>
<p><strong>Decision</strong>: Rejected - duplication too costly</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-2-third-party-libraries-for-poolingttl">Alternative 2: Third-Party Libraries for Pooling/TTL<a href="#alternative-2-third-party-libraries-for-poolingttl" class="hash-link" aria-label="Direct link to Alternative 2: Third-Party Libraries for Pooling/TTL" title="Direct link to Alternative 2: Third-Party Libraries for Pooling/TTL" translate="no">​</a></h3>
<p><strong>Pros</strong>:</p>
<ul>
<li>Battle-tested</li>
<li>No implementation work</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>❌ External dependencies</li>
<li>❌ May not fit use cases</li>
<li>❌ Less control</li>
</ul>
<p><strong>Decision</strong>: Rejected - need Prism-specific features (health integration, custom metrics)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-3-single-tool-ghz-only-or-custom-only">Alternative 3: Single Tool (ghz Only or Custom Only)<a href="#alternative-3-single-tool-ghz-only-or-custom-only" class="hash-link" aria-label="Direct link to Alternative 3: Single Tool (ghz Only or Custom Only)" title="Direct link to Alternative 3: Single Tool (ghz Only or Custom Only)" translate="no">​</a></h3>
<p><strong>ghz Only</strong>:</p>
<ul>
<li>❌ Can&#x27;t test patterns directly</li>
<li>❌ No custom metrics</li>
<li>❌ Slower iteration</li>
</ul>
<p><strong>Custom Only</strong>:</p>
<ul>
<li>❌ No integration testing</li>
<li>❌ Can&#x27;t validate proxy</li>
<li>❌ Missing production path</li>
</ul>
<p><strong>Decision</strong>: Rejected - both tools needed for different use cases</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="next-steps">Next Steps<a href="#next-steps" class="hash-link" aria-label="Direct link to Next Steps" title="Direct link to Next Steps" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="immediate-this-week">Immediate (This Week)<a href="#immediate-this-week" class="hash-link" aria-label="Direct link to Immediate (This Week)" title="Direct link to Immediate (This Week)" translate="no">​</a></h3>
<ol>
<li><strong>Review this memo</strong> with team</li>
<li><strong>Approve SDK packages</strong> (pool, TTL, health)</li>
<li><strong>Assign owners</strong>:
<ul>
<li>SDK implementation: Go expert</li>
<li>Load testing: DevOps/QA</li>
</ul>
</li>
<li><strong>Create tracking issues</strong> in GitHub</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="short-term-next-2-weeks">Short-Term (Next 2 Weeks)<a href="#short-term-next-2-weeks" class="hash-link" aria-label="Direct link to Short-Term (Next 2 Weeks)" title="Direct link to Short-Term (Next 2 Weeks)" translate="no">​</a></h3>
<ol start="5">
<li><strong>Implement SDK packages</strong> (Week 1, Days 1-3)</li>
<li><strong>Enhance prism-loadtest</strong> (Week 1, Days 4-5)</li>
<li><strong>Refactor plugins</strong> (Week 2, Days 1-2)</li>
<li><strong>Add ghz integration</strong> (Week 2, Days 3-5)</li>
<li><strong>Validate and measure</strong> (Week 2, Day 5)</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="long-term-poc-2">Long-Term (POC 2+)<a href="#long-term-poc-2" class="hash-link" aria-label="Direct link to Long-Term (POC 2+)" title="Direct link to Long-Term (POC 2+)" translate="no">​</a></h3>
<ol start="10">
<li><strong>Evaluate SDK adoption</strong> (after POC 1)</li>
<li><strong>Measure developer productivity</strong> (time to add new plugin)</li>
<li><strong>Consider k6</strong> (if distributed load testing needed)</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-documents">Related Documents<a href="#related-documents" class="hash-link" aria-label="Direct link to Related Documents" title="Direct link to Related Documents" translate="no">​</a></h2>
<ul>
<li><strong><a href="/prism-data-layer/memos/memo-014">MEMO-014: Pattern SDK Shared Complexity</a></strong> - Detailed SDK analysis</li>
<li><strong><a href="/prism-data-layer/rfc/rfc-029">RFC-029: Load Testing Framework Evaluation</a></strong> - Framework comparison</li>
<li><strong><a href="/prism-data-layer/rfc/rfc-021">RFC-021: POC 1 Three Plugins Implementation</a></strong> - Plugin design</li>
<li><strong><a href="/prism-data-layer/rfc/rfc-022">RFC-022: Core Pattern SDK Code Layout</a></strong> - SDK structure</li>
<li><strong><a href="/prism-data-layer/memos/memo-010">MEMO-010: Load Test Results</a></strong> - Custom tool validation</li>
<li><strong><a href="/prism-data-layer/rfc/rfc-018">RFC-018: POC Implementation Strategy</a></strong> - Overall POC roadmap</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-a-code-examples">Appendix A: Code Examples<a href="#appendix-a-code-examples" class="hash-link" aria-label="Direct link to Appendix A: Code Examples" title="Direct link to Appendix A: Code Examples" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="before-sdk-redis-plugin">Before SDK (Redis Plugin)<a href="#before-sdk-redis-plugin" class="hash-link" aria-label="Direct link to Before SDK (Redis Plugin)" title="Direct link to Before SDK (Redis Plugin)" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// plugins/redis/client/pool.go (~150 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> ConnectionPool </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    mu       sync</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Mutex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    conns    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token punctuation" style="color:#393A34">]</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">redis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    maxConns </span><span class="token builtin">int</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... custom pooling logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// plugins/redis/client/health.go (~50 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">type</span><span class="token plain"> HealthChecker </span><span class="token keyword" style="color:#00009f">struct</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    client </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">redis</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Client</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... custom health check logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// plugins/redis/config.go (~40 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">loadConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> RedisConfig </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addr </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> os</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Getenv</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;REDIS_ADDR&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> addr </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        addr </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;localhost:6379&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... custom config loading</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Total</strong>: ~240 LOC of boilerplate</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="after-sdk-redis-plugin">After SDK (Redis Plugin)<a href="#after-sdk-redis-plugin" class="hash-link" aria-label="Direct link to After SDK (Redis Plugin)" title="Direct link to After SDK (Redis Plugin)" translate="no">​</a></h3>
<div class="language-go codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-go codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// plugins/redis/main.go (~30 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/prism/plugins/core/pool&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/prism/plugins/core/health&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token string" style="color:#e3116c">&quot;github.com/prism/plugins/core/config&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">func</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">main</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Config loading (5 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cfg </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewLoader</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;REDIS&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    addr </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> cfg</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Required</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;ADDR&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Connection pool (10 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    pool </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewPool</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">redisFactory</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">addr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MinIdle</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        MaxOpen</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">50</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Health checks (5 LOC)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    health </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> health</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">NewChecker</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">health</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Config</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        Interval</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">*</span><span class="token plain"> time</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Second</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    health</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;redis&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">func</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx context</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">Context</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token builtin">error</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        conn</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">_</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">:=</span><span class="token plain"> pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Acquire</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">defer</span><span class="token plain"> pool</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Release</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">conn</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> conn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">*</span><span class="token plain">RedisConnection</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">Health</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ... actual Redis logic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Total</strong>: ~30 LOC (88% reduction in boilerplate)</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="appendix-b-load-testing-example">Appendix B: Load Testing Example<a href="#appendix-b-load-testing-example" class="hash-link" aria-label="Direct link to Appendix B: Load Testing Example" title="Direct link to Appendix B: Load Testing Example" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="pattern-level-test">Pattern-Level Test<a href="#pattern-level-test" class="hash-link" aria-label="Direct link to Pattern-Level Test" title="Direct link to Pattern-Level Test" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Test pattern logic directly (fastest)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">./prism-loadtest register </span><span class="token parameter variable" style="color:#36acaa">-r</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> 60s --redis-addr localhost:6379</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Register Operations:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Total Requests:   3053</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Success Rate:     100.00%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Latency P95:      5ms     ← No gRPC overhead</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Latency P99:      50ms</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-level-test">Integration-Level Test<a href="#integration-level-test" class="hash-link" aria-label="Direct link to Integration-Level Test" title="Direct link to Integration-Level Test" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Test through Rust proxy (realistic)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ghz </span><span class="token parameter variable" style="color:#36acaa">--proto</span><span class="token plain"> proto/interfaces/keyvalue_basic.proto </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--call</span><span class="token plain"> prism.KeyValueBasicInterface.Set </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--insecure</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--rps</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--duration</span><span class="token plain"> 60s </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token parameter variable" style="color:#36acaa">--data</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;{&quot;namespace&quot;:&quot;default&quot;,&quot;key&quot;:&quot;test-{{.RequestNumber}}&quot;,&quot;value&quot;:&quot;dGVzdA==&quot;}&#x27;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    localhost:8980</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Output:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Summary:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Count:        6000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Requests/sec: 100.00</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   Average:      8.2ms    ← gRPC adds ~3ms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   95th %ile:    10ms</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">#   99th %ile:    15ms</span><br></span></code></pre></div></div>
<p><strong>Observation</strong>: Integration test adds ~3-5ms latency (expected gRPC overhead)</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate="no">​</a></h2>
<p>This memo synthesizes findings from MEMO-014 (SDK analysis) and RFC-029 (load testing evaluation) to propose a comprehensive infrastructure strategy for POC 1:</p>
<ol>
<li><strong>Extract shared complexity to Pattern SDK</strong> (38% code reduction)</li>
<li><strong>Adopt two-tier load testing strategy</strong> (pattern + integration)</li>
<li><strong>Implement in 2-week sprint</strong> (12 days effort)</li>
</ol>
<p><strong>Expected Outcomes</strong>:</p>
<ul>
<li>✅ Faster plugin development (30% time savings)</li>
<li>✅ Higher code quality (85%+ SDK coverage)</li>
<li>✅ Better testing (two-level coverage)</li>
<li>✅ Reduced maintenance (67% fewer code paths)</li>
</ul>
<p><strong>Recommendation</strong>: Proceed with implementation alongside POC 1 plugin development.</p>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="revision-history">Revision History<a href="#revision-history" class="hash-link" aria-label="Direct link to Revision History" title="Direct link to Revision History" translate="no">​</a></h2>
<ul>
<li>2025-10-11: Initial synthesis of SDK analysis and load testing evaluation</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/poc-1">poc1</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/pattern-sdk">pattern-sdk</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/load-testing">load-testing</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/infrastructure">infrastructure</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/developer-experience">developer-experience</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jrepp/prism-data-layer/tree/main/docs-cms/../docs-cms/memos/MEMO-013-poc1-infrastructure-analysis.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/prism-data-layer/memos/memo-012"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developer Experience and Common Workflows • MEMO-012</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/prism-data-layer/memos/memo-014"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pattern SDK Shared Complexity Analysis • MEMO-014</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#executive-summary" class="table-of-contents__link toc-highlight">Executive Summary</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a><ul><li><a href="#trigger" class="table-of-contents__link toc-highlight">Trigger</a></li><li><a href="#analysis-scope" class="table-of-contents__link toc-highlight">Analysis Scope</a></li><li><a href="#goals" class="table-of-contents__link toc-highlight">Goals</a></li></ul></li><li><a href="#findings" class="table-of-contents__link toc-highlight">Findings</a><ul><li><a href="#finding-1-significant-code-duplication-across-plugins" class="table-of-contents__link toc-highlight">Finding 1: Significant Code Duplication Across Plugins</a></li><li><a href="#finding-2-two-types-of-load-testing-needed" class="table-of-contents__link toc-highlight">Finding 2: Two Types of Load Testing Needed</a></li><li><a href="#finding-3-ghz-best-tool-for-integration-testing" class="table-of-contents__link toc-highlight">Finding 3: ghz Best Tool for Integration Testing</a></li></ul></li><li><a href="#recommendations" class="table-of-contents__link toc-highlight">Recommendations</a><ul><li><a href="#recommendation-1-extract-shared-complexity-to-sdk" class="table-of-contents__link toc-highlight">Recommendation 1: Extract Shared Complexity to SDK</a></li><li><a href="#recommendation-2-adopt-two-tier-load-testing-strategy" class="table-of-contents__link toc-highlight">Recommendation 2: Adopt Two-Tier Load Testing Strategy</a></li><li><a href="#recommendation-3-implementation-order" class="table-of-contents__link toc-highlight">Recommendation 3: Implementation Order</a></li></ul></li><li><a href="#benefits" class="table-of-contents__link toc-highlight">Benefits</a><ul><li><a href="#developer-experience" class="table-of-contents__link toc-highlight">Developer Experience</a></li><li><a href="#code-quality" class="table-of-contents__link toc-highlight">Code Quality</a></li><li><a href="#maintenance" class="table-of-contents__link toc-highlight">Maintenance</a></li><li><a href="#testing" class="table-of-contents__link toc-highlight">Testing</a></li></ul></li><li><a href="#risks-and-mitigations" class="table-of-contents__link toc-highlight">Risks and Mitigations</a><ul><li><a href="#risk-1-sdk-complexity" class="table-of-contents__link toc-highlight">Risk 1: SDK Complexity</a></li><li><a href="#risk-2-schedule-impact" class="table-of-contents__link toc-highlight">Risk 2: Schedule Impact</a></li><li><a href="#risk-3-tool-proliferation" class="table-of-contents__link toc-highlight">Risk 3: Tool Proliferation</a></li><li><a href="#risk-4-performance-regression" class="table-of-contents__link toc-highlight">Risk 4: Performance Regression</a></li></ul></li><li><a href="#success-metrics" class="table-of-contents__link toc-highlight">Success Metrics</a><ul><li><a href="#code-quality-metrics" class="table-of-contents__link toc-highlight">Code Quality Metrics</a></li><li><a href="#performance-metrics" class="table-of-contents__link toc-highlight">Performance Metrics</a></li><li><a href="#developer-experience-metrics" class="table-of-contents__link toc-highlight">Developer Experience Metrics</a></li></ul></li><li><a href="#implementation-plan" class="table-of-contents__link toc-highlight">Implementation Plan</a><ul><li><a href="#week-1-foundation" class="table-of-contents__link toc-highlight">Week 1: Foundation</a></li><li><a href="#week-2-integration" class="table-of-contents__link toc-highlight">Week 2: Integration</a></li></ul></li><li><a href="#decision-matrix" class="table-of-contents__link toc-highlight">Decision Matrix</a><ul><li><a href="#when-to-use-pattern-level-testing-prism-loadtest" class="table-of-contents__link toc-highlight">When to Use Pattern-Level Testing (prism-loadtest)</a></li><li><a href="#when-to-use-integration-testing-ghz" class="table-of-contents__link toc-highlight">When to Use Integration Testing (ghz)</a></li></ul></li><li><a href="#cost-benefit-analysis" class="table-of-contents__link toc-highlight">Cost-Benefit Analysis</a><ul><li><a href="#investment" class="table-of-contents__link toc-highlight">Investment</a></li><li><a href="#return" class="table-of-contents__link toc-highlight">Return</a></li></ul></li><li><a href="#alternatives-considered" class="table-of-contents__link toc-highlight">Alternatives Considered</a><ul><li><a href="#alternative-1-no-sdk-enhancements-status-quo" class="table-of-contents__link toc-highlight">Alternative 1: No SDK Enhancements (Status Quo)</a></li><li><a href="#alternative-2-third-party-libraries-for-poolingttl" class="table-of-contents__link toc-highlight">Alternative 2: Third-Party Libraries for Pooling/TTL</a></li><li><a href="#alternative-3-single-tool-ghz-only-or-custom-only" class="table-of-contents__link toc-highlight">Alternative 3: Single Tool (ghz Only or Custom Only)</a></li></ul></li><li><a href="#next-steps" class="table-of-contents__link toc-highlight">Next Steps</a><ul><li><a href="#immediate-this-week" class="table-of-contents__link toc-highlight">Immediate (This Week)</a></li><li><a href="#short-term-next-2-weeks" class="table-of-contents__link toc-highlight">Short-Term (Next 2 Weeks)</a></li><li><a href="#long-term-poc-2" class="table-of-contents__link toc-highlight">Long-Term (POC 2+)</a></li></ul></li><li><a href="#related-documents" class="table-of-contents__link toc-highlight">Related Documents</a></li><li><a href="#appendix-a-code-examples" class="table-of-contents__link toc-highlight">Appendix A: Code Examples</a><ul><li><a href="#before-sdk-redis-plugin" class="table-of-contents__link toc-highlight">Before SDK (Redis Plugin)</a></li><li><a href="#after-sdk-redis-plugin" class="table-of-contents__link toc-highlight">After SDK (Redis Plugin)</a></li></ul></li><li><a href="#appendix-b-load-testing-example" class="table-of-contents__link toc-highlight">Appendix B: Load Testing Example</a><ul><li><a href="#pattern-level-test" class="table-of-contents__link toc-highlight">Pattern-Level Test</a></li><li><a href="#integration-level-test" class="table-of-contents__link toc-highlight">Integration-Level Test</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li><li><a href="#revision-history" class="table-of-contents__link toc-highlight">Revision History</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/intro">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/changelog">Change Log</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/adr">ADRs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/rfc">RFCs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/memos">Memos</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/prds">PRDs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Copyright © 2025 Prism. Built with Docusaurus.</div><div style="margin-top:0.5rem;font-size:0.875rem;opacity:0.8"><span>Version <!-- -->6f1f779</span><span> • </span><span>Built <!-- -->Oct 15, 2025, 02:30 PM PDT</span><span> • </span><span>Commit <!-- -->6f1f779</span></div></div></div></div></footer></div>
</body>
</html>