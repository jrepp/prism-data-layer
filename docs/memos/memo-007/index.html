<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-memos docs-version-current docs-doc-page docs-doc-id-memo-007" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Podman Demo for Scratch-Based Containers with Native Runtime | Prism</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jrepp.github.io/prism-data-layer/memos/memo-007"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-memos-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-memos-current"><meta data-rh="true" property="og:title" content="Podman Demo for Scratch-Based Containers with Native Runtime | Prism"><meta data-rh="true" name="description" content="Purpose"><meta data-rh="true" property="og:description" content="Purpose"><link data-rh="true" rel="icon" href="/prism-data-layer/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jrepp.github.io/prism-data-layer/memos/memo-007"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/memos/memo-007" hreflang="en"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/memos/memo-007" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Podman Demo for Scratch-Based Containers with Native Runtime • MEMO-007","item":"https://jrepp.github.io/prism-data-layer/memos/memo-007"}]}</script><link rel="stylesheet" href="/prism-data-layer/assets/css/styles.3b9928e7.css">
<script src="/prism-data-layer/assets/js/runtime~main.412b1aa9.js" defer="defer"></script>
<script src="/prism-data-layer/assets/js/main.cc925883.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/prism-data-layer/"><div class="navbar__logo"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">Prism</b></a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/intro">Overview</a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/changelog">Change Log</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/prism-data-layer/adr">ADRs (Architecture Decision Records)</a></li><li><a class="dropdown__link" href="/prism-data-layer/rfc">RFCs (Request for Comments)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/prism-data-layer/memos">Memos (Technical Analysis)</a></li><li><a class="dropdown__link" href="/prism-data-layer/prds">PRDs (Product Requirements)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="buildInfo_asc2"><span class="version_ADrX" title="Build: f057504">f057504</span><span class="separator_VfCt">•</span><span class="buildTime_n1Nn" title="Last updated: Oct 13, 2:39 PM PDT">Oct 13, 2:39 PM PDT</span></div><div class="navbar__item"><a href="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml" target="_blank" rel="noopener noreferrer" title="GitHub Pages" style="display: flex; align-items: center; padding: 0 0.5rem;"><img src="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml/badge.svg" alt="Build" style="margin: 0;"></a></div><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/"><span title="Technical Memos" class="linkLabel_WmDU">Technical Memos</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-001"><span title="WAL Full Transaction Flow with Authorization and Session Management • MEMO-001" class="linkLabel_WmDU">WAL Full Transaction Flow with Authorization and Session Management • MEMO-001</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-002"><span title="Admin Protocol Security Review and Improvements • MEMO-002" class="linkLabel_WmDU">Admin Protocol Security Review and Improvements • MEMO-002</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-003"><span title="Documentation-First Development Approach • MEMO-003" class="linkLabel_WmDU">Documentation-First Development Approach • MEMO-003</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-004"><span title="Backend Plugin Implementation Guide • MEMO-004" class="linkLabel_WmDU">Backend Plugin Implementation Guide • MEMO-004</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-005"><span title="Client Protocol Design Philosophy - Composition vs Use-Case Specificity • MEMO-005" class="linkLabel_WmDU">Client Protocol Design Philosophy - Composition vs Use-Case Specificity • MEMO-005</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-006"><span title="Backend Interface Decomposition and Schema Registry • MEMO-006" class="linkLabel_WmDU">Backend Interface Decomposition and Schema Registry • MEMO-006</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/prism-data-layer/memos/memo-007"><span title="Podman Demo for Scratch-Based Containers with Native Runtime • MEMO-007" class="linkLabel_WmDU">Podman Demo for Scratch-Based Containers with Native Runtime • MEMO-007</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-008"><span title="Vault Token Exchange Flow for Plugin Authentication • MEMO-008" class="linkLabel_WmDU">Vault Token Exchange Flow for Plugin Authentication • MEMO-008</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-009"><span title="Topaz Local Authorizer Configuration for Development and Integration Testing • MEMO-009" class="linkLabel_WmDU">Topaz Local Authorizer Configuration for Development and Integration Testing • MEMO-009</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-010"><span title="POC 1 Edge Case Analysis and Foundation Hardening • MEMO-010" class="linkLabel_WmDU">POC 1 Edge Case Analysis and Foundation Hardening • MEMO-010</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-011"><span title="Distributed Error Handling Best Practices • MEMO-011" class="linkLabel_WmDU">Distributed Error Handling Best Practices • MEMO-011</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-012"><span title="Developer Experience and Common Workflows • MEMO-012" class="linkLabel_WmDU">Developer Experience and Common Workflows • MEMO-012</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-013"><span title="POC 1 Infrastructure Analysis - SDK and Load Testing • MEMO-013" class="linkLabel_WmDU">POC 1 Infrastructure Analysis - SDK and Load Testing • MEMO-013</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-014"><span title="Pattern SDK Shared Complexity Analysis • MEMO-014" class="linkLabel_WmDU">Pattern SDK Shared Complexity Analysis • MEMO-014</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-015"><span title="Cross-Backend Acceptance Test Framework • MEMO-015" class="linkLabel_WmDU">Cross-Backend Acceptance Test Framework • MEMO-015</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-016"><span title="Observability and Lifecycle Implementation Summary • MEMO-016" class="linkLabel_WmDU">Observability and Lifecycle Implementation Summary • MEMO-016</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-017"><span title="Message Schema Configuration for Publish Slots • MEMO-017" class="linkLabel_WmDU">Message Schema Configuration for Publish Slots • MEMO-017</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-018"><span title="POC 4 Multicast Registry - Complete Summary • MEMO-018" class="linkLabel_WmDU">POC 4 Multicast Registry - Complete Summary • MEMO-018</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-019"><span title="Load Test Results - 100 req/sec Mixed Workload • MEMO-019" class="linkLabel_WmDU">Load Test Results - 100 req/sec Mixed Workload • MEMO-019</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-020"><span title="Parallel Testing Infrastructure and Build Hygiene Implementation • MEMO-020" class="linkLabel_WmDU">Parallel Testing Infrastructure and Build Hygiene Implementation • MEMO-020</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-021"><span title="Parallel Linting System for Multi-Language Monorepo • MEMO-021" class="linkLabel_WmDU">Parallel Linting System for Multi-Language Monorepo • MEMO-021</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/memo-022"><span title="Prismctl OIDC Integration Testing Requirements • MEMO-022" class="linkLabel_WmDU">Prismctl OIDC Integration Testing Requirements • MEMO-022</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/prism-data-layer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Podman Demo for Scratch-Based Containers with Native Runtime • MEMO-007</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="docMetadata_NQcq"><div class="tagsRow_ipDH"><span class="tag_VbXK">containers</span><span class="tag_VbXK">podman</span><span class="tag_VbXK">scratch</span><span class="tag_VbXK">demo</span><span class="tag_VbXK">runtime</span><span class="tag_VbXK">optimization</span><span class="tag_VbXK">patterns</span></div><div class="metadataRow_PvZM"><span class="metadataItem_RMFE"><strong>Author:</strong> <!-- -->Platform Team</span><span class="metadataItem_RMFE"><strong>Created:</strong> <!-- -->Oct 8, 2025</span><span class="metadataItem_RMFE"><strong>Updated:</strong> <!-- -->Oct 9, 2025</span></div></div><div class="theme-doc-markdown markdown"><header><h1>MEMO-007: Podman Demo for Scratch-Based Containers with Native Runtime</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h2>
<p>Demonstrate launching scratch-based containers built with Podman using native container runtime (not VMs), showcasing minimal container images for Prism components with fastest possible build-test cycle.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-scratch-based">What is Scratch-Based?<a href="#what-is-scratch-based" class="hash-link" aria-label="Direct link to What is Scratch-Based?" title="Direct link to What is Scratch-Based?" translate="no">​</a></h3>
<p><strong>Scratch</strong> is Docker&#x27;s most minimal base image - literally an empty filesystem. Containers built <code>FROM scratch</code> contain:</p>
<ul>
<li>Only your application binary</li>
<li>No shell, no package manager, no OS utilities</li>
<li>Smallest possible attack surface (~6MB for Prism proxy)</li>
<li>Fastest startup time (no OS overhead)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="why-podman">Why Podman?<a href="#why-podman" class="hash-link" aria-label="Direct link to Why Podman?" title="Direct link to Why Podman?" translate="no">​</a></h3>
<p><strong>Podman</strong> advantages over Docker:</p>
<ul>
<li><strong>Daemonless</strong>: No background service required</li>
<li><strong>Rootless</strong>: Run containers as non-root user</li>
<li><strong>Pod support</strong>: Kubernetes-compatible pod definitions</li>
<li><strong>Docker-compatible</strong>: Drop-in replacement for <code>docker</code> CLI</li>
<li><strong>No licensing restrictions</strong>: Fully open source (Apache 2.0)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="native-container-runtime">Native Container Runtime<a href="#native-container-runtime" class="hash-link" aria-label="Direct link to Native Container Runtime" title="Direct link to Native Container Runtime" translate="no">​</a></h3>
<p><strong>Key Insight</strong>: On Linux, containers run natively using kernel features (namespaces, cgroups). On macOS/Windows, a VM is unavoidable but we can optimize:</p>

























<table><thead><tr><th>Platform</th><th>Runtime</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Linux</strong></td><td>Native</td><td>Direct kernel features, instant startup</td></tr><tr><td><strong>macOS</strong></td><td>VM Required</td><td>Uses Hypervisor.framework (lightweight VM)</td></tr><tr><td><strong>Windows</strong></td><td>WSL2</td><td>Linux kernel in lightweight VM</td></tr></tbody></table>
<p><strong>Goal</strong>: Optimize for fastest build-test cycle using scratch images + Podman.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="demo-architecture">Demo Architecture<a href="#demo-architecture" class="hash-link" aria-label="Direct link to Demo Architecture" title="Direct link to Demo Architecture" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="prism-component-images">Prism Component Images<a href="#prism-component-images" class="hash-link" aria-label="Direct link to Prism Component Images" title="Direct link to Prism Component Images" translate="no">​</a></h3>
<p>Build three scratch-based images:</p>
<!-- -->
<p><strong>Three Demo Images</strong>:</p>
<ol>
<li><strong>prism-proxy</strong>: Rust proxy (~6MB)</li>
<li><strong>prism-redis</strong>: Go KeyValue implementation connecting to Redis backend (~10MB)</li>
<li><strong>prism-admin</strong>: Python admin service (~45MB, Alpine-based)</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-scratch-based-containerfiles">Implementation: Scratch-Based Containerfiles<a href="#implementation-scratch-based-containerfiles" class="hash-link" aria-label="Direct link to Implementation: Scratch-Based Containerfiles" title="Direct link to Implementation: Scratch-Based Containerfiles" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-prism-proxy-rust-scratch">1. Prism Proxy (Rust, Scratch)<a href="#1-prism-proxy-rust-scratch" class="hash-link" aria-label="Direct link to 1. Prism Proxy (Rust, Scratch)" title="Direct link to 1. Prism Proxy (Rust, Scratch)" translate="no">​</a></h3>
<p>Location: <code>proxy/Containerfile</code></p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build stage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM docker.io/library/rust:1.75-alpine AS builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install musl target for static linking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN rustup target add x86_64-unknown-linux-musl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY Cargo.toml Cargo.lock ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY src/ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build static binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cargo build --release --target x86_64-unknown-linux-musl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Runtime stage (scratch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy static binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --from=builder /build/target/x86_64-unknown-linux-musl/release/prism-proxy /prism-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Expose ports</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8980 8981</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRYPOINT [&quot;/prism-proxy&quot;]</span><br></span></code></pre></div></div>
<p><strong>Size</strong>: ~6MB (single static binary)
<strong>Startup</strong>: &lt;10ms</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-redis-keyvalue-implementation-go-scratch">2. Redis KeyValue Implementation (Go, Scratch)<a href="#2-redis-keyvalue-implementation-go-scratch" class="hash-link" aria-label="Direct link to 2. Redis KeyValue Implementation (Go, Scratch)" title="Direct link to 2. Redis KeyValue Implementation (Go, Scratch)" translate="no">​</a></h3>
<p>Location: <code>patterns/redis/Containerfile</code></p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Build stage</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM docker.io/library/golang:1.21-alpine AS builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy go mod files</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY go.mod go.sum ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN go mod download</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy source</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY . .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Build static binary with CGO disabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -ldflags=&quot;-w -s&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    -o /prism-redis \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ./cmd/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Runtime stage (scratch)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy CA certificates for HTTPS (if needed)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy static binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --from=builder /prism-redis /prism-redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Expose gRPC port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 9535</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENTRYPOINT [&quot;/prism-redis&quot;]</span><br></span></code></pre></div></div>
<p><strong>Size</strong>: ~10MB (includes CA certs)
<strong>Startup</strong>: &lt;20ms</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-admin-service-python-alpine-minimal">3. Admin Service (Python, Alpine-Minimal)<a href="#3-admin-service-python-alpine-minimal" class="hash-link" aria-label="Direct link to 3. Admin Service (Python, Alpine-Minimal)" title="Direct link to 3. Admin Service (Python, Alpine-Minimal)" translate="no">​</a></h3>
<p>Location: <code>admin/Containerfile</code></p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Python can&#x27;t run from scratch (needs libpython), use minimal Alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM docker.io/library/python:3.11-alpine AS builder</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Install build dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apk add --no-cache gcc musl-dev libffi-dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy requirements</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY requirements.txt ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN pip install --no-cache-dir --prefix=/install -r requirements.txt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Runtime stage (minimal Alpine)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM docker.io/library/python:3.11-alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy installed packages</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY --from=builder /install /usr/local</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy application</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY main.py /app/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY static/ /app/static/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WORKDIR /app</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Expose port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EXPOSE 8000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Run with uvicorn</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CMD [&quot;uvicorn&quot;, &quot;main:app&quot;, &quot;--host&quot;, &quot;0.0.0.0&quot;, &quot;--port&quot;, &quot;8000&quot;]</span><br></span></code></pre></div></div>
<p><strong>Size</strong>: ~45MB (Python + deps)
<strong>Startup</strong>: ~500ms</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-and-run-with-podman">Build and Run with Podman<a href="#build-and-run-with-podman" class="hash-link" aria-label="Direct link to Build and Run with Podman" title="Direct link to Build and Run with Podman" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="install-podman">Install Podman<a href="#install-podman" class="hash-link" aria-label="Direct link to Install Podman" title="Direct link to Install Podman" translate="no">​</a></h3>
<p><strong>Linux</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Debian/Ubuntu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">apt-get</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Fedora/RHEL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> dnf </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><br></span></code></pre></div></div>
<p><strong>macOS</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install via Homebrew</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Initialize Podman machine (lightweight VM)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> machine init </span><span class="token parameter variable" style="color:#36acaa">--cpus</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--memory</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">4096</span><span class="token plain"> --disk-size </span><span class="token number" style="color:#36acaa">50</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> machine start</span><br></span></code></pre></div></div>
<p><strong>Windows</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install via winget</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">winget </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> RedHat.Podman</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Or via Chocolatey</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">choco </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="build-demo-images">Build Demo Images<a href="#build-demo-images" class="hash-link" aria-label="Direct link to Build Demo Images" title="Direct link to Build Demo Images" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Build proxy (scratch-based, 6MB)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:scratch </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> proxy/Containerfile </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build KeyValue implementation (scratch-based, 10MB)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-redis:scratch </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> patterns/redis/Containerfile patterns/redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Build admin (Alpine-minimal, 45MB)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-admin:minimal </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> admin/Containerfile admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check image sizes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> images </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> prism</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OUTPUT:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># prism-proxy              scratch   &lt;image-id&gt;   6.2MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># prism-redis              scratch   &lt;image-id&gt;   10.1MB</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># prism-admin              minimal   &lt;image-id&gt;   45MB</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-containers">Run Containers<a href="#run-containers" class="hash-link" aria-label="Direct link to Run Containers" title="Direct link to Run Containers" translate="no">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-1-individual-containers">Option 1: Individual Containers<a href="#option-1-individual-containers" class="hash-link" aria-label="Direct link to Option 1: Individual Containers" title="Direct link to Option 1: Individual Containers" translate="no">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Run proxy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> prism-proxy </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8980</span><span class="token plain">:8980 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8981</span><span class="token plain">:8981 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prism-proxy:scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Run KeyValue implementation (connects to Redis backend)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> prism-redis </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9535</span><span class="token plain">:9535 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-e</span><span class="token plain"> </span><span class="token assign-left variable" style="color:#36acaa">REDIS_URL</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;redis://localhost:6379/0&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prism-redis:scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Run admin</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> prism-admin </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><span class="token plain">:8000 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  prism-admin:minimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check running containers</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ps</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="option-2-podman-pod-kubernetes-compatible">Option 2: Podman Pod (Kubernetes-compatible)<a href="#option-2-podman-pod-kubernetes-compatible" class="hash-link" aria-label="Direct link to Option 2: Podman Pod (Kubernetes-compatible)" title="Direct link to Option 2: Podman Pod (Kubernetes-compatible)" translate="no">​</a></h4>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># prism-pod.yaml</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">apiVersion</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> v1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">kind</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> Pod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">metadata</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prism</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">spec</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">containers</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost/prism</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">proxy</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8980</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8981</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> keyvalue</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost/prism</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">redis</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">9535</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> REDIS_URL</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">value</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;redis://redis:6379/0&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">image</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> localhost/prism</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">admin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">minimal</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">ports</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">containerPort</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8000</span><br></span></code></pre></div></div>
<p><strong>Run pod</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Create pod from YAML</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> play kube prism-pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check pod status</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> pod </span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Check container logs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> logs prism-stack-proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> logs prism-stack-keyvalue-redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> logs prism-stack-admin</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Stop and remove pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> pod stop prism-stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> pod </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> prism-stack</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="demo-script">Demo Script<a href="#demo-script" class="hash-link" aria-label="Direct link to Demo Script" title="Direct link to Demo Script" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="demo-1-build-and-size-comparison">Demo 1: Build and Size Comparison<a href="#demo-1-build-and-size-comparison" class="hash-link" aria-label="Direct link to Demo 1: Build and Size Comparison" title="Direct link to Demo 1: Build and Size Comparison" translate="no">​</a></h3>
<p><strong>Show image size reduction</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># demo-1-size-comparison.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Building Regular (Debian-based) Image ===&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:regular </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> proxy/Dockerfile.regular </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Building Scratch-Based Image ===&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:scratch </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> proxy/Containerfile </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Size Comparison ===&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Regular image:&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> images prism-proxy:regular </span><span class="token parameter variable" style="color:#36acaa">--format</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{{.Size}}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Scratch image:&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> images prism-proxy:scratch </span><span class="token parameter variable" style="color:#36acaa">--format</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;{{.Size}}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Reduction: </span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable builtin class-name" style="color:#36acaa">echo</span><span class="token string variable" style="color:#36acaa"> &quot;scale</span><span class="token string variable operator" style="color:#393A34">=</span><span class="token string variable number" style="color:#36acaa">1</span><span class="token string variable punctuation" style="color:#393A34">;</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable punctuation" style="color:#393A34">(</span><span class="token string variable punctuation" style="color:#393A34">$(</span><span class="token string variable" style="color:#36acaa">podman inspect prism-proxy:regular </span><span class="token string variable parameter variable" style="color:#36acaa">--format</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;{{.Size}}&#x27;</span><span class="token string variable punctuation" style="color:#393A34">)</span><span class="token string variable" style="color:#36acaa"> - </span><span class="token string variable punctuation" style="color:#393A34">$(</span><span class="token string variable" style="color:#36acaa">podman inspect prism-proxy:scratch </span><span class="token string variable parameter variable" style="color:#36acaa">--format</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;{{.Size}}&#x27;</span><span class="token string variable punctuation" style="color:#393A34">)</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> / </span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">podman</span><span class="token string variable" style="color:#36acaa"> inspect prism-proxy:regular </span><span class="token string variable parameter variable" style="color:#36acaa">--format</span><span class="token string variable" style="color:#36acaa"> </span><span class="token string variable string" style="color:#e3116c">&#x27;{{.Size}}&#x27;</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c"> * 100&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">bc</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">% </span><span class="token operator" style="color:#393A34">==</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">&quot;</span><br></span></code></pre></div></div>
<p><strong>Expected output</strong>:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Regular image: 127MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Scratch image: 6MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reduction: 95.3%</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="demo-2-startup-time-comparison">Demo 2: Startup Time Comparison<a href="#demo-2-startup-time-comparison" class="hash-link" aria-label="Direct link to Demo 2: Startup Time Comparison" title="Direct link to Demo 2: Startup Time Comparison" translate="no">​</a></h3>
<p><strong>Show startup time reduction</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># demo-2-startup-time.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Starting Regular Image ===&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> prism-proxy:regular </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Starting Scratch Image ===&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">time</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> prism-proxy:scratch </span><span class="token parameter variable" style="color:#36acaa">--version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;=== Startup Time Comparison ===&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Regular: ~150ms (OS init + binary)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Scratch: ~10ms (binary only)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="demo-3-full-stack-with-pod">Demo 3: Full Stack with Pod<a href="#demo-3-full-stack-with-pod" class="hash-link" aria-label="Direct link to Demo 3: Full Stack with Pod" title="Direct link to Demo 3: Full Stack with Pod" translate="no">​</a></h3>
<p><strong>Show complete Prism stack running in a pod</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># demo-3-full-stack.sh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Start Redis (using existing image)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> redis </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">6379</span><span class="token plain">:6379 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker.io/library/redis:7-alpine</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Wait for Redis</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Create and start Prism pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> play kube prism-pod.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Wait for services</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Test proxy health</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost:8980/health</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Test admin UI</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> http://localhost:8000/health</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Show logs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> logs prism-stack-proxy </span><span class="token parameter variable" style="color:#36acaa">--tail</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">10</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Cleanup</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> pod stop prism-stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> pod </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> prism-stack</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> stop redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">rm</span><span class="token plain"> redis</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="build-test-cycle-optimization">Build-Test Cycle Optimization<a href="#build-test-cycle-optimization" class="hash-link" aria-label="Direct link to Build-Test Cycle Optimization" title="Direct link to Build-Test Cycle Optimization" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="development-workflow">Development Workflow<a href="#development-workflow" class="hash-link" aria-label="Direct link to Development Workflow" title="Direct link to Development Workflow" translate="no">​</a></h3>
<p><strong>Goal</strong>: Instant feedback loop during development.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Watch for changes and rebuild</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">--squash</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:dev </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> proxy/Containerfile </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">--rm</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-p</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8980</span><span class="token plain">:8980 prism-proxy:dev </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># In another terminal: make changes to source</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Rebuild triggers automatically (using file watcher)</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="fast-iteration-tips">Fast Iteration Tips<a href="#fast-iteration-tips" class="hash-link" aria-label="Direct link to Fast Iteration Tips" title="Direct link to Fast Iteration Tips" translate="no">​</a></h3>
<ol>
<li>
<p><strong>Use Layer Caching</strong>:</p>
<div class="language-dockerfile codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-dockerfile codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Copy dependencies first (changes less often)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY Cargo.toml Cargo.lock ./</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cargo fetch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Copy source after (changes frequently)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY src/ src/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN cargo build --release</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Build in Parallel</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Build multiple images concurrently</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:scratch </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> proxy/Containerfile </span><span class="token builtin class-name">.</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-redis:scratch </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> patterns/redis/Containerfile patterns/redis </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">wait</span><br></span></code></pre></div></div>
</li>
<li>
<p><strong>Skip Tests During Dev Build</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Fast build (no tests)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build --build-arg </span><span class="token assign-left variable" style="color:#36acaa">SKIP_TESTS</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">true </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:dev </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Full build with tests</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:release </span><span class="token builtin class-name">.</span><br></span></code></pre></div></div>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-to-docker">Comparison to Docker<a href="#comparison-to-docker" class="hash-link" aria-label="Direct link to Comparison to Docker" title="Direct link to Comparison to Docker" translate="no">​</a></h2>













































<table><thead><tr><th>Feature</th><th>Podman</th><th>Docker</th></tr></thead><tbody><tr><td><strong>Daemonless</strong></td><td>✅ No daemon required</td><td>❌ Requires dockerd</td></tr><tr><td><strong>Rootless</strong></td><td>✅ Native rootless support</td><td>⚠️ Experimental</td></tr><tr><td><strong>Pod Support</strong></td><td>✅ Kubernetes-compatible pods</td><td>❌ Requires Compose</td></tr><tr><td><strong>CLI Compatibility</strong></td><td>✅ Drop-in replacement</td><td>N/A</td></tr><tr><td><strong>Image Format</strong></td><td>OCI standard</td><td>OCI + Docker format</td></tr><tr><td><strong>macOS Runtime</strong></td><td>Lightweight VM (Hypervisor.framework)</td><td>Docker Desktop VM</td></tr><tr><td><strong>Licensing</strong></td><td>Apache 2.0 (free)</td><td>Free + paid tiers</td></tr></tbody></table>
<p><strong>Recommendation</strong>: Use Podman for Prism development:</p>
<ul>
<li>No daemon overhead</li>
<li>Kubernetes-compatible pod definitions (easier transition to production)</li>
<li>Rootless by default (better security)</li>
<li>No licensing restrictions</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="native-runtime-reality-check">Native Runtime Reality Check<a href="#native-runtime-reality-check" class="hash-link" aria-label="Direct link to Native Runtime Reality Check" title="Direct link to Native Runtime Reality Check" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="linux-true-native">Linux: True Native<a href="#linux-true-native" class="hash-link" aria-label="Direct link to Linux: True Native" title="Direct link to Linux: True Native" translate="no">​</a></h3>
<p>On Linux, containers ARE processes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Start container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> run </span><span class="token parameter variable" style="color:#36acaa">-d</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--name</span><span class="token plain"> </span><span class="token builtin class-name">test</span><span class="token plain"> alpine </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># See process on host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sleep</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OUTPUT: Shows sleep process running on host</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Namespaces</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">sudo</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">-l</span><span class="token plain"> /proc/</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable function" style="color:#d73a49">podman</span><span class="token variable" style="color:#36acaa"> inspect </span><span class="token variable builtin class-name" style="color:#36acaa">test</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable parameter variable" style="color:#36acaa">--format</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&#x27;{{.State.Pid}}&#x27;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain">/ns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OUTPUT: Shows namespace isolation (mnt, net, pid, etc.)</span><br></span></code></pre></div></div>
<p><strong>Performance</strong>: Native process performance, no virtualization overhead.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="macos-lightweight-vm-required">macOS: Lightweight VM Required<a href="#macos-lightweight-vm-required" class="hash-link" aria-label="Direct link to macOS: Lightweight VM Required" title="Direct link to macOS: Lightweight VM Required" translate="no">​</a></h3>
<p>On macOS, containers run in a lightweight Linux VM:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Podman machine is a QEMU VM running Fedora CoreOS</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> machine </span><span class="token function" style="color:#d73a49">ssh</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Inside VM: see containers running as native Linux processes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">ps</span><span class="token plain"> aux </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">grep</span><span class="token plain"> prism-proxy</span><br></span></code></pre></div></div>
<p><strong>Reality</strong>:</p>
<ul>
<li>VM startup: ~5-10 seconds (one-time cost)</li>
<li>Container startup: &lt;10ms (once VM is running)</li>
<li>No VM overhead per-container (all share same VM)</li>
</ul>
<p><strong>Optimization</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Pre-start Podman machine</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> machine start</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Keep machine running (don&#x27;t stop between sessions)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> machine </span><span class="token builtin class-name">set</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--rootful</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">false </span><span class="token parameter variable" style="color:#36acaa">--cpus</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4</span><span class="token plain"> </span><span class="token parameter variable" style="color:#36acaa">--memory</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">4096</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-macos-container-runtimes">Comparison: macOS Container Runtimes<a href="#comparison-macos-container-runtimes" class="hash-link" aria-label="Direct link to Comparison: macOS Container Runtimes" title="Direct link to Comparison: macOS Container Runtimes" translate="no">​</a></h3>

































<table><thead><tr><th>Runtime</th><th>VM Type</th><th>Startup</th><th>Memory</th><th>Disk</th></tr></thead><tbody><tr><td><strong>Podman Machine</strong></td><td>QEMU (Fedora CoreOS)</td><td>~8s</td><td>2-4GB</td><td>10-20GB</td></tr><tr><td><strong>Docker Desktop</strong></td><td>Hypervisor.framework</td><td>~10s</td><td>2-6GB</td><td>20-60GB</td></tr><tr><td><strong>Rancher Desktop</strong></td><td>Lima VM</td><td>~12s</td><td>2-4GB</td><td>10-20GB</td></tr></tbody></table>
<p><strong>Winner</strong>: Podman Machine (lightest, fastest)</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="production-considerations">Production Considerations<a href="#production-considerations" class="hash-link" aria-label="Direct link to Production Considerations" title="Direct link to Production Considerations" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="building-for-production">Building for Production<a href="#building-for-production" class="hash-link" aria-label="Direct link to Building for Production" title="Direct link to Building for Production" translate="no">​</a></h3>
<p><strong>Multi-architecture builds</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Build for AMD64 and ARM64</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> build </span><span class="token parameter variable" style="color:#36acaa">--platform</span><span class="token plain"> linux/amd64,linux/arm64 </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-t</span><span class="token plain"> prism-proxy:scratch </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">--manifest</span><span class="token plain"> prism-proxy:latest </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> proxy/Containerfile </span><span class="token builtin class-name">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Push manifest to registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> manifest push prism-proxy:latest </span><span class="token punctuation" style="color:#393A34">\</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  docker://registry.example.com/prism-proxy:latest</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="security-scanning">Security Scanning<a href="#security-scanning" class="hash-link" aria-label="Direct link to Security Scanning" title="Direct link to Security Scanning" translate="no">​</a></h3>
<p><strong>Scan scratch images</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Install trivy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew </span><span class="token function" style="color:#d73a49">install</span><span class="token plain"> aquasecurity/trivy/trivy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Scan scratch image</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trivy image prism-proxy:scratch</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># OUTPUT: Minimal vulnerabilities (only your binary)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># No OS packages = no CVEs</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes-deployment">Kubernetes Deployment<a href="#kubernetes-deployment" class="hash-link" aria-label="Direct link to Kubernetes Deployment" title="Direct link to Kubernetes Deployment" translate="no">​</a></h3>
<p>Podman pod YAML is Kubernetes-compatible:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Generate Kubernetes YAML from running pod</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">podman</span><span class="token plain"> generate kube prism-stack </span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"> prism-k8s.yaml</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Deploy to Kubernetes</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kubectl apply </span><span class="token parameter variable" style="color:#36acaa">-f</span><span class="token plain"> prism-k8s.yaml</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="benefits-summary">Benefits Summary<a href="#benefits-summary" class="hash-link" aria-label="Direct link to Benefits Summary" title="Direct link to Benefits Summary" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="scratch-based-images">Scratch-Based Images<a href="#scratch-based-images" class="hash-link" aria-label="Direct link to Scratch-Based Images" title="Direct link to Scratch-Based Images" translate="no">​</a></h3>
<p><strong>Advantages</strong>:</p>
<ul>
<li>✅ <strong>Tiny size</strong>: 6MB vs 127MB (95% reduction)</li>
<li>✅ <strong>Fast startup</strong>: &lt;10ms vs ~150ms</li>
<li>✅ <strong>Minimal attack surface</strong>: No OS packages, no vulnerabilities</li>
<li>✅ <strong>Fast pulls</strong>: 6MB downloads in &lt;1 second on fast networks</li>
<li>✅ <strong>Lower costs</strong>: Smaller registry storage, faster CI/CD</li>
</ul>
<p><strong>Tradeoffs</strong>:</p>
<ul>
<li>❌ <strong>No shell</strong>: Can&#x27;t <code>podman exec -it &lt;container&gt; /bin/sh</code> for debugging</li>
<li>❌ <strong>No utils</strong>: No <code>curl</code>, <code>wget</code>, <code>ps</code>, etc. inside container</li>
<li>❌ <strong>Static linking required</strong>: Must compile with musl (Rust) or CGO_ENABLED=0 (Go)</li>
</ul>
<p><strong>Mitigation</strong>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Use debug variant for troubleshooting</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM scratch AS release</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY </span><span class="token parameter variable" style="color:#36acaa">--from</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">builder /binary /binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">FROM alpine:3.18 AS debug</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">COPY </span><span class="token parameter variable" style="color:#36acaa">--from</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">builder /binary /binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">RUN apk </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> --no-cache </span><span class="token function" style="color:#d73a49">curl</span><span class="token plain"> busybox</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="podman">Podman<a href="#podman" class="hash-link" aria-label="Direct link to Podman" title="Direct link to Podman" translate="no">​</a></h3>
<p><strong>Advantages</strong>:</p>
<ul>
<li>✅ <strong>Daemonless</strong>: No background service (lower resource usage)</li>
<li>✅ <strong>Rootless</strong>: Better security posture</li>
<li>✅ <strong>Kubernetes-compatible</strong>: Pod definitions work in K8s</li>
<li>✅ <strong>Drop-in replacement</strong>: <code>alias docker=podman</code> works for most cases</li>
<li>✅ <strong>No licensing</strong>: Fully open source</li>
</ul>
<p><strong>Tradeoffs</strong>:</p>
<ul>
<li>⚠️ <strong>macOS requires VM</strong>: Not truly native (but optimized)</li>
<li>⚠️ <strong>Ecosystem</strong>: Some Docker Compose features not fully compatible</li>
<li>⚠️ <strong>Tooling</strong>: Some CI/CD tools assume Docker</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-documents">Related Documents<a href="#related-documents" class="hash-link" aria-label="Direct link to Related Documents" title="Direct link to Related Documents" translate="no">​</a></h2>
<ul>
<li><a href="/prism-data-layer/adr/adr-049">ADR-049: Podman Container Optimization</a> - Decision to use Podman</li>
<li><a href="/prism-data-layer/adr/adr-026">ADR-026: Distroless Container Images</a> - Alternative to scratch</li>
<li><a href="/prism-data-layer/memos/memo-004">MEMO-004: Backend Plugin Implementation Guide</a> - Backend implementation guide</li>
<li><a href="/prism-data-layer/memos/memo-006">MEMO-006: Backend Interface Decomposition and Schema Registry</a> - Pattern vs backend distinction (patterns like multicast-registry coordinate multiple backends)</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="revision-history">Revision History<a href="#revision-history" class="hash-link" aria-label="Direct link to Revision History" title="Direct link to Revision History" translate="no">​</a></h2>
<ul>
<li>2025-10-10: Updated terminology - Redis is a backend, not a pattern. Changed example from Postgres to Redis KeyValue implementation. Clarified that patterns (like multicast-registry) coordinate multiple backends to provide higher-level solutions.</li>
<li>2025-10-09: Initial draft covering Podman + scratch containers with native runtime demo</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/containers">containers</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/podman">podman</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/scratch">scratch</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/demo">demo</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/runtime">runtime</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/optimization">optimization</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/patterns">patterns</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jrepp/prism-data-layer/tree/main/docs-cms/../docs-cms/memos/memo-007-podman-scratch-container-demo.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/prism-data-layer/memos/memo-006"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Backend Interface Decomposition and Schema Registry • MEMO-006</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/prism-data-layer/memos/memo-008"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Vault Token Exchange Flow for Plugin Authentication • MEMO-008</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a><ul><li><a href="#what-is-scratch-based" class="table-of-contents__link toc-highlight">What is Scratch-Based?</a></li><li><a href="#why-podman" class="table-of-contents__link toc-highlight">Why Podman?</a></li><li><a href="#native-container-runtime" class="table-of-contents__link toc-highlight">Native Container Runtime</a></li></ul></li><li><a href="#demo-architecture" class="table-of-contents__link toc-highlight">Demo Architecture</a><ul><li><a href="#prism-component-images" class="table-of-contents__link toc-highlight">Prism Component Images</a></li></ul></li><li><a href="#implementation-scratch-based-containerfiles" class="table-of-contents__link toc-highlight">Implementation: Scratch-Based Containerfiles</a><ul><li><a href="#1-prism-proxy-rust-scratch" class="table-of-contents__link toc-highlight">1. Prism Proxy (Rust, Scratch)</a></li><li><a href="#2-redis-keyvalue-implementation-go-scratch" class="table-of-contents__link toc-highlight">2. Redis KeyValue Implementation (Go, Scratch)</a></li><li><a href="#3-admin-service-python-alpine-minimal" class="table-of-contents__link toc-highlight">3. Admin Service (Python, Alpine-Minimal)</a></li></ul></li><li><a href="#build-and-run-with-podman" class="table-of-contents__link toc-highlight">Build and Run with Podman</a><ul><li><a href="#install-podman" class="table-of-contents__link toc-highlight">Install Podman</a></li><li><a href="#build-demo-images" class="table-of-contents__link toc-highlight">Build Demo Images</a></li><li><a href="#run-containers" class="table-of-contents__link toc-highlight">Run Containers</a></li></ul></li><li><a href="#demo-script" class="table-of-contents__link toc-highlight">Demo Script</a><ul><li><a href="#demo-1-build-and-size-comparison" class="table-of-contents__link toc-highlight">Demo 1: Build and Size Comparison</a></li><li><a href="#demo-2-startup-time-comparison" class="table-of-contents__link toc-highlight">Demo 2: Startup Time Comparison</a></li><li><a href="#demo-3-full-stack-with-pod" class="table-of-contents__link toc-highlight">Demo 3: Full Stack with Pod</a></li></ul></li><li><a href="#build-test-cycle-optimization" class="table-of-contents__link toc-highlight">Build-Test Cycle Optimization</a><ul><li><a href="#development-workflow" class="table-of-contents__link toc-highlight">Development Workflow</a></li><li><a href="#fast-iteration-tips" class="table-of-contents__link toc-highlight">Fast Iteration Tips</a></li></ul></li><li><a href="#comparison-to-docker" class="table-of-contents__link toc-highlight">Comparison to Docker</a></li><li><a href="#native-runtime-reality-check" class="table-of-contents__link toc-highlight">Native Runtime Reality Check</a><ul><li><a href="#linux-true-native" class="table-of-contents__link toc-highlight">Linux: True Native</a></li><li><a href="#macos-lightweight-vm-required" class="table-of-contents__link toc-highlight">macOS: Lightweight VM Required</a></li><li><a href="#comparison-macos-container-runtimes" class="table-of-contents__link toc-highlight">Comparison: macOS Container Runtimes</a></li></ul></li><li><a href="#production-considerations" class="table-of-contents__link toc-highlight">Production Considerations</a><ul><li><a href="#building-for-production" class="table-of-contents__link toc-highlight">Building for Production</a></li><li><a href="#security-scanning" class="table-of-contents__link toc-highlight">Security Scanning</a></li><li><a href="#kubernetes-deployment" class="table-of-contents__link toc-highlight">Kubernetes Deployment</a></li></ul></li><li><a href="#benefits-summary" class="table-of-contents__link toc-highlight">Benefits Summary</a><ul><li><a href="#scratch-based-images" class="table-of-contents__link toc-highlight">Scratch-Based Images</a></li><li><a href="#podman" class="table-of-contents__link toc-highlight">Podman</a></li></ul></li><li><a href="#related-documents" class="table-of-contents__link toc-highlight">Related Documents</a></li><li><a href="#revision-history" class="table-of-contents__link toc-highlight">Revision History</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/intro">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/changelog">Change Log</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/adr">ADRs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/rfc">RFCs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/memos">Memos</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/prds">PRDs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Copyright © 2025 Prism. Built with Docusaurus.</div><div style="margin-top:0.5rem;font-size:0.875rem;opacity:0.8"><span>Version <!-- -->f057504</span><span> • </span><span>Built <!-- -->Oct 13, 2025, 02:39 PM PDT</span><span> • </span><span>Commit <!-- -->f057504</span></div></div></div></div></footer></div>
</body>
</html>