<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-memos docs-version-current docs-doc-page docs-doc-id-memo-005" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.1">
<title data-rh="true">Client Protocol Design Philosophy - Composition vs Use-Case Specificity | Prism</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://jrepp.github.io/prism-data-layer/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://jrepp.github.io/prism-data-layer/memos/memo-005"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-memos-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-memos-current"><meta data-rh="true" property="og:title" content="Client Protocol Design Philosophy - Composition vs Use-Case Specificity | Prism"><meta data-rh="true" name="description" content="Purpose"><meta data-rh="true" property="og:description" content="Purpose"><link data-rh="true" rel="icon" href="/prism-data-layer/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://jrepp.github.io/prism-data-layer/memos/memo-005"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/memos/memo-005" hreflang="en"><link data-rh="true" rel="alternate" href="https://jrepp.github.io/prism-data-layer/memos/memo-005" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Client Protocol Design Philosophy - Composition vs Use-Case Specificity • MEMO-005","item":"https://jrepp.github.io/prism-data-layer/memos/memo-005"}]}</script><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,user-scalable=yes">
<meta name="theme-color" content="#6366f1">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><link rel="stylesheet" href="/prism-data-layer/assets/css/styles.73adf43b.css">
<script src="/prism-data-layer/assets/js/runtime~main.536bf354.js" defer="defer"></script>
<script src="/prism-data-layer/assets/js/main.50718b31.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/prism-data-layer/"><div class="navbar__logo"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--light_NVdE" height="32" width="32"><img src="/prism-data-layer/img/prism-logo-transparent-background.png" alt="Prism Data Gateway Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU" height="32" width="32"></div><b class="navbar__title text--truncate">Prism</b></a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/intro">Overview</a><a class="navbar__item navbar__link" href="/prism-data-layer/docs/changelog">Change Log</a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Documentation</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/prism-data-layer/adr">ADRs (Architecture Decision Records)</a></li><li><a class="dropdown__link" href="/prism-data-layer/rfc">RFCs (Request for Comments)</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/prism-data-layer/memos">Memos (Technical Analysis)</a></li><li><a class="dropdown__link" href="/prism-data-layer/prds">PRDs (Product Requirements)</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="buildInfo_asc2"><span class="version_ADrX" title="Build: f173b29">f173b29</span><span class="separator_VfCt">•</span><span class="buildTime_n1Nn" title="Last updated: Oct 14, 1:37 AM PDT">Oct 14, 1:37 AM PDT</span></div><div class="navbar__item"><a href="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml" target="_blank" rel="noopener noreferrer" title="GitHub Pages" style="display: flex; align-items: center; padding: 0 0.5rem;"><img src="https://github.com/jrepp/prism-data-layer/actions/workflows/docs.yml/badge.svg" alt="Build" style="margin: 0;"></a></div><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_x44X"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search searchBarContainer_NW3z" dir="ltr"><input placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_YFbd" value=""><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/prism-data-layer/memos/"><span title="Technical Memos" class="linkLabel_WmDU">Technical Memos</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/prism-data-layer/memos/memo-001"><span title="MEMO-001 to 010" class="categoryLinkLabel_W154">MEMO-001 to 010</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-001"><span title="WAL Full Transaction Flow with Authorization and Session Management • MEMO-001" class="linkLabel_WmDU">WAL Full Transaction Flow with Authorization and Session Management • MEMO-001</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-002"><span title="Admin Protocol Security Review and Improvements • MEMO-002" class="linkLabel_WmDU">Admin Protocol Security Review and Improvements • MEMO-002</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-003"><span title="Documentation-First Development Approach • MEMO-003" class="linkLabel_WmDU">Documentation-First Development Approach • MEMO-003</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-004"><span title="Backend Plugin Implementation Guide • MEMO-004" class="linkLabel_WmDU">Backend Plugin Implementation Guide • MEMO-004</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/prism-data-layer/memos/memo-005"><span title="Client Protocol Design Philosophy - Composition vs Use-Case Specificity • MEMO-005" class="linkLabel_WmDU">Client Protocol Design Philosophy - Composition vs Use-Case Specificity • MEMO-005</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-006"><span title="Backend Interface Decomposition and Schema Registry • MEMO-006" class="linkLabel_WmDU">Backend Interface Decomposition and Schema Registry • MEMO-006</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-007"><span title="Podman Demo for Scratch-Based Containers with Native Runtime • MEMO-007" class="linkLabel_WmDU">Podman Demo for Scratch-Based Containers with Native Runtime • MEMO-007</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-008"><span title="Vault Token Exchange Flow for Plugin Authentication • MEMO-008" class="linkLabel_WmDU">Vault Token Exchange Flow for Plugin Authentication • MEMO-008</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-009"><span title="Topaz Local Authorizer Configuration for Development and Integration Testing • MEMO-009" class="linkLabel_WmDU">Topaz Local Authorizer Configuration for Development and Integration Testing • MEMO-009</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/prism-data-layer/memos/memo-010"><span title="POC 1 Edge Case Analysis and Foundation Hardening • MEMO-010" class="linkLabel_WmDU">POC 1 Edge Case Analysis and Foundation Hardening • MEMO-010</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/prism-data-layer/memos/memo-011"><span title="MEMO-011 to 020" class="categoryLinkLabel_W154">MEMO-011 to 020</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/prism-data-layer/memos/memo-021"><span title="MEMO-021 to 030" class="categoryLinkLabel_W154">MEMO-021 to 030</span></a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_z5aJ"><div class="docItemContainer_c0TR"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/prism-data-layer/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">MEMO-001 to 010</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Client Protocol Design Philosophy - Composition vs Use-Case Specificity • MEMO-005</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="docMetadata_NQcq"><div class="tagsRow_ipDH"><span class="tag_VbXK">api-design</span><span class="tag_VbXK">patterns</span><span class="tag_VbXK">developer-experience</span><span class="tag_VbXK">architecture</span><span class="tag_VbXK">evolution</span></div><div class="metadataRow_PvZM"><span class="metadataItem_RMFE"><strong>Author:</strong> <!-- -->Platform Team</span><span class="metadataItem_RMFE"><strong>Created:</strong> <!-- -->Oct 8, 2025</span><span class="metadataItem_RMFE"><strong>Updated:</strong> <!-- -->Oct 8, 2025</span></div></div><div class="theme-doc-markdown markdown"><header><h1>MEMO-005: Client Protocol Design Philosophy</h1></header>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="purpose">Purpose<a href="#purpose" class="hash-link" aria-label="Direct link to Purpose" title="Direct link to Purpose" translate="no">​</a></h2>
<p>Resolve the architectural tension between:</p>
<ul>
<li><strong>Composable primitives</strong> (RFC-014: KeyValue, PubSub, Queue) - generic, reusable, small API surface</li>
<li><strong>Use-case-specific protocols</strong> (RFC-017: Multicast Registry) - ergonomic, self-documenting, purpose-built</li>
</ul>
<p><strong>Core Question</strong>: Should Prism offer one protobuf service per use case (IoT, presence, service discovery) or force applications to compose generic primitives?</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="context">Context<a href="#context" class="hash-link" aria-label="Direct link to Context" title="Direct link to Context" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rfc-014-layered-data-access-patterns-composable-approach">RFC-014: Layered Data Access Patterns (Composable Approach)<a href="#rfc-014-layered-data-access-patterns-composable-approach" class="hash-link" aria-label="Direct link to RFC-014: Layered Data Access Patterns (Composable Approach)" title="Direct link to RFC-014: Layered Data Access Patterns (Composable Approach)" translate="no">​</a></h3>
<p><strong>Defines 6 generic patterns</strong>:</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">KeyValueService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SetRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SetResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Get</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GetRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">GetResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Delete</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">DeleteRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">DeleteResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Scan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">ScanRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">stream</span><span class="token plain"> </span><span class="token class-name">ScanResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">PubSubService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">PublishRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">PublishResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Subscribe</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SubscribeRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">stream</span><span class="token plain"> </span><span class="token class-name">Message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Application must compose</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># IoT device management - application composes primitives</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keyvalue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;device:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation builtin">id</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> metadata</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Registry</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keyvalue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;device:*&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># Enumerate</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pubsub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;commands&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">     </span><span class="token comment" style="color:#999988;font-style:italic"># Broadcast</span><br></span></code></pre></div></div>
<p><strong>Benefits</strong>:</p>
<ul>
<li>✅ Small API surface (6 services)</li>
<li>✅ Reusable across use cases</li>
<li>✅ Easy to implement in proxy</li>
<li>✅ Schema evolution is localized</li>
</ul>
<p><strong>Drawbacks</strong>:</p>
<ul>
<li>❌ Application must understand composition</li>
<li>❌ Boilerplate code for common patterns</li>
<li>❌ No semantic guarantees (e.g., registry consistency)</li>
<li>❌ Steep learning curve</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rfc-017-multicast-registry-use-case-specific-approach">RFC-017: Multicast Registry (Use-Case-Specific Approach)<a href="#rfc-017-multicast-registry-use-case-specific-approach" class="hash-link" aria-label="Direct link to RFC-017: Multicast Registry (Use-Case-Specific Approach)" title="Direct link to RFC-017: Multicast Registry (Use-Case-Specific Approach)" translate="no">​</a></h3>
<p><strong>Defines purpose-built API</strong>:</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">MulticastRegistryService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RegisterRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RegisterResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">EnumerateRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">EnumerateResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Multicast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MulticastRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">MulticastResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<p><strong>Application uses clear semantics</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># IoT device management - clear intent</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    identity</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;device-123&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    metadata</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sensor&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;building-a&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token builtin">enumerate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">filter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;location&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;building-a&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">result </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">multicast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">filter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;type&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;sensor&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    message</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token string" style="color:#e3116c">&quot;command&quot;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;read_temperature&quot;</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre></div></div>
<p><strong>Benefits</strong>:</p>
<ul>
<li>✅ Self-documenting (clear purpose)</li>
<li>✅ Less boilerplate</li>
<li>✅ Semantic guarantees (coordinated registry + messaging)</li>
<li>✅ Easier for application developers</li>
</ul>
<p><strong>Drawbacks</strong>:</p>
<ul>
<li>❌ API proliferation (one service per use case?)</li>
<li>❌ More code in proxy (20+ services?)</li>
<li>❌ Schema evolution harder (changes affect specific use cases)</li>
<li>❌ Duplication across similar patterns</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="design-principles">Design Principles<a href="#design-principles" class="hash-link" aria-label="Direct link to Design Principles" title="Direct link to Design Principles" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-push-complexity-down-from-application-developers--primary">1. Push Complexity Down from Application Developers ⭐ <strong>PRIMARY</strong><a href="#1-push-complexity-down-from-application-developers--primary" class="hash-link" aria-label="Direct link to 1-push-complexity-down-from-application-developers--primary" title="Direct link to 1-push-complexity-down-from-application-developers--primary" translate="no">​</a></h3>
<p><strong>Goal</strong>: Developers shouldn&#x27;t need to understand distributed systems internals.</p>
<p><strong>Implications</strong>:</p>
<ul>
<li>✅ Favor use-case-specific APIs (e.g., Multicast Registry)</li>
<li>✅ Hide coordination complexity (e.g., keeping registry + pub/sub consistent)</li>
<li>✅ Provide semantic guarantees (e.g., &quot;multicast delivers to all registered&quot;)</li>
<li>❌ Avoid forcing developers to compose primitives manually</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># BAD: Application must coordinate registry + pub/sub</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">devices </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">keyvalue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">scan</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;device:*&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">for</span><span class="token plain"> device </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> devices</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">pubsub</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">publish</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string-interpolation string" style="color:#e3116c">f&quot;device:</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">{</span><span class="token string-interpolation interpolation">device</span><span class="token string-interpolation interpolation punctuation" style="color:#393A34">}</span><span class="token string-interpolation string" style="color:#e3116c">&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Problem: Race condition if device registers between scan and publish</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># GOOD: Prism coordinates atomically</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">await</span><span class="token plain"> client</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">multicast</span><span class="token punctuation" style="color:#393A34">(</span><span class="token builtin">filter</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message</span><span class="token operator" style="color:#393A34">=</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Prism guarantees atomicity: enumerate + fan-out</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-developer-comprehension-and-usability--primary">2. Developer Comprehension and Usability ⭐ <strong>PRIMARY</strong><a href="#2-developer-comprehension-and-usability--primary" class="hash-link" aria-label="Direct link to 2-developer-comprehension-and-usability--primary" title="Direct link to 2-developer-comprehension-and-usability--primary" translate="no">​</a></h3>
<p><strong>Goal</strong>: APIs should be immediately understandable without deep documentation.</p>
<p><strong>Implications</strong>:</p>
<ul>
<li>✅ Favor self-documenting method names (<code>register</code>, <code>enumerate</code>, <code>multicast</code>)</li>
<li>✅ Provide rich error messages</li>
<li>✅ Include use-case examples in docs</li>
<li>❌ Avoid generic terms requiring mental mapping (e.g., &quot;put into keyvalue to register&quot;)</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// CLEAR: Purpose obvious from name</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Register</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RegisterRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">RegisterResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// UNCLEAR: What am I setting? Why?</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">Set</span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SetRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">SetResponse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-schema-and-service-evolution">3. Schema and Service Evolution<a href="#3-schema-and-service-evolution" class="hash-link" aria-label="Direct link to 3. Schema and Service Evolution" title="Direct link to 3. Schema and Service Evolution" translate="no">​</a></h3>
<p><strong>Goal</strong>: Add features without breaking existing clients.</p>
<p><strong>Implications</strong>:</p>
<ul>
<li>✅ Fewer services = fewer breaking changes (favor composition)</li>
<li>✅ Backward-compatible field additions</li>
<li>⚠️ Use-case-specific services are easier to version independently</li>
<li>❌ Changing generic primitive affects many use cases</li>
</ul>
<p><strong>Example</strong>:</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// Adding feature to MulticastRegistry: localized impact</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">message</span><span class="token plain"> </span><span class="token class-name">RegisterRequest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> identity </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token map class-name">map</span><span class="token map class-name punctuation" style="color:#393A34">&lt;</span><span class="token map class-name builtin">string</span><span class="token map class-name punctuation" style="color:#393A34">,</span><span class="token map class-name"> Value</span><span class="token map class-name punctuation" style="color:#393A34">&gt;</span><span class="token plain"> metadata </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">optional</span><span class="token plain"> </span><span class="token builtin">int64</span><span class="token plain"> ttl_seconds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// NEW: backward compatible</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// Adding feature to KeyValue: affects ALL use cases</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">message</span><span class="token plain"> </span><span class="token class-name">SetRequest</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">string</span><span class="token plain"> key </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token builtin">bytes</span><span class="token plain"> value </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">optional</span><span class="token plain"> </span><span class="token builtin">int64</span><span class="token plain"> ttl_seconds </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// NEW: breaks IoT, presence, etc.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-keep-proxy-small-and-tight">4. Keep Proxy Small and Tight<a href="#4-keep-proxy-small-and-tight" class="hash-link" aria-label="Direct link to 4. Keep Proxy Small and Tight" title="Direct link to 4. Keep Proxy Small and Tight" translate="no">​</a></h3>
<p><strong>Goal</strong>: Minimize proxy complexity and resource footprint.</p>
<p><strong>Implications</strong>:</p>
<ul>
<li>✅ Favor generic primitives (fewer service implementations)</li>
<li>✅ Pattern coordinators can be plugins (not in core proxy)</li>
<li>⚠️ Use-case services increase code size</li>
<li>❌ Too many services = maintenance burden</li>
</ul>
<p><strong>Example</strong>:
Proxy with 6 generic services: ~10k LOC, 50MB binary
Proxy with 20 use-case services: ~40k LOC, 150MB binary</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Proposed Solution: Layered API Architecture</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Insight**: We don&#x27;t have to choose! Provide **both layers** with clear separation.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### Layer 1: Primitives (Generic, Always Available)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Six core primitives** (RFC-014):</span><br></span></code></pre></div></div>
<p>service KeyValueService { ... }
service PubSubService { ... }
service QueueService { ... }
service TimeSeriesService { ... }
service GraphService { ... }
service TransactionalService { ... }</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Characteristics**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ Always available (core proxy functionality)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ Stable API (rarely changes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ Generic (works for any use case)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ❌ Requires composition knowledge</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Target Users**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Advanced developers building custom patterns</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Performance-critical applications (direct control)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Unusual use cases not covered by Layer 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### Layer 2: Patterns (Use-Case-Specific, Opt-In)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Purpose-built patterns** (RFC-017, plus more):</span><br></span></code></pre></div></div>
<p>service MulticastRegistryService { ... }  // IoT, presence, service discovery
service SagaService { ... }               // Distributed transactions
service EventSourcingService { ... }      // Audit trails, event log
service WorkQueueService { ... }          // Background jobs
service CacheAsideService { ... }         // Read-through cache</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Characteristics**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ Self-documenting (clear purpose)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ Semantic guarantees (coordinated operations)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ Less boilerplate (ergonomic APIs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ⚠️ Implemented as **pattern coordinators** (plugins, not core)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Target Users**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Most application developers (80% of use cases)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Teams prioritizing velocity over control</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Developers new to distributed systems</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### Implementation Strategy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#### Pattern Coordinators Live in Plugins, Not Core Proxy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌───────────────────────  ──────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│                   Prism Proxy (Core)                    │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌──────────────────────────────────────────────────┐   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  Layer 1: Primitives (Always Available)          │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - KeyValueService                               │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - PubSubService                                 │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - QueueService                                  │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │  - (3 more...)                                   │   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └──────────────────────────────────────────────────┘   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└─────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         │ gRPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌────────────────────────▼─────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│           Pattern Coordinator Plugins (Opt-In)           │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌────────────────────┐  ┌────────────────────────┐     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Multicast Registry │  │  Saga Coordinator      │     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ (RFC-017)          │  │  (Distributed Txn)     │     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └────────────────────┘  └────────────────────────┘     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  ┌────────────────────┐  ┌────────────────────────┐     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ Event Sourcing     │  │  Cache Aside           │     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  │ (Append Log)       │  │  (Read-Through)        │     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  └────────────────────┘  └────────────────────────┘     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────────────────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         │ Uses Layer 1 APIs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                         ▼</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                 (Composes primitives)</span><br></span></code></pre></div></div>
<p><strong>Benefits</strong>:</p>
<ul>
<li>✅ Core proxy stays small (~10k LOC)</li>
<li>✅ Pattern plugins are optional (install only what you use)</li>
<li>✅ Independent evolution (update registry plugin without touching core)</li>
<li>✅ Community can contribute patterns (not just core team)</li>
</ul>
<p><strong>Configuration</strong>:</p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">namespaces</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> iot</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">devices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Option A: Use primitive (advanced)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> keyvalue</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">backend</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> iot</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">commands</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Option B: Use pattern coordinator (ergonomic)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">pattern</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> multicast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">coordinator_plugin</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> prism</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">multicast</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">v1.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">backend_slots</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">registry</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> redis</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">messaging</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">type</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> nats</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="decision-matrix">Decision Matrix<a href="#decision-matrix" class="hash-link" aria-label="Direct link to Decision Matrix" title="Direct link to Decision Matrix" translate="no">​</a></h2>





















































<table><thead><tr><th>Concern</th><th>Primitives (Layer 1)</th><th>Patterns (Layer 2)</th><th>Layered Approach</th></tr></thead><tbody><tr><td><strong>Developer Complexity</strong></td><td>❌ High (must compose)</td><td>✅ Low (ergonomic)</td><td>✅ Choice per use case</td></tr><tr><td><strong>API Clarity</strong></td><td>⚠️ Generic terms</td><td>✅ Self-documenting</td><td>✅ Clear at both layers</td></tr><tr><td><strong>Proxy Size</strong></td><td>✅ Small (6 services)</td><td>❌ Large (20+ services)</td><td>✅ Core small, plugins opt-in</td></tr><tr><td><strong>Schema Evolution</strong></td><td>⚠️ Affects all use cases</td><td>✅ Localized impact</td><td>✅ Primitives stable, patterns evolve independently</td></tr><tr><td><strong>Flexibility</strong></td><td>✅ Unlimited composition</td><td>⚠️ Fixed patterns</td><td>✅ Both available</td></tr><tr><td><strong>Performance</strong></td><td>✅ Direct control</td><td>⚠️ Coordinator overhead</td><td>✅ Choose based on need</td></tr><tr><td><strong>Learning Curve</strong></td><td>❌ Steep (distributed systems knowledge)</td><td>✅ Gentle (use-case driven)</td><td>✅ Start simple, grow into advanced</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="comparison-to-alternatives">Comparison to Alternatives<a href="#comparison-to-alternatives" class="hash-link" aria-label="Direct link to Comparison to Alternatives" title="Direct link to Comparison to Alternatives" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-a-primitives-only-no-layer-2">Alternative A: Primitives Only (No Layer 2)<a href="#alternative-a-primitives-only-no-layer-2" class="hash-link" aria-label="Direct link to Alternative A: Primitives Only (No Layer 2)" title="Direct link to Alternative A: Primitives Only (No Layer 2)" translate="no">​</a></h3>
<p><strong>Example</strong>: AWS DynamoDB, Redis, etcd</p>
<p><strong>Pros</strong>:</p>
<ul>
<li>Simple implementation</li>
<li>Small API surface</li>
<li>Maximum flexibility</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>❌ High application complexity</li>
<li>❌ Every team reimplements common patterns</li>
<li>❌ No semantic guarantees</li>
</ul>
<p><strong>Verdict</strong>: Too low-level for Prism&#x27;s goal of &quot;push complexity down&quot;</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-b-use-case-apis-only-no-layer-1">Alternative B: Use-Case APIs Only (No Layer 1)<a href="#alternative-b-use-case-apis-only-no-layer-1" class="hash-link" aria-label="Direct link to Alternative B: Use-Case APIs Only (No Layer 1)" title="Direct link to Alternative B: Use-Case APIs Only (No Layer 1)" translate="no">​</a></h3>
<p><strong>Example</strong>: Twilio (SendMessage), Stripe (CreateCharge), Firebase (specific SDKs)</p>
<p><strong>Pros</strong>:</p>
<ul>
<li>Ergonomic</li>
<li>Self-documenting</li>
<li>Fast onboarding</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>❌ API explosion (100+ services?)</li>
<li>❌ Inflexible (can&#x27;t compose novel patterns)</li>
<li>❌ Large proxy binary</li>
</ul>
<p><strong>Verdict</strong>: Too rigid for Prism&#x27;s diverse use cases</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="alternative-c-hybrid-like-kubernetes">Alternative C: Hybrid (Like Kubernetes)<a href="#alternative-c-hybrid-like-kubernetes" class="hash-link" aria-label="Direct link to Alternative C: Hybrid (Like Kubernetes)" title="Direct link to Alternative C: Hybrid (Like Kubernetes)" translate="no">​</a></h3>
<p><strong>Example</strong>: Kubernetes (core API + CRDs + Operators)</p>
<p><strong>Pros</strong>:</p>
<ul>
<li>✅ Core stays stable</li>
<li>✅ Extensible (community patterns)</li>
<li>✅ Balances simplicity and power</li>
</ul>
<p><strong>Cons</strong>:</p>
<ul>
<li>⚠️ Two-tier documentation complexity</li>
<li>⚠️ Requires clear guidance on when to use each layer</li>
</ul>
<p><strong>Verdict</strong>: ✅ <strong>Best fit</strong> - matches Prism&#x27;s architecture</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="implementation-roadmap">Implementation Roadmap<a href="#implementation-roadmap" class="hash-link" aria-label="Direct link to Implementation Roadmap" title="Direct link to Implementation Roadmap" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-1-poc-validation-weeks-1-6-rfc-018">Phase 1: POC Validation (Weeks 1-6, RFC-018)<a href="#phase-1-poc-validation-weeks-1-6-rfc-018" class="hash-link" aria-label="Direct link to Phase 1: POC Validation (Weeks 1-6, RFC-018)" title="Direct link to Phase 1: POC Validation (Weeks 1-6, RFC-018)" translate="no">​</a></h3>
<p><strong>Implement Layer 1 only</strong> (KeyValue, PubSub):</p>
<ul>
<li>POC 1: KeyValue with MemStore</li>
<li>POC 2: KeyValue with Redis</li>
<li>POC 3: PubSub with NATS</li>
</ul>
<p><strong>Goal</strong>: Prove primitives are sufficient for basic use cases.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-2-pattern-coordinator-prototype-weeks-7-9-rfc-018">Phase 2: Pattern Coordinator Prototype (Weeks 7-9, RFC-018)<a href="#phase-2-pattern-coordinator-prototype-weeks-7-9-rfc-018" class="hash-link" aria-label="Direct link to Phase 2: Pattern Coordinator Prototype (Weeks 7-9, RFC-018)" title="Direct link to Phase 2: Pattern Coordinator Prototype (Weeks 7-9, RFC-018)" translate="no">​</a></h3>
<p><strong>Implement one Layer 2 pattern</strong> (Multicast Registry):</p>
<ul>
<li>POC 4: Multicast Registry coordinator plugin</li>
<li>Validate plugin architecture</li>
<li>Measure coordination overhead</li>
</ul>
<p><strong>Goal</strong>: Prove pattern coordinators add value without excessive complexity.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-3-expand-pattern-library-post-poc-weeks-12">Phase 3: Expand Pattern Library (Post-POC, Weeks 12+)<a href="#phase-3-expand-pattern-library-post-poc-weeks-12" class="hash-link" aria-label="Direct link to Phase 3: Expand Pattern Library (Post-POC, Weeks 12+)" title="Direct link to Phase 3: Expand Pattern Library (Post-POC, Weeks 12+)" translate="no">​</a></h3>
<p><strong>Add 3-5 common patterns</strong>:</p>
<ul>
<li>Saga coordinator (distributed transactions)</li>
<li>Event sourcing (append-only log + replay)</li>
<li>Work queue (background jobs)</li>
<li>Cache aside (read-through cache)</li>
<li>Rate limiter (token bucket)</li>
</ul>
<p><strong>Goal</strong>: Cover 80% of use cases with Layer 2 patterns.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="phase-4-community-patterns-months-3-6">Phase 4: Community Patterns (Months 3-6)<a href="#phase-4-community-patterns-months-3-6" class="hash-link" aria-label="Direct link to Phase 4: Community Patterns (Months 3-6)" title="Direct link to Phase 4: Community Patterns (Months 3-6)" translate="no">​</a></h3>
<p><strong>Enable third-party pattern plugins</strong>:</p>
<ul>
<li>Pattern plugin SDK</li>
<li>Plugin marketplace</li>
<li>Certification program</li>
</ul>
<p><strong>Goal</strong>: Ecosystem of community-contributed patterns.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="naming-conventions">Naming Conventions<a href="#naming-conventions" class="hash-link" aria-label="Direct link to Naming Conventions" title="Direct link to Naming Conventions" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="layer-1-primitives-use-abstract-nouns">Layer 1: Primitives Use Abstract Nouns<a href="#layer-1-primitives-use-abstract-nouns" class="hash-link" aria-label="Direct link to Layer 1: Primitives Use Abstract Nouns" title="Direct link to Layer 1: Primitives Use Abstract Nouns" translate="no">​</a></h3>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">KeyValueService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// Generic storage</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">PubSubService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Generic messaging</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">QueueService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">       </span><span class="token comment" style="color:#999988;font-style:italic">// Generic queue</span><br></span></code></pre></div></div>
<p><strong>Rationale</strong>: Abstract names signal &quot;building block&quot; nature.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="layer-2-patterns-use-domain-specific-verbs">Layer 2: Patterns Use Domain-Specific Verbs<a href="#layer-2-patterns-use-domain-specific-verbs" class="hash-link" aria-label="Direct link to Layer 2: Patterns Use Domain-Specific Verbs" title="Direct link to Layer 2: Patterns Use Domain-Specific Verbs" translate="no">​</a></h3>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">MulticastRegistryService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// Identity management + broadcast</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">SagaService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">// Multi-step transactions</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">service</span><span class="token plain"> </span><span class="token class-name">EventSourcingService</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// Audit-logged mutations</span><br></span></code></pre></div></div>
<p><strong>Rationale</strong>: Specific names signal purpose and use case.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="open-questions">Open Questions<a href="#open-questions" class="hash-link" aria-label="Direct link to Open Questions" title="Direct link to Open Questions" translate="no">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-how-do-we-prevent-layer-2-explosion">1. How do we prevent Layer 2 explosion?<a href="#1-how-do-we-prevent-layer-2-explosion" class="hash-link" aria-label="Direct link to 1. How do we prevent Layer 2 explosion?" title="Direct link to 1. How do we prevent Layer 2 explosion?" translate="no">​</a></h3>
<p><strong>Proposal</strong>: Curated pattern library with strict acceptance criteria:</p>
<ul>
<li>Must solve a common problem (&gt;10% of use cases)</li>
<li>Must provide semantic guarantees over Layer 1 composition</li>
<li>Must have clear ownership and maintenance plan</li>
</ul>
<p><strong>Example rejection</strong>: <code>BlogPostService</code> (too specific, just use KeyValue)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-can-layer-2-patterns-compose-with-each-other">2. Can Layer 2 patterns compose with each other?<a href="#2-can-layer-2-patterns-compose-with-each-other" class="hash-link" aria-label="Direct link to 2. Can Layer 2 patterns compose with each other?" title="Direct link to 2. Can Layer 2 patterns compose with each other?" translate="no">​</a></h3>
<p><strong>Example</strong>: Saga + Multicast Registry?</p>
<p><strong>Proposal</strong>: Yes, but patterns should compose via Layer 1 APIs (not directly call each other).</p>
<p>SagaService (Layer 2)
↓ uses
KeyValueService (Layer 1)
↑ used by
MulticastRegistryService (Layer 2)</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Rationale**: Keeps patterns loosely coupled, evolution independent.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 3. How do we version Layer 2 patterns independently?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Proposal**: Pattern coordinators are plugins with semantic versioning:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<p>coordinator_plugin: prism-multicast-registry:v1.2.0</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Migration path**:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- v1.x: Breaking changes → new major version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- v2.x: Runs side-by-side with v1.x</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- Namespaces pin to specific version</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### 4. Should Layer 1 APIs be Sufficient for All Use Cases?</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Proposal**: Yes - Layer 1 is Turing-complete (can implement any pattern).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Rationale**: If a pattern can&#x27;t be built on Layer 1, we have a gap in primitives (not just missing sugar).</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">**Litmus test**: If Multicast Registry can&#x27;t be implemented using KeyValue + PubSub, we need to add primitives.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Success Metrics</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### Developer Experience</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Onboarding time**: New developers productive in &amp;lt;1 day (using Layer 2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Code reduction**: Layer 2 reduces boilerplate by &amp;gt;50% vs Layer 1 composition</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Error clarity**: 90% of errors are self-explanatory without docs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### System Complexity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Core proxy size**: Remains &amp;lt;15k LOC (only Layer 1)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Binary size**: Core &amp;lt;75MB, each pattern plugin &amp;lt;10MB</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Dependency count**: Core has &amp;lt;20 dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">### Pattern Adoption</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Coverage**: Layer 2 patterns cover &amp;gt;80% of use cases</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Usage split**: 80% of applications use at least one Layer 2 pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- ✅ **Community**: 5+ community-contributed patterns within 6 months</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Related Documents</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [RFC-014: Layered Data Access Patterns](/rfc/rfc-014) - Layer 1 primitives</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [RFC-017: Multicast Registry Pattern](/rfc/rfc-017) - First Layer 2 pattern</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [RFC-018: POC Implementation Strategy](/rfc/rfc-018) - Phased rollout plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- [RFC-008: Proxy Plugin Architecture](/rfc/rfc-008) - Plugin system</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## Revision History</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">- 2025-10-09: Initial draft proposing layered API architecture (primitives + patterns)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/api-design">api-design</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/patterns">patterns</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/developer-experience">developer-experience</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/architecture">architecture</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/prism-data-layer/memos/tags/evolution">evolution</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/jrepp/prism-data-layer/tree/main/docs-cms/../docs-cms/memos/memo-005-client-protocol-design-philosophy.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/prism-data-layer/memos/memo-004"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Backend Plugin Implementation Guide • MEMO-004</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/prism-data-layer/memos/memo-006"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Backend Interface Decomposition and Schema Registry • MEMO-006</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#purpose" class="table-of-contents__link toc-highlight">Purpose</a></li><li><a href="#context" class="table-of-contents__link toc-highlight">Context</a><ul><li><a href="#rfc-014-layered-data-access-patterns-composable-approach" class="table-of-contents__link toc-highlight">RFC-014: Layered Data Access Patterns (Composable Approach)</a></li><li><a href="#rfc-017-multicast-registry-use-case-specific-approach" class="table-of-contents__link toc-highlight">RFC-017: Multicast Registry (Use-Case-Specific Approach)</a></li></ul></li><li><a href="#design-principles" class="table-of-contents__link toc-highlight">Design Principles</a><ul><li><a href="#1-push-complexity-down-from-application-developers--primary" class="table-of-contents__link toc-highlight">1. Push Complexity Down from Application Developers ⭐ <strong>PRIMARY</strong></a></li><li><a href="#2-developer-comprehension-and-usability--primary" class="table-of-contents__link toc-highlight">2. Developer Comprehension and Usability ⭐ <strong>PRIMARY</strong></a></li><li><a href="#3-schema-and-service-evolution" class="table-of-contents__link toc-highlight">3. Schema and Service Evolution</a></li><li><a href="#4-keep-proxy-small-and-tight" class="table-of-contents__link toc-highlight">4. Keep Proxy Small and Tight</a></li></ul></li><li><a href="#decision-matrix" class="table-of-contents__link toc-highlight">Decision Matrix</a></li><li><a href="#comparison-to-alternatives" class="table-of-contents__link toc-highlight">Comparison to Alternatives</a><ul><li><a href="#alternative-a-primitives-only-no-layer-2" class="table-of-contents__link toc-highlight">Alternative A: Primitives Only (No Layer 2)</a></li><li><a href="#alternative-b-use-case-apis-only-no-layer-1" class="table-of-contents__link toc-highlight">Alternative B: Use-Case APIs Only (No Layer 1)</a></li><li><a href="#alternative-c-hybrid-like-kubernetes" class="table-of-contents__link toc-highlight">Alternative C: Hybrid (Like Kubernetes)</a></li></ul></li><li><a href="#implementation-roadmap" class="table-of-contents__link toc-highlight">Implementation Roadmap</a><ul><li><a href="#phase-1-poc-validation-weeks-1-6-rfc-018" class="table-of-contents__link toc-highlight">Phase 1: POC Validation (Weeks 1-6, RFC-018)</a></li><li><a href="#phase-2-pattern-coordinator-prototype-weeks-7-9-rfc-018" class="table-of-contents__link toc-highlight">Phase 2: Pattern Coordinator Prototype (Weeks 7-9, RFC-018)</a></li><li><a href="#phase-3-expand-pattern-library-post-poc-weeks-12" class="table-of-contents__link toc-highlight">Phase 3: Expand Pattern Library (Post-POC, Weeks 12+)</a></li><li><a href="#phase-4-community-patterns-months-3-6" class="table-of-contents__link toc-highlight">Phase 4: Community Patterns (Months 3-6)</a></li></ul></li><li><a href="#naming-conventions" class="table-of-contents__link toc-highlight">Naming Conventions</a><ul><li><a href="#layer-1-primitives-use-abstract-nouns" class="table-of-contents__link toc-highlight">Layer 1: Primitives Use Abstract Nouns</a></li><li><a href="#layer-2-patterns-use-domain-specific-verbs" class="table-of-contents__link toc-highlight">Layer 2: Patterns Use Domain-Specific Verbs</a></li></ul></li><li><a href="#open-questions" class="table-of-contents__link toc-highlight">Open Questions</a><ul><li><a href="#1-how-do-we-prevent-layer-2-explosion" class="table-of-contents__link toc-highlight">1. How do we prevent Layer 2 explosion?</a></li><li><a href="#2-can-layer-2-patterns-compose-with-each-other" class="table-of-contents__link toc-highlight">2. Can Layer 2 patterns compose with each other?</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/intro">Overview</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/docs/changelog">Change Log</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/adr">ADRs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/rfc">RFCs</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/memos">Memos</a></li><li class="footer__item"><a class="footer__link-item" href="/prism-data-layer/prds">PRDs</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Project</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/jrepp/prism-data-layer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div>Copyright © 2025 Prism. Built with Docusaurus.</div><div style="margin-top:0.5rem;font-size:0.875rem;opacity:0.8"><span>Version <!-- -->f173b29</span><span> • </span><span>Built <!-- -->Oct 14, 2025, 01:37 AM PDT</span><span> • </span><span>Commit <!-- -->f173b29</span></div></div></div></div></footer></div>
</body>
</html>